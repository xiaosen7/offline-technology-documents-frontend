{"pageProps":{"toc":"[{\"url\":\"#\",\"text\":\"æ¦‚è§ˆ\",\"depth\":2},{\"url\":\"#referencing-values-with-refs\",\"depth\":2,\"text\":\"ä½¿ç”¨ ref å¼•ç”¨å€¼ \"},{\"url\":\"#manipulating-the-dom-with-refs\",\"depth\":2,\"text\":\"ä½¿ç”¨ ref æ“ä½œ DOM \"},{\"url\":\"#synchronizing-with-effects\",\"depth\":2,\"text\":\"ä½¿ç”¨ Effect å®ç°åŒæ­¥ \"},{\"url\":\"#you-might-not-need-an-effect\",\"depth\":2,\"text\":\"ä½ å¯èƒ½ä¸éœ€è¦ Effect \"},{\"url\":\"#lifecycle-of-reactive-effects\",\"depth\":2,\"text\":\"å“åº”å¼ Effect çš„ç”Ÿå‘½å‘¨æœŸ \"},{\"url\":\"#separating-events-from-effects\",\"depth\":2,\"text\":\"ä» Effect ä¸­åˆ†ç¦»äº‹ä»¶ \"},{\"url\":\"#removing-effect-dependencies\",\"depth\":2,\"text\":\"ç§»é™¤ Effect ä¾èµ– \"},{\"url\":\"#reusing-logic-with-custom-hooks\",\"depth\":2,\"text\":\"ä½¿ç”¨è‡ªå®šä¹‰ Hook å¤ç”¨é€»è¾‘ \"},{\"url\":\"#whats-next\",\"depth\":2,\"text\":\"ä¸‹èŠ‚é¢„å‘Š \"}]","content":"[[\"$r\",\"MaxWidth\",\"12\",{\"children\":[[\"$r\",\"Intro\",null,{\"children\":[\"$r\",\"p\",null,{\"children\":\"æœ‰äº›ç»„ä»¶å¯èƒ½éœ€è¦æ§åˆ¶å’ŒåŒæ­¥ React ä¹‹å¤–çš„ç³»ç»Ÿã€‚ä¾‹å¦‚ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨æµè§ˆå™¨ API èšç„¦è¾“å…¥æ¡†ï¼Œæˆ–è€…åœ¨æ²¡æœ‰ React çš„æƒ…å†µä¸‹å®ç°è§†é¢‘æ’­æ”¾å™¨ï¼Œæˆ–è€…è¿æ¥å¹¶ç›‘å¬è¿œç¨‹æœåŠ¡å™¨çš„æ¶ˆæ¯ã€‚åœ¨æœ¬ç« ä¸­ï¼Œä½ å°†å­¦ä¹ åˆ°ä¸€äº›è„±å›´æœºåˆ¶ï¼Œè®©ä½ å¯ä»¥â€œèµ°å‡ºâ€ React å¹¶è¿æ¥åˆ°å¤–éƒ¨ç³»ç»Ÿã€‚å¤§å¤šæ•°åº”ç”¨é€»è¾‘å’Œæ•°æ®æµä¸åº”è¯¥ä¾èµ–è¿™äº›åŠŸèƒ½ã€‚\"}]}],\"\\n\",[\"$r\",\"YouWillLearn\",null,{\"isChapter\":true,\"children\":[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/learn/referencing-values-with-refs\",\"children\":\"åœ¨ä¸é‡æ–°æ¸²æŸ“çš„æƒ…å†µä¸‹â€œè®°ä½â€ä¿¡æ¯\"}]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/learn/manipulating-the-dom-with-refs\",\"children\":\"è®¿é—® React ç®¡ç†çš„ DOM å…ƒç´ \"}]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/learn/synchronizing-with-effects\",\"children\":\"å°†ç»„ä»¶ä¸å¤–éƒ¨ç³»ç»ŸåŒæ­¥\"}]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/learn/you-might-not-need-an-effect\",\"children\":\"ä»ç»„ä»¶ä¸­åˆ é™¤ä¸å¿…è¦çš„ Effect\"}]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/learn/lifecycle-of-reactive-effects\",\"children\":\"Effect çš„ç”Ÿå‘½å‘¨æœŸä¸ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæœ‰ä½•ä¸åŒ\"}]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/learn/separating-events-from-effects\",\"children\":\"é˜²æ­¢æŸäº›å€¼é‡æ–°è§¦å‘ Effect\"}]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/learn/removing-effect-dependencies\",\"children\":\"å‡å°‘ Effect é‡æ–°æ‰§è¡Œçš„é¢‘ç‡\"}]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/learn/reusing-logic-with-custom-hooks\",\"children\":\"åœ¨ç»„ä»¶ä¹‹é—´å…±äº«é€»è¾‘\"}]}],\"\\n\"]}]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"referencing-values-with-refs\",\"children\":\"ä½¿ç”¨ ref å¼•ç”¨å€¼ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å½“ä½ å¸Œæœ›ç»„ä»¶â€œè®°ä½â€æŸäº›ä¿¡æ¯ï¼Œä½†åˆä¸æƒ³è®©è¿™äº›ä¿¡æ¯ \",[\"$r\",\"a\",null,{\"href\":\"/learn/render-and-commit\",\"children\":\"è§¦å‘æ–°çš„æ¸²æŸ“\"}],\" æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨ \",[\"$r\",\"strong\",null,{\"children\":\"ref\"}],\"ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"const ref = useRef(0);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä¸ state ä¸€æ ·ï¼Œref åœ¨é‡æ–°æ¸²æŸ“ä¹‹é—´ç”± React ä¿ç•™ã€‚ä½†æ˜¯ï¼Œè®¾ç½® state ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œè€Œæ›´æ”¹ ref ä¸ä¼šï¼ä½ å¯ä»¥é€šè¿‡ \",[\"$r\",\"code\",null,{\"children\":\"ref.current\"}],\" å±æ€§è®¿é—®è¯¥ ref çš„å½“å‰å€¼ã€‚\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useRef } from 'react';\\n\\nexport default function Counter() {\\n  let ref = useRef(0);\\n\\n  function handleClick() {\\n    ref.current = ref.current + 1;\\n    alert('ä½ ç‚¹å‡»äº† ' + ref.current + ' æ¬¡!');\\n  }\\n\\n  return (\\n    <button onClick={handleClick}>\\n      ç‚¹æˆ‘ï¼\\n    </button>\\n  );\\n}\\n\"}]}]}],[\"$r\",\"MaxWidth\",\"22\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ref å°±åƒç»„ä»¶çš„ä¸€ä¸ªä¸è¢« React è¿½è¸ªçš„ç§˜å¯†å£è¢‹ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨ ref æ¥å­˜å‚¨ \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/API/setTimeout#return_value\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"timeout ID\"}],\"ã€\",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/API/Element\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"DOM å…ƒç´ \"}],\" å’Œå…¶ä»–ä¸å½±å“ç»„ä»¶æ¸²æŸ“è¾“å‡ºçš„å¯¹è±¡ã€‚\"]}],\"\\n\",[\"$r\",\"LearnMore\",null,{\"path\":\"/learn/referencing-values-with-refs\",\"children\":[\"$r\",\"p\",null,{\"children\":[\"é˜…è¯» \",[\"$r\",\"strong\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/learn/referencing-values-with-refs\",\"children\":\"ä½¿ç”¨ ref å¼•ç”¨å€¼\"}]}],\" ä»¥äº†è§£å¦‚ä½•ä½¿ç”¨ ref æ¥è®°ä½ä¿¡æ¯ã€‚\"]}]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"manipulating-the-dom-with-refs\",\"children\":\"ä½¿ç”¨ ref æ“ä½œ DOM \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ç”±äº React ä¼šè‡ªåŠ¨æ›´æ–° \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/docs/Web/API/Document_Object_Model/Introduction\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"DOM\"}],\" ä»¥åŒ¹é…æ¸²æŸ“è¾“å‡ºï¼Œå› æ­¤ç»„ä»¶é€šå¸¸ä¸éœ€è¦æ“ä½œ DOMã€‚ä½†æ˜¯ï¼Œæœ‰æ—¶å¯èƒ½éœ€è¦è®¿é—®ç”± React ç®¡ç†çš„ DOM å…ƒç´ â€”â€”ä¾‹å¦‚èšç„¦èŠ‚ç‚¹ã€æ»šåŠ¨åˆ°æ­¤èŠ‚ç‚¹ï¼Œä»¥åŠæµ‹é‡å®ƒçš„å°ºå¯¸å’Œä½ç½®ã€‚React æ²¡æœ‰å†…ç½®çš„æ–¹æ³•æ¥æ‰§è¡Œæ­¤ç±»æ“ä½œï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªæŒ‡å‘ DOM èŠ‚ç‚¹çš„ ref æ¥å®ç°ã€‚ä¾‹å¦‚ï¼Œç‚¹å‡»æŒ‰é’®å°†ä½¿ç”¨ ref èšç„¦è¾“å…¥æ¡†ï¼š\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useRef } from 'react';\\n\\nexport default function Form() {\\n  const inputRef = useRef(null);\\n\\n  function handleClick() {\\n    inputRef.current.focus();\\n  }\\n\\n  return (\\n    <>\\n      <input ref={inputRef} />\\n      <button onClick={handleClick}>\\n        èšç„¦è¾“å…¥æ¡†\\n      </button>\\n    </>\\n  );\\n}\\n\"}]}]}],[\"$r\",\"MaxWidth\",\"32\",{\"children\":[\"\\n\",[\"$r\",\"LearnMore\",null,{\"path\":\"/learn/manipulating-the-dom-with-refs\",\"children\":[\"$r\",\"p\",null,{\"children\":[\"é˜…è¯» \",[\"$r\",\"strong\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/learn/manipulating-the-dom-with-refs\",\"children\":\"ä½¿ç”¨ ref æ“ä½œ DOM\"}]}],\" ä»¥äº†è§£å¦‚ä½•è®¿é—® React ç®¡ç†çš„ DOM å…ƒç´ ã€‚\"]}]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"synchronizing-with-effects\",\"children\":\"ä½¿ç”¨ Effect å®ç°åŒæ­¥ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"æœ‰äº›ç»„ä»¶éœ€è¦ä¸å¤–éƒ¨ç³»ç»ŸåŒæ­¥ã€‚ä¾‹å¦‚ï¼Œå¯èƒ½éœ€è¦æ ¹æ® React çŠ¶æ€æ§åˆ¶é React ç»„ä»¶ã€è®¾ç½®æœåŠ¡å™¨è¿æ¥æˆ–åœ¨ç»„ä»¶å‡ºç°åœ¨å±å¹•ä¸Šæ—¶å‘é€åˆ†ææ—¥å¿—ã€‚ä¸å¤„ç†ç‰¹å®šäº‹ä»¶çš„äº‹ä»¶å¤„ç†ç¨‹åºä¸åŒï¼Œ\",[\"$r\",\"strong\",null,{\"children\":\"Effect\"}],\" åœ¨æ¸²æŸ“åè¿è¡Œä¸€äº›ä»£ç ã€‚ä½¿ç”¨å®ƒå°†ç»„ä»¶ä¸ React ä¹‹å¤–çš„ç³»ç»ŸåŒæ­¥ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å¤šæŒ‰å‡ æ¬¡æ’­æ”¾/æš‚åœï¼Œè§‚å¯Ÿè§†é¢‘æ’­æ”¾å™¨å¦‚ä½•ä¸ \",[\"$r\",\"code\",null,{\"children\":\"isPlaying\"}],\" å±æ€§å€¼ä¿æŒåŒæ­¥ï¼š\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState, useRef, useEffect } from 'react';\\n\\nfunction VideoPlayer({ src, isPlaying }) {\\n  const ref = useRef(null);\\n\\n  useEffect(() => {\\n    if (isPlaying) {\\n      ref.current.play();\\n    } else {\\n      ref.current.pause();\\n    }\\n  }, [isPlaying]);\\n\\n  return <video ref={ref} src={src} loop playsInline />;\\n}\\n\\nexport default function App() {\\n  const [isPlaying, setIsPlaying] = useState(false);\\n  return (\\n    <>\\n      <button onClick={() => setIsPlaying(!isPlaying)}>\\n        {isPlaying ? 'æš‚åœ' : 'æ’­æ”¾'}\\n      </button>\\n      <VideoPlayer\\n        isPlaying={isPlaying}\\n        src=\\\"https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4\\\"\\n      />\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"button { display: block; margin-bottom: 20px; }\\nvideo { width: 250px; }\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"36\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è®¸å¤š Effect ä¹Ÿä¼šè‡ªè¡Œâ€œæ¸…ç†â€ã€‚ä¾‹å¦‚ï¼Œä¸èŠå¤©æœåŠ¡å™¨å»ºç«‹è¿æ¥çš„ Effect åº”è¯¥è¿”å›ä¸€ä¸ª \",[\"$r\",\"strong\",null,{\"children\":\"cleanup å‡½æ•°\"}],\"ï¼Œå‘Šè¯‰ React å¦‚ä½•æ–­å¼€ç»„ä»¶ä¸è¯¥æœåŠ¡å™¨çš„è¿æ¥ï¼š\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState, useEffect } from 'react';\\nimport { createConnection } from './chat.js';\\n\\nexport default function ChatRoom() {\\n  useEffect(() => {\\n    const connection = createConnection();\\n    connection.connect();\\n    return () => connection.disconnect();\\n  }, []);\\n  return <h1>æ¬¢è¿å‰æ¥èŠå¤©ï¼</h1>;\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/chat.js\",\"children\":\"export function createConnection() {\\n  // çœŸæ­£çš„å®ç°å®é™…ä¸Šä¼šè¿æ¥åˆ°æœåŠ¡å™¨\\n  return {\\n    connect() {\\n      console.log('âœ… è¿æ¥ä¸­...');\\n    },\\n    disconnect() {\\n      console.log('âŒ æ–­å¼€è¿æ¥ã€‚');\\n    }\\n  };\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"input { display: block; margin-bottom: 20px; }\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"68\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨å¼€å‘ç¯å¢ƒä¸­ï¼ŒReact å°†ç«‹å³è¿è¡Œå¹¶é¢å¤–æ¸…ç†ä¸€æ¬¡ Effectã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ ä¼šçœ‹åˆ° \",[\"$r\",\"code\",null,{\"children\":\"\\\"âœ… è¿æ¥ä¸­...\\\"\"}],\" æ‰“å°äº†ä¸¤æ¬¡ã€‚è¿™èƒ½å¤Ÿç¡®ä¿ä½ ä¸ä¼šå¿˜è®°å®ç°æ¸…ç†åŠŸèƒ½ã€‚\"]}],\"\\n\",[\"$r\",\"LearnMore\",null,{\"path\":\"/learn/synchronizing-with-effects\",\"children\":[\"$r\",\"p\",null,{\"children\":[\"é˜…è¯» \",[\"$r\",\"strong\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/learn/synchronizing-with-effects\",\"children\":\"ä½¿ç”¨ Effect å®ç°åŒæ­¥\"}]}],\" ä»¥äº†è§£å¦‚ä½•å°†ç»„ä»¶ä¸å¤–éƒ¨ç³»ç»ŸåŒæ­¥ã€‚\"]}]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"you-might-not-need-an-effect\",\"children\":\"ä½ å¯èƒ½ä¸éœ€è¦ Effect \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Effect æ˜¯ React èŒƒå¼ä¸­çš„ä¸€ç§è„±å›´æœºåˆ¶ã€‚å®ƒä»¬å¯ä»¥â€œé€ƒå‡ºâ€ React å¹¶ä½¿ç»„ä»¶å’Œä¸€äº›å¤–éƒ¨ç³»ç»ŸåŒæ­¥ã€‚å¦‚æœæ²¡æœ‰æ¶‰åŠåˆ°å¤–éƒ¨ç³»ç»Ÿï¼ˆä¾‹å¦‚ï¼Œéœ€è¦æ ¹æ®ä¸€äº› props æˆ– state çš„å˜åŒ–æ¥æ›´æ–°ä¸€ä¸ªç»„ä»¶çš„ stateï¼‰ï¼Œä¸åº”è¯¥ä½¿ç”¨ Effectã€‚ç§»é™¤ä¸å¿…è¦çš„ Effect å¯ä»¥è®©ä»£ç æ›´å®¹æ˜“ç†è§£ï¼Œè¿è¡Œå¾—æ›´å¿«ï¼Œå¹¶ä¸”æ›´å°‘å‡ºé”™ã€‚\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"æœ‰ä¸¤ç§å¸¸è§çš„ä¸å¿…ä½¿ç”¨ Effect çš„æƒ…å†µï¼š\"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"$r\",\"strong\",null,{\"children\":\"ä¸å¿…ä¸ºäº†æ¸²æŸ“è€Œä½¿ç”¨ Effect æ¥è½¬æ¢æ•°æ®ã€‚\"}]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"$r\",\"strong\",null,{\"children\":\"ä¸å¿…ä½¿ç”¨ Effect æ¥å¤„ç†ç”¨æˆ·äº‹ä»¶ã€‚\"}]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ä¾‹å¦‚ï¼Œä¸éœ€è¦ Effect æ¥æ ¹æ®å…¶ä»–çŠ¶æ€è°ƒæ•´æŸäº›çŠ¶æ€ï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{5-9}\",\"children\":\"function Form() {\\n  const [firstName, setFirstName] = useState('æ³°å‹’');\\n  const [lastName, setLastName] = useState('æ–¯å¨å¤«ç‰¹');\\n\\n  // ğŸ”´ é¿å…ï¼šå¤šä½™çš„ state å’Œä¸å¿…è¦çš„ Effect\\n  const [fullName, setFullName] = useState('');\\n  useEffect(() => {\\n    setFullName(firstName + ' ' + lastName);\\n  }, [firstName, lastName]);\\n  // ...\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ç›¸åï¼Œåœ¨æ¸²æŸ“æ—¶è¿›è¡Œå°½å¯èƒ½å¤šåœ°è®¡ç®—ï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{4-5}\",\"children\":\"function Form() {\\n  const [firstName, setFirstName] = useState('æ³°å‹’');\\n  const [lastName, setLastName] = useState('æ–¯å¨å¤«ç‰¹');\\n  // âœ… éå¸¸å¥½ï¼šåœ¨æ¸²æŸ“æœŸé—´è¿›è¡Œè®¡ç®—\\n  const fullName = firstName + ' ' + lastName;\\n  // ...\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä½  \",[\"$r\",\"strong\",null,{\"children\":\"çš„ç¡®\"}],\" å¯ä»¥ä½¿ç”¨ Effect æ¥å’Œå¤–éƒ¨ç³»ç»ŸåŒæ­¥ã€‚\"]}],\"\\n\",[\"$r\",\"LearnMore\",null,{\"path\":\"/learn/you-might-not-need-an-effect\",\"children\":[\"$r\",\"p\",null,{\"children\":[\"é˜…è¯» \",[\"$r\",\"strong\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/learn/you-might-not-need-an-effect\",\"children\":\"ä½ å¯èƒ½ä¸éœ€è¦ Effect\"}]}],\" ä»¥äº†è§£å¦‚ä½•ç§»é™¤ä¸å¿…è¦çš„ Effectã€‚\"]}]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"lifecycle-of-reactive-effects\",\"children\":\"å“åº”å¼ Effect çš„ç”Ÿå‘½å‘¨æœŸ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Effect çš„ç”Ÿå‘½å‘¨æœŸä¸åŒäºç»„ä»¶ã€‚ç»„ä»¶å¯ä»¥æŒ‚è½½ã€æ›´æ–°æˆ–å¸è½½ã€‚Effect åªèƒ½åšä¸¤ä»¶äº‹ï¼šå¼€å§‹åŒæ­¥æŸäº›ä¸œè¥¿ï¼Œç„¶ååœæ­¢åŒæ­¥å®ƒã€‚å¦‚æœ Effect ä¾èµ–äºéšæ—¶é—´å˜åŒ–çš„ props å’Œ stateï¼Œè¿™ä¸ªå¾ªç¯å¯èƒ½ä¼šå‘ç”Ÿå¤šæ¬¡ã€‚\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è¿™ä¸ª Effect ä¾èµ–äº \",[\"$r\",\"code\",null,{\"children\":\"roomId\"}],\" props çš„å€¼ã€‚props æ˜¯ \",[\"$r\",\"strong\",null,{\"children\":\"å“åº”å€¼\"}],\"ï¼Œè¿™æ„å‘³ç€å®ƒä»¬å¯ä»¥åœ¨é‡æ–°æ¸²æŸ“æ—¶æ”¹å˜ã€‚æ³¨æ„ï¼Œå¦‚æœ \",[\"$r\",\"code\",null,{\"children\":\"roomId\"}],\" æ›´æ”¹ï¼ŒEffect å°†ä¼š \",[\"$r\",\"strong\",null,{\"children\":\"é‡æ–°åŒæ­¥\"}],\"ï¼ˆå¹¶é‡æ–°è¿æ¥åˆ°æœåŠ¡å™¨ï¼‰ï¼š\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState, useEffect } from 'react';\\nimport { createConnection } from './chat.js';\\n\\nconst serverUrl = 'https://localhost:1234';\\n\\nfunction ChatRoom({ roomId }) {\\n  useEffect(() => {\\n    const connection = createConnection(serverUrl, roomId);\\n    connection.connect();\\n    return () => connection.disconnect();\\n  }, [roomId]);\\n\\n  return <h1>æ¬¢è¿æ¥åˆ° {roomId} æˆ¿é—´ï¼</h1>;\\n}\\n\\nexport default function App() {\\n  const [roomId, setRoomId] = useState('general');\\n  return (\\n    <>\\n      <label>\\n        é€‰æ‹©èŠå¤©å®¤ï¼š{' '}\\n        <select\\n          value={roomId}\\n          onChange={e => setRoomId(e.target.value)}\\n        >\\n          <option value=\\\"general\\\">æ‰€æœ‰</option>\\n          <option value=\\\"travel\\\">æ—…æ¸¸</option>\\n          <option value=\\\"music\\\">éŸ³ä¹</option>\\n        </select>\\n      </label>\\n      <hr />\\n      <ChatRoom roomId={roomId} />\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/chat.js\",\"children\":\"export function createConnection(serverUrl, roomId) {\\n  // çœŸæ­£çš„å®ç°å®é™…ä¸Šä¼šè¿æ¥åˆ°æœåŠ¡å™¨\\n  return {\\n    connect() {\\n      console.log('âœ… è¿æ¥åˆ° \\\"' + roomId + '\\\" æˆ¿é—´ï¼Œåœ¨' + serverUrl + '...');\\n    },\\n    disconnect() {\\n      console.log('âŒ æ–­å¼€ \\\"' + roomId + '\\\" æˆ¿é—´ï¼Œåœ¨' + serverUrl);\\n    }\\n  };\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"input { display: block; margin-bottom: 20px; }\\nbutton { margin-left: 10px; }\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"82\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"React æä¾›äº†æ£€æŸ¥å·¥å…·è§„åˆ™æ¥æ£€æŸ¥æ˜¯å¦æ­£ç¡®åœ°æŒ‡å®šäº† Effect çš„ä¾èµ–é¡¹ã€‚å¦‚æœå¿˜è®°åœ¨ä¸Šè¿°ç¤ºä¾‹çš„ä¾èµ–é¡¹åˆ—è¡¨ä¸­æŒ‡å®š \",[\"$r\",\"code\",null,{\"children\":\"roomId\"}],\"ï¼Œæ£€æŸ¥å·¥å…·ä¼šè‡ªåŠ¨æ‰¾åˆ°è¯¥é”™è¯¯ã€‚\"]}],\"\\n\",[\"$r\",\"LearnMore\",null,{\"path\":\"/learn/lifecycle-of-reactive-effects\",\"children\":[\"$r\",\"p\",null,{\"children\":[\"é˜…è¯» \",[\"$r\",\"strong\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/learn/lifecycle-of-reactive-effects\",\"children\":\"å“åº”å¼ Effect çš„ç”Ÿå‘½å‘¨æœŸ\"}]}],\" ä»¥äº†è§£ Effect çš„ç”Ÿå‘½å‘¨æœŸä¸ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸæœ‰ä½•ä¸åŒã€‚\"]}]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"separating-events-from-effects\",\"children\":\"ä» Effect ä¸­åˆ†ç¦»äº‹ä»¶ \"}],\"\\n\",[\"$r\",\"Wip\",null,{\"children\":[\"$r\",\"p\",null,{\"children\":[\"æœ¬èŠ‚æè¿°äº†ä¸€ä¸ªåœ¨ç¨³å®šç‰ˆæœ¬çš„ React ä¸­ \",[\"$r\",\"strong\",null,{\"children\":\"å°šæœªå‘å¸ƒ\"}],\" çš„å®éªŒæ€§ APIã€‚\"]}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"äº‹ä»¶å¤„ç†ç¨‹åºä»…åœ¨å†æ¬¡æ‰§è¡Œç›¸åŒçš„äº¤äº’æ—¶é‡æ–°è¿è¡Œã€‚ä¸äº‹ä»¶å¤„ç†ç¨‹åºä¸åŒï¼Œå¦‚æœ Effect è¯»å–çš„ä»»ä½•å€¼ï¼ˆå¦‚ props æˆ– stateï¼‰ä¸ä¸Šæ¬¡æ¸²æŸ“æœŸé—´ä¸åŒï¼Œåˆ™ä¼šé‡æ–°åŒæ­¥ã€‚æœ‰æ—¶ï¼Œéœ€è¦æ··åˆä¸¤ç§è¡Œä¸ºï¼šEffect é‡æ–°è¿è¡Œä»¥å“åº”æŸäº›å€¼è€Œä¸æ˜¯å…¶ä»–å€¼ã€‚\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"Effect ä¸­çš„æ‰€æœ‰ä»£ç éƒ½æ˜¯ \",[\"$r\",\"strong\",null,{\"children\":\"å“åº”å¼çš„\"}],\"ã€‚å¦‚æœå®ƒè¯»å–çš„æŸäº›å“åº”å¼çš„å€¼ç”±äºé‡æ–°æ¸²æŸ“è€Œå‘ç”Ÿå˜åŒ–ï¼Œå®ƒå°†å†æ¬¡è¿è¡Œã€‚ä¾‹å¦‚ï¼Œå¦‚æœ \",[\"$r\",\"code\",null,{\"children\":\"roomId\"}],\" æˆ– \",[\"$r\",\"code\",null,{\"children\":\"theme\"}],\" å‘ç”Ÿå˜åŒ–ï¼Œè¿™ä¸ª Effect å°†é‡æ–°è¿æ¥åˆ°èŠå¤©ï¼š\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\n  \\\"dependencies\\\": {\\n    \\\"react\\\": \\\"latest\\\",\\n    \\\"react-dom\\\": \\\"latest\\\",\\n    \\\"react-scripts\\\": \\\"latest\\\",\\n    \\\"toastify-js\\\": \\\"1.12.0\\\"\\n  },\\n  \\\"scripts\\\": {\\n    \\\"start\\\": \\\"react-scripts start\\\",\\n    \\\"build\\\": \\\"react-scripts build\\\",\\n    \\\"test\\\": \\\"react-scripts test --env=jsdom\\\",\\n    \\\"eject\\\": \\\"react-scripts eject\\\"\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState, useEffect } from 'react';\\nimport { createConnection, sendMessage } from './chat.js';\\nimport { showNotification } from './notifications.js';\\n\\nconst serverUrl = 'https://localhost:1234';\\n\\nfunction ChatRoom({ roomId, theme }) {\\n  useEffect(() => {\\n    const connection = createConnection(serverUrl, roomId);\\n    connection.on('connected', () => {\\n      showNotification('å·²è¿æ¥ï¼', theme);\\n    });\\n    connection.connect();\\n    return () => connection.disconnect();\\n  }, [roomId, theme]);\\n\\n  return <h1>æ¬¢è¿æ¥åˆ° {roomId} æˆ¿é—´ï¼</h1>\\n}\\n\\nexport default function App() {\\n  const [roomId, setRoomId] = useState('æ‰€æœ‰');\\n  const [isDark, setIsDark] = useState(false);\\n  return (\\n    <>\\n      <label>\\n        é€‰æ‹©èŠå¤©å®¤ï¼š{' '}\\n        <select\\n          value={roomId}\\n          onChange={e => setRoomId(e.target.value)}\\n        >\\n          <option value=\\\"general\\\">æ‰€æœ‰</option>\\n          <option value=\\\"travel\\\">æ—…æ¸¸</option>\\n          <option value=\\\"music\\\">éŸ³ä¹</option>\\n        </select>\\n      </label>\\n      <label>\\n        <input\\n          type=\\\"checkbox\\\"\\n          checked={isDark}\\n          onChange={e => setIsDark(e.target.checked)}\\n        />\\n        ä½¿ç”¨æ·±è‰²ä¸»é¢˜\\n      </label>\\n      <hr />\\n      <ChatRoom\\n        roomId={roomId}\\n        theme={isDark ? 'dark' : 'light'} \\n      />\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/chat.js\",\"children\":\"export function createConnection(serverUrl, roomId) {\\n  // çœŸæ­£çš„å®ç°å®é™…ä¸Šä¼šè¿æ¥åˆ°æœåŠ¡å™¨\\n  let connectedCallback;\\n  let timeout;\\n  return {\\n    connect() {\\n      timeout = setTimeout(() => {\\n        if (connectedCallback) {\\n          connectedCallback();\\n        }\\n      }, 100);\\n    },\\n    on(event, callback) {\\n      if (connectedCallback) {\\n        throw Error('ä¸èƒ½æ·»åŠ å¤„ç†ç¨‹åºä¸¤æ¬¡ã€‚');\\n      }\\n      if (event !== 'connected') {\\n        throw Error('ä»…æ”¯æŒâ€œå·²è¿æ¥â€äº‹ä»¶ã€‚');\\n      }\\n      connectedCallback = callback;\\n    },\\n    disconnect() {\\n      clearTimeout(timeout);\\n    }\\n  };\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/notifications.js\",\"children\":\"import Toastify from 'toastify-js';\\nimport 'toastify-js/src/toastify.css';\\n\\nexport function showNotification(message, theme) {\\n  Toastify({\\n    text: message,\\n    duration: 2000,\\n    gravity: 'top',\\n    position: 'right',\\n    style: {\\n      background: theme === 'dark' ? 'black' : 'white',\\n      color: theme === 'dark' ? 'white' : 'black',\\n    },\\n  }).showToast();\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"label { display: block; margin-top: 10px; }\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"86\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è¿™å¹¶ä¸ç†æƒ³ã€‚å› ä¸ºä»…å½“ \",[\"$r\",\"code\",null,{\"children\":\"roomId\"}],\" å·²æ›´æ”¹æ—¶ï¼Œæ‰æƒ³é‡æ–°è¿æ¥åˆ°èŠå¤©ï¼Œæ‰€ä»¥åˆ‡æ¢ \",[\"$r\",\"code\",null,{\"children\":\"theme\"}],\" ä¸åº”è¯¥é‡æ–°è¿æ¥åˆ°èŠå¤©ï¼è€ƒè™‘å°†è¯»å– \",[\"$r\",\"code\",null,{\"children\":\"theme\"}],\" çš„ä»£ç ä» Effect ç§»åˆ° \",[\"$r\",\"strong\",null,{\"children\":\"Effect Event\"}],\" ä¸­ï¼š\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\n  \\\"dependencies\\\": {\\n    \\\"react\\\": \\\"experimental\\\",\\n    \\\"react-dom\\\": \\\"experimental\\\",\\n    \\\"react-scripts\\\": \\\"latest\\\",\\n    \\\"toastify-js\\\": \\\"1.12.0\\\"\\n  },\\n  \\\"scripts\\\": {\\n    \\\"start\\\": \\\"react-scripts start\\\",\\n    \\\"build\\\": \\\"react-scripts build\\\",\\n    \\\"test\\\": \\\"react-scripts test --env=jsdom\\\",\\n    \\\"eject\\\": \\\"react-scripts eject\\\"\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState, useEffect } from 'react';\\nimport { experimental_useEffectEvent as useEffectEvent } from 'react';\\nimport { createConnection, sendMessage } from './chat.js';\\nimport { showNotification } from './notifications.js';\\n\\nconst serverUrl = 'https://localhost:1234';\\n\\nfunction ChatRoom({ roomId, theme }) {\\n  const onConnected = useEffectEvent(() => {\\n    showNotification('å·²è¿æ¥ï¼', theme);\\n  });\\n\\n  useEffect(() => {\\n    const connection = createConnection(serverUrl, roomId);\\n    connection.on('connected', () => {\\n      onConnected();\\n    });\\n    connection.connect();\\n    return () => connection.disconnect();\\n  }, [roomId]);\\n\\n  return <h1>æ¬¢è¿æ¥åˆ° {roomId} æˆ¿é—´ï¼</h1>\\n}\\n\\nexport default function App() {\\n  const [roomId, setRoomId] = useState('æ‰€æœ‰');\\n  const [isDark, setIsDark] = useState(false);\\n  return (\\n    <>\\n      <label>\\n        é€‰æ‹©èŠå¤©å®¤ï¼š{' '}\\n        <select\\n          value={roomId}\\n          onChange={e => setRoomId(e.target.value)}\\n        >\\n          <option value=\\\"general\\\">æ‰€æœ‰</option>\\n          <option value=\\\"travel\\\">æ—…æ¸¸</option>\\n          <option value=\\\"music\\\">éŸ³ä¹</option>\\n        </select>\\n      </label>\\n      <label>\\n        <input\\n          type=\\\"checkbox\\\"\\n          checked={isDark}\\n          onChange={e => setIsDark(e.target.checked)}\\n        />\\n        ä½¿ç”¨æ·±è‰²ä¸»é¢˜\\n      </label>\\n      <hr />\\n      <ChatRoom\\n        roomId={roomId}\\n        theme={isDark ? 'dark' : 'light'} \\n      />\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/chat.js\",\"children\":\"export function createConnection(serverUrl, roomId) {\\n  // çœŸæ­£çš„å®ç°å®é™…ä¸Šä¼šè¿æ¥åˆ°æœåŠ¡å™¨\\n  let connectedCallback;\\n  let timeout;\\n  return {\\n    connect() {\\n      timeout = setTimeout(() => {\\n        if (connectedCallback) {\\n          connectedCallback();\\n        }\\n      }, 100);\\n    },\\n    on(event, callback) {\\n      if (connectedCallback) {\\n        throw Error('ä¸èƒ½æ·»åŠ å¤„ç†ç¨‹åºä¸¤æ¬¡ã€‚');\\n      }\\n      if (event !== 'connected') {\\n        throw Error('ä»…æ”¯æŒâ€œå·²è¿æ¥â€äº‹ä»¶ã€‚');\\n      }\\n      connectedCallback = callback;\\n    },\\n    disconnect() {\\n      clearTimeout(timeout);\\n    }\\n  };\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/notifications.js hidden\",\"children\":\"import Toastify from 'toastify-js';\\nimport 'toastify-js/src/toastify.css';\\n\\nexport function showNotification(message, theme) {\\n  Toastify({\\n    text: message,\\n    duration: 2000,\\n    gravity: 'top',\\n    position: 'right',\\n    style: {\\n      background: theme === 'dark' ? 'black' : 'white',\\n      color: theme === 'dark' ? 'white' : 'black',\\n    },\\n  }).showToast();\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"label { display: block; margin-top: 10px; }\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"98\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Effect Events ä¸­çš„ä»£ç ä¸æ˜¯å“åº”å¼çš„ï¼Œå› æ­¤æ›´æ”¹â€œä¸»é¢˜â€ä¸å†ä½¿ Effect é‡æ–°è¿æ¥ã€‚\"}],\"\\n\",[\"$r\",\"LearnMore\",null,{\"path\":\"/learn/separating-events-from-effects\",\"children\":[\"$r\",\"p\",null,{\"children\":[\"é˜…è¯» \",[\"$r\",\"strong\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/learn/separating-events-from-effects\",\"children\":\"ä» Effect ä¸­åˆ†ç¦»äº‹ä»¶\"}]}],\"ï¼Œäº†è§£å¦‚ä½•é˜²æ­¢æŸäº›å€¼é‡æ–°è§¦å‘ Effectã€‚\"]}]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"removing-effect-dependencies\",\"children\":\"ç§»é™¤ Effect ä¾èµ– \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"å½“ä½ å†™ Effect æ—¶ï¼Œä»£ç æ£€æŸ¥å™¨ä¼šéªŒè¯æ˜¯å¦å·²ç»å°† Effect è¯»å–çš„æ¯ä¸€ä¸ªå“åº”å¼å€¼ï¼ˆå¦‚ props å’Œ stateï¼‰åŒ…å«åœ¨ Effect çš„ä¾èµ–åˆ—è¡¨ä¸­ã€‚è¿™å¯ä»¥ç¡®ä¿ Effect ä¸ç»„ä»¶çš„ props å’Œ state ä¿æŒåŒæ­¥ã€‚ä¸å¿…è¦çš„ä¾èµ–å…³ç³»å¯èƒ½ä¼šå¯¼è‡´ Effect è¿è¡Œè¿‡äºé¢‘ç¹ï¼Œç”šè‡³äº§ç”Ÿæ— é™å¾ªç¯ã€‚åˆ é™¤å®ƒä»¬çš„æ–¹å¼å–å†³äºå…·ä½“æƒ…å†µã€‚\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä¾‹å¦‚ï¼Œè¿™ä¸ª Effect ä¾èµ–äºæ¯æ¬¡ç¼–è¾‘è¾“å…¥æ—¶éƒ½ä¼šé‡æ–°åˆ›å»ºçš„ \",[\"$r\",\"code\",null,{\"children\":\"options\"}],\" å¯¹è±¡ï¼š\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState, useEffect } from 'react';\\nimport { createConnection } from './chat.js';\\n\\nconst serverUrl = 'https://localhost:1234';\\n\\nfunction ChatRoom({ roomId }) {\\n  const [message, setMessage] = useState('');\\n\\n  const options = {\\n    serverUrl: serverUrl,\\n    roomId: roomId\\n  };\\n\\n  useEffect(() => {\\n    const connection = createConnection(options);\\n    connection.connect();\\n    return () => connection.disconnect();\\n  }, [options]);\\n\\n  return (\\n    <>\\n      <h1>æ¬¢è¿æ¥åˆ° {roomId} æˆ¿é—´ï¼</h1>\\n      <input value={message} onChange={e => setMessage(e.target.value)} />\\n    </>\\n  );\\n}\\n\\nexport default function App() {\\n  const [roomId, setRoomId] = useState('æ‰€æœ‰');\\n  return (\\n    <>\\n      <label>\\n        é€‰æ‹©èŠå¤©å®¤ï¼š{' '}\\n        <select\\n          value={roomId}\\n          onChange={e => setRoomId(e.target.value)}\\n        >\\n          <option value=\\\"general\\\">general</option>\\n          <option value=\\\"travel\\\">travel</option>\\n          <option value=\\\"music\\\">music</option>\\n        </select>\\n      </label>\\n      <hr />\\n      <ChatRoom roomId={roomId} />\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/chat.js\",\"children\":\"export function createConnection({ serverUrl, roomId }) {\\n  // çœŸæ­£çš„å®ç°å®é™…ä¸Šä¼šè¿æ¥åˆ°æœåŠ¡å™¨\\n  return {\\n    connect() {\\n      console.log('âœ… è¿æ¥åˆ° \\\"' + roomId + '\\\" æˆ¿é—´ï¼Œåœ¨' + serverUrl + '...');\\n    },\\n    disconnect() {\\n      console.log('âŒ æ–­å¼€ \\\"' + roomId + '\\\" æˆ¿é—´ï¼Œåœ¨' + serverUrl);\\n    }\\n  };\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"input { display: block; margin-bottom: 20px; }\\nbutton { margin-left: 10px; }\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"102\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä½ ä¸å¸Œæœ›æ¯æ¬¡å¼€å§‹åœ¨èŠå¤©ä¸­è¾“å…¥æ¶ˆæ¯æ—¶èŠå¤©éƒ½é‡æ–°è¿æ¥ã€‚è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ åº”è¯¥åœ¨ Effect ä¸­åˆ›å»º \",[\"$r\",\"code\",null,{\"children\":\"options\"}],\" å¯¹è±¡ï¼Œä½¿å¾— Effect ä»…ä¾èµ–äº \",[\"$r\",\"code\",null,{\"children\":\"roomId\"}],\" å­—ç¬¦ä¸²ï¼š\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState, useEffect } from 'react';\\nimport { createConnection } from './chat.js';\\n\\nconst serverUrl = 'https://localhost:1234';\\n\\nfunction ChatRoom({ roomId }) {\\n  const [message, setMessage] = useState('');\\n\\n  useEffect(() => {\\n    const options = {\\n      serverUrl: serverUrl,\\n      roomId: roomId\\n    };\\n    const connection = createConnection(options);\\n    connection.connect();\\n    return () => connection.disconnect();\\n  }, [roomId]);\\n\\n  return (\\n    <>\\n      <h1>æ¬¢è¿æ¥åˆ° {roomId} æˆ¿é—´ï¼</h1>\\n      <input value={message} onChange={e => setMessage(e.target.value)} />\\n    </>\\n  );\\n}\\n\\nexport default function App() {\\n  const [roomId, setRoomId] = useState('æ‰€æœ‰');\\n  return (\\n    <>\\n      <label>\\n        é€‰æ‹©èŠå¤©å®¤ï¼š{' '}\\n        <select\\n          value={roomId}\\n          onChange={e => setRoomId(e.target.value)}\\n        >\\n          <option value=\\\"general\\\">æ‰€æœ‰</option>\\n          <option value=\\\"travel\\\">æ—…æ¸¸</option>\\n          <option value=\\\"music\\\">éŸ³ä¹</option>\\n        </select>\\n      </label>\\n      <hr />\\n      <ChatRoom roomId={roomId} />\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/chat.js\",\"children\":\"export function createConnection({ serverUrl, roomId }) {\\n  // çœŸæ­£çš„å®ç°å®é™…ä¸Šä¼šè¿æ¥åˆ°æœåŠ¡å™¨\\n  return {\\n    connect() {\\n      console.log('âœ… è¿æ¥åˆ° \\\"' + roomId + '\\\" æˆ¿é—´ï¼Œåœ¨' + serverUrl + '...');\\n    },\\n    disconnect() {\\n      console.log('âŒ æ–­å¼€ \\\"' + roomId + '\\\" æˆ¿é—´ï¼Œåœ¨' + serverUrl);\\n    }\\n  };\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"input { display: block; margin-bottom: 20px; }\\nbutton { margin-left: 10px; }\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"114\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è¯·æ³¨æ„ï¼Œä½ å¹¶æ²¡æœ‰é€šè¿‡ç¼–è¾‘ä¾èµ–é¡¹åˆ—è¡¨æ¥åˆ é™¤ \",[\"$r\",\"code\",null,{\"children\":\"options\"}],\"  ä¾èµ–é¡¹ï¼Œé‚£æ˜¯é”™è¯¯çš„ã€‚ç›¸åï¼Œä½ æ›´æ”¹äº†å‘¨å›´çš„ä»£ç ï¼Œä½¿ä¾èµ–å…³ç³»å˜å¾— \",[\"$r\",\"strong\",null,{\"children\":\"ä¸å¿…è¦\"}],\"ã€‚å°†ä¾èµ–å…³ç³»åˆ—è¡¨è§†ä¸º Effect ä»£ç ä½¿ç”¨çš„æ‰€æœ‰å“åº”å€¼çš„åˆ—è¡¨ã€‚ä¸å¿…åˆ»æ„é€‰æ‹©æŠŠä»€ä¹ˆæ”¾åœ¨è¯¥åˆ—è¡¨ä¸­ã€‚è¯¥åˆ—è¡¨æè¿°äº†ä½ çš„ä»£ç ã€‚è¦æ”¹å˜ä¾èµ–æ€§åˆ—è¡¨ï¼Œè¯·æ”¹å˜ä»£ç ã€‚\"]}],\"\\n\",[\"$r\",\"LearnMore\",null,{\"path\":\"/learn/removing-effect-dependencies\",\"children\":[\"$r\",\"p\",null,{\"children\":[\"é˜…è¯» \",[\"$r\",\"strong\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/learn/removing-effect-dependencies\",\"children\":\"ç§»é™¤ Effect ä¾èµ–\"}]}],\" ä»¥äº†è§£å¦‚ä½•å‡å°‘ Effect é‡æ–°è¿è¡Œçš„é¢‘ç‡ã€‚\"]}]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"reusing-logic-with-custom-hooks\",\"children\":\"ä½¿ç”¨è‡ªå®šä¹‰ Hook å¤ç”¨é€»è¾‘ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"React æœ‰ä¸€äº›å†…ç½® Hookï¼Œä¾‹å¦‚ \",[\"$r\",\"code\",null,{\"children\":\"useState\"}],\"ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"useContext\"}],\" å’Œ \",[\"$r\",\"code\",null,{\"children\":\"useEffect\"}],\"ã€‚æœ‰æ—¶éœ€è¦ç”¨é€”æ›´ç‰¹æ®Šçš„ Hookï¼šä¾‹å¦‚è·å–æ•°æ®ï¼Œè®°å½•ç”¨æˆ·æ˜¯å¦åœ¨çº¿æˆ–è€…è¿æ¥èŠå¤©å®¤ã€‚ä¸ºäº†å®ç°æ•ˆæœï¼Œå¯ä»¥æ ¹æ®åº”ç”¨éœ€æ±‚åˆ›å»ºè‡ªå·±çš„ Hookã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œè‡ªå®šä¹‰ Hook \",[\"$r\",\"code\",null,{\"children\":\"usePointerPosition\"}],\" è¿½è¸ªå½“å‰æŒ‡é’ˆä½ç½®ï¼Œè€Œè‡ªå®šä¹‰ Hook \",[\"$r\",\"code\",null,{\"children\":\"useDelayedValue\"}],\" è¿”å›ä¸€ä¸ªâ€œæ»åâ€ä¼ é€’çš„å€¼ä¸€å®šæ¯«ç§’æ•°çš„å€¼ã€‚å°†å…‰æ ‡ç§»åˆ°æ²™ç›’é¢„è§ˆåŒºåŸŸä¸Šä»¥æŸ¥çœ‹è·Ÿéšå…‰æ ‡ç§»åŠ¨çš„ç‚¹è½¨è¿¹ï¼š\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { usePointerPosition } from './usePointerPosition.js';\\nimport { useDelayedValue } from './useDelayedValue.js';\\n\\nexport default function Canvas() {\\n  const pos1 = usePointerPosition();\\n  const pos2 = useDelayedValue(pos1, 100);\\n  const pos3 = useDelayedValue(pos2, 200);\\n  const pos4 = useDelayedValue(pos3, 100);\\n  const pos5 = useDelayedValue(pos4, 50);\\n  return (\\n    <>\\n      <Dot position={pos1} opacity={1} />\\n      <Dot position={pos2} opacity={0.8} />\\n      <Dot position={pos3} opacity={0.6} />\\n      <Dot position={pos4} opacity={0.4} />\\n      <Dot position={pos5} opacity={0.2} />\\n    </>\\n  );\\n}\\n\\nfunction Dot({ position, opacity }) {\\n  return (\\n    <div style={{\\n      position: 'absolute',\\n      backgroundColor: 'pink',\\n      borderRadius: '50%',\\n      opacity,\\n      transform: `translate(${position.x}px, ${position.y}px)`,\\n      pointerEvents: 'none',\\n      left: -20,\\n      top: -20,\\n      width: 40,\\n      height: 40,\\n    }} />\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/usePointerPosition.js\",\"children\":\"import { useState, useEffect } from 'react';\\n\\nexport function usePointerPosition() {\\n  const [position, setPosition] = useState({ x: 0, y: 0 });\\n  useEffect(() => {\\n    function handleMove(e) {\\n      setPosition({ x: e.clientX, y: e.clientY });\\n    }\\n    window.addEventListener('pointermove', handleMove);\\n    return () => window.removeEventListener('pointermove', handleMove);\\n  }, []);\\n  return position;\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/useDelayedValue.js\",\"children\":\"import { useState, useEffect } from 'react';\\n\\nexport function useDelayedValue(value, delay) {\\n  const [delayedValue, setDelayedValue] = useState(value);\\n\\n  useEffect(() => {\\n    setTimeout(() => {\\n      setDelayedValue(value);\\n    }, delay);\\n  }, [value, delay]);\\n\\n  return delayedValue;\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"body { min-height: 300px; }\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"last\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ä½ å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰ Hooksï¼Œå°†å®ƒä»¬ç»„åˆåœ¨ä¸€èµ·ï¼Œåœ¨å®ƒä»¬ä¹‹é—´ä¼ é€’æ•°æ®ï¼Œå¹¶åœ¨ç»„ä»¶ä¹‹é—´é‡ç”¨å®ƒä»¬ã€‚éšç€åº”ç”¨ä¸æ–­å˜å¤§ï¼Œä½ å°†å‡å°‘æ‰‹åŠ¨ç¼–å†™çš„ Effectï¼Œå› ä¸ºä½ å°†èƒ½å¤Ÿé‡ç”¨å·²ç»ç¼–å†™çš„è‡ªå®šä¹‰ Hooksã€‚React ç¤¾åŒºä¹Ÿç»´æŠ¤äº†è®¸å¤šä¼˜ç§€çš„è‡ªå®šä¹‰ Hooksã€‚\"}],\"\\n\",[\"$r\",\"LearnMore\",null,{\"path\":\"/learn/reusing-logic-with-custom-hooks\",\"children\":[\"$r\",\"p\",null,{\"children\":[\"é˜…è¯» \",[\"$r\",\"strong\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/learn/reusing-logic-with-custom-hooks\",\"children\":\"ä½¿ç”¨è‡ªå®šä¹‰ Hook å¤ç”¨é€»è¾‘\"}]}],\" ä»¥äº†è§£å¦‚ä½•åœ¨ç»„ä»¶ä¹‹é—´å…±äº«é€»è¾‘ã€‚\"]}]}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"whats-next\",\"children\":\"ä¸‹èŠ‚é¢„å‘Š \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è·³è½¬åˆ° \",[\"$r\",\"a\",null,{\"href\":\"/learn/referencing-values-with-refs\",\"children\":\"ä½¿ç”¨ ref å¼•ç”¨å€¼\"}],\" è¿™ä¸€èŠ‚å¹¶å¼€å§‹ä¸€é¡µé¡µçš„é˜…è¯»ï¼\"]}]]}]]","meta":{"title":"è„±å›´æœºåˆ¶"}},"__N_SSG":true}