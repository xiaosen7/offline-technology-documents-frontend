{"pageProps":{"toc":"[{\"url\":\"#\",\"text\":\"æ¦‚è§ˆ\",\"depth\":2},{\"url\":\"#reference\",\"depth\":2,\"text\":\"å‚è€ƒ \"},{\"url\":\"#usestate\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"useState(initialState)\"}],\" \"]},{\"url\":\"#setstate\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•°ï¼Œä¾‹å¦‚ \",[\"$r\",\"code\",null,{\"children\":\"setSomething(nextState)\"}],\" \"]},{\"url\":\"#usage\",\"depth\":2,\"text\":\"ç”¨æ³• \"},{\"url\":\"#adding-state-to-a-component\",\"depth\":3,\"text\":\"ä¸ºç»„ä»¶æ·»åŠ çŠ¶æ€ \"},{\"url\":\"#updating-state-based-on-the-previous-state\",\"depth\":3,\"text\":\"æ ¹æ®å…ˆå‰çš„ state æ›´æ–° state \"},{\"url\":\"#updating-objects-and-arrays-in-state\",\"depth\":3,\"text\":\"æ›´æ–°çŠ¶æ€ä¸­çš„å¯¹è±¡å’Œæ•°ç»„ \"},{\"url\":\"#avoiding-recreating-the-initial-state\",\"depth\":3,\"text\":\"é¿å…é‡å¤åˆ›å»ºåˆå§‹çŠ¶æ€ \"},{\"url\":\"#resetting-state-with-a-key\",\"depth\":3,\"text\":\"ä½¿ç”¨ key é‡ç½®çŠ¶æ€ \"},{\"url\":\"#storing-information-from-previous-renders\",\"depth\":3,\"text\":\"å­˜å‚¨å‰ä¸€æ¬¡æ¸²æŸ“çš„ä¿¡æ¯ \"},{\"url\":\"#troubleshooting\",\"depth\":2,\"text\":\"ç–‘éš¾è§£ç­” \"},{\"url\":\"#ive-updated-the-state-but-logging-gives-me-the-old-value\",\"depth\":3,\"text\":\"æˆ‘å·²ç»æ›´æ–°äº†çŠ¶æ€ï¼Œä½†æ—¥å¿—ä»æ˜¾ç¤ºæ—§å€¼ \"},{\"url\":\"#ive-updated-the-state-but-the-screen-doesnt-update\",\"depth\":3,\"text\":\"æˆ‘å·²ç»æ›´æ–°äº†çŠ¶æ€ï¼Œä½†æ˜¯å±å¹•æ²¡æœ‰æ›´æ–° \"},{\"url\":\"#im-getting-an-error-too-many-re-renders\",\"depth\":3,\"text\":\"å‡ºç°é”™è¯¯ï¼šâ€œToo many re-rendersâ€ \"},{\"url\":\"#my-initializer-or-updater-function-runs-twice\",\"depth\":3,\"text\":\"åˆå§‹åŒ–å‡½æ•°æˆ–æ›´æ–°å‡½æ•°è¿è¡Œäº†ä¸¤æ¬¡ \"},{\"url\":\"#im-trying-to-set-state-to-a-function-but-it-gets-called-instead\",\"depth\":3,\"text\":\"æˆ‘å°è¯•å°† state è®¾ç½®ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œä½†å®ƒå´è¢«è°ƒç”¨äº† \"}]","content":"[[\"$r\",\"MaxWidth\",\"76\",{\"children\":[[\"$r\",\"Intro\",null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useState\"}],\" æ˜¯ä¸€ä¸ª React Hookï¼Œå®ƒå…è®¸ä½ å‘ç»„ä»¶æ·»åŠ ä¸€ä¸ª \",[\"$r\",\"a\",null,{\"href\":\"/learn/state-a-components-memory\",\"children\":\"çŠ¶æ€å˜é‡\"}],\"ã€‚\"]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"const [state, setState] = useState(initialState)\\n\"}]}]]}],\"\\n\",[\"$r\",\"InlineToc\",null,{}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"reference\",\"children\":\"å‚è€ƒ \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"usestate\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"useState(initialState)\"}],\" \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨ç»„ä»¶çš„é¡¶å±‚è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"useState\"}],\" æ¥å£°æ˜ä¸€ä¸ª \",[\"$r\",\"a\",null,{\"href\":\"/learn/state-a-components-memory\",\"children\":\"çŠ¶æ€å˜é‡\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState } from 'react';\\n\\nfunction MyComponent() {\\n  const [age, setAge] = useState(28);\\n  const [name, setName] = useState('Taylor');\\n  const [todos, setTodos] = useState(() => createTodos());\\n  // ...\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"æŒ‰ç…§æƒ¯ä¾‹ä½¿ç”¨ \",[\"$r\",\"a\",null,{\"href\":\"https://javascript.info/destructuring-assignment\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"æ•°ç»„è§£æ„\"}],\" æ¥å‘½åçŠ¶æ€å˜é‡ï¼Œä¾‹å¦‚ \",[\"$r\",\"code\",null,{\"children\":\"[something, setSomething]\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"#usage\",\"children\":\"å‚è§ä¸‹é¢æ›´å¤šç¤ºä¾‹\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"parameters\",\"children\":\"å‚æ•° \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"initialState\"}],\"ï¼šä½ å¸Œæœ› state åˆå§‹åŒ–çš„å€¼ã€‚å®ƒå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å€¼ï¼Œä½†å¯¹äºå‡½æ•°æœ‰ç‰¹æ®Šçš„è¡Œä¸ºã€‚åœ¨åˆå§‹æ¸²æŸ“åï¼Œæ­¤å‚æ•°å°†è¢«å¿½ç•¥ã€‚\",\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"å¦‚æœä¼ é€’å‡½æ•°ä½œä¸º \",[\"$r\",\"code\",null,{\"children\":\"initialState\"}],\"ï¼Œåˆ™å®ƒå°†è¢«è§†ä¸º \",[\"$r\",\"strong\",null,{\"children\":\"åˆå§‹åŒ–å‡½æ•°\"}],\"ã€‚å®ƒåº”è¯¥æ˜¯çº¯å‡½æ•°ï¼Œä¸åº”è¯¥æ¥å—ä»»ä½•å‚æ•°ï¼Œå¹¶ä¸”åº”è¯¥è¿”å›ä¸€ä¸ªä»»ä½•ç±»å‹çš„å€¼ã€‚å½“åˆå§‹åŒ–ç»„ä»¶æ—¶ï¼ŒReact å°†è°ƒç”¨ä½ çš„åˆå§‹åŒ–å‡½æ•°ï¼Œå¹¶å°†å…¶è¿”å›å€¼å­˜å‚¨ä¸ºåˆå§‹çŠ¶æ€ã€‚\",[\"$r\",\"a\",null,{\"href\":\"#avoiding-recreating-the-initial-state\",\"children\":\"è¯·å‚è§ä¸‹é¢çš„ç¤ºä¾‹\"}],\"ã€‚\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"returns\",\"children\":\"è¿”å› \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useState\"}],\" è¿”å›ä¸€ä¸ªç”±ä¸¤ä¸ªå€¼ç»„æˆçš„æ•°ç»„ï¼š\"]}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"å½“å‰çš„ stateã€‚åœ¨é¦–æ¬¡æ¸²æŸ“æ—¶ï¼Œå®ƒå°†ä¸ä½ ä¼ é€’çš„ \",[\"$r\",\"code\",null,{\"children\":\"initialState\"}],\" ç›¸åŒ¹é…ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"#setstate\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•°\"]}],\"ï¼Œå®ƒå¯ä»¥è®©ä½ å°† state æ›´æ–°ä¸ºä¸åŒçš„å€¼å¹¶è§¦å‘é‡æ–°æ¸²æŸ“ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"caveats\",\"children\":\"æ³¨æ„äº‹é¡¹ \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useState\"}],\" æ˜¯ä¸€ä¸ª Hookï¼Œå› æ­¤ä½ åªèƒ½åœ¨ \",[\"$r\",\"strong\",null,{\"children\":\"ç»„ä»¶çš„é¡¶å±‚\"}],\" æˆ–è‡ªå·±çš„ Hook ä¸­è°ƒç”¨å®ƒã€‚ä½ ä¸èƒ½åœ¨å¾ªç¯æˆ–æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨å®ƒã€‚å¦‚æœä½ éœ€è¦è¿™æ ·åšï¼Œè¯·æå–ä¸€ä¸ªæ–°ç»„ä»¶å¹¶å°†çŠ¶æ€ç§»å…¥å…¶ä¸­ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"åœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ï¼ŒReact å°† \",[\"$r\",\"strong\",null,{\"children\":\"ä¸¤æ¬¡è°ƒç”¨åˆå§‹åŒ–å‡½æ•°\"}],\"ï¼Œä»¥ \",[\"$r\",\"a\",null,{\"href\":\"#my-initializer-or-updater-function-runs-twice\",\"children\":\"å¸®ä½ æ‰¾åˆ°æ„å¤–çš„ä¸çº¯æ€§\"}],\"ã€‚è¿™åªæ˜¯å¼€å‘æ—¶çš„è¡Œä¸ºï¼Œä¸å½±å“ç”Ÿäº§ã€‚å¦‚æœä½ çš„åˆå§‹åŒ–å‡½æ•°æ˜¯çº¯å‡½æ•°ï¼ˆæœ¬è¯¥æ˜¯è¿™æ ·ï¼‰ï¼Œå°±ä¸åº”å½±å“è¯¥è¡Œä¸ºã€‚å…¶ä¸­ä¸€ä¸ªè°ƒç”¨çš„ç»“æœå°†è¢«å¿½ç•¥ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"setstate\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•°ï¼Œä¾‹å¦‚ \",[\"$r\",\"code\",null,{\"children\":\"setSomething(nextState)\"}],\" \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useState\"}],\" è¿”å›çš„ \",[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•°å…è®¸ä½ å°† state æ›´æ–°ä¸ºä¸åŒçš„å€¼å¹¶è§¦å‘é‡æ–°æ¸²æŸ“ã€‚ä½ å¯ä»¥ç›´æ¥ä¼ é€’æ–°çŠ¶æ€ï¼Œä¹Ÿå¯ä»¥ä¼ é€’ä¸€ä¸ªæ ¹æ®å…ˆå‰çŠ¶æ€æ¥è®¡ç®—æ–°çŠ¶æ€çš„å‡½æ•°ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"const [name, setName] = useState('Edward');\\n\\nfunction handleClick() {\\n  setName('Taylor');\\n  setAge(a => a + 1);\\n  // ...\\n\"}]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"setstate-parameters\",\"children\":\"å‚æ•° \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"nextState\"}],\"ï¼šä½ æƒ³è¦ state æ›´æ–°ä¸ºçš„å€¼ã€‚å®ƒå¯ä»¥æ˜¯ä»»ä½•ç±»å‹çš„å€¼ï¼Œä½†å¯¹äºå‡½æ•°æœ‰ç‰¹æ®Šçš„è¡Œä¸ºã€‚\",\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"å¦‚æœä½ å°†å‡½æ•°ä½œä¸º \",[\"$r\",\"code\",null,{\"children\":\"nextState\"}],\" ä¼ é€’ï¼Œå®ƒå°†è¢«è§†ä¸º \",[\"$r\",\"strong\",null,{\"children\":\"æ›´æ–°å‡½æ•°\"}],\"ã€‚å®ƒå¿…é¡»æ˜¯çº¯å‡½æ•°ï¼Œåªæ¥å—å¾…å®šçš„ state ä½œä¸ºå…¶å”¯ä¸€å‚æ•°ï¼Œå¹¶åº”è¿”å›ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚React å°†æŠŠä½ çš„æ›´æ–°å‡½æ•°æ”¾å…¥é˜Ÿåˆ—ä¸­å¹¶é‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚åœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“æœŸé—´ï¼ŒReact å°†é€šè¿‡æŠŠé˜Ÿåˆ—ä¸­æ‰€æœ‰æ›´æ–°å‡½æ•°åº”ç”¨äºå…ˆå‰çš„çŠ¶æ€æ¥è®¡ç®—ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚\",[\"$r\",\"a\",null,{\"href\":\"#updating-state-based-on-the-previous-state\",\"children\":\"è¯·å‚è§ä¸‹é¢çš„ç¤ºä¾‹\"}],\"ã€‚\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"setstate-returns\",\"children\":\"è¿”å›å€¼ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•°æ²¡æœ‰è¿”å›å€¼ã€‚\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"setstate-caveats\",\"children\":\"æ³¨æ„äº‹é¡¹ \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•° \",[\"$r\",\"strong\",null,{\"children\":[\"ä»…æ›´æ–° \",[\"$r\",\"em\",null,{\"children\":\"ä¸‹ä¸€æ¬¡\"}],\" æ¸²æŸ“çš„çŠ¶æ€å˜é‡\"]}],\"ã€‚å¦‚æœåœ¨è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•°åè¯»å–çŠ¶æ€å˜é‡ï¼Œåˆ™ \",[\"$r\",\"a\",null,{\"href\":\"#ive-updated-the-state-but-logging-gives-me-the-old-value\",\"children\":\"ä»ä¼šå¾—åˆ°åœ¨è°ƒç”¨ä¹‹å‰æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„æ—§å€¼\"}],\"ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœä½ æä¾›çš„æ–°å€¼ä¸å½“å‰ \",[\"$r\",\"code\",null,{\"children\":\"state\"}],\" ç›¸åŒï¼ˆç”± \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/is\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":[\"$r\",\"code\",null,{\"children\":\"Object.is\"}]}],\" æ¯”è¾ƒç¡®å®šï¼‰ï¼ŒReact å°† \",[\"$r\",\"strong\",null,{\"children\":\"è·³è¿‡é‡æ–°æ¸²æŸ“è¯¥ç»„ä»¶åŠå…¶å­ç»„ä»¶\"}],\"ã€‚è¿™æ˜¯ä¸€ç§ä¼˜åŒ–ã€‚è™½ç„¶åœ¨æŸäº›æƒ…å†µä¸‹ React ä»ç„¶éœ€è¦åœ¨è·³è¿‡å­ç»„ä»¶ä¹‹å‰è°ƒç”¨ä½ çš„ç»„ä»¶ï¼Œä½†è¿™ä¸åº”å½±å“ä½ çš„ä»£ç ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"React ä¼š \",[\"$r\",\"a\",null,{\"href\":\"/learn/queueing-a-series-of-state-updates\",\"children\":\"æ‰¹é‡å¤„ç†çŠ¶æ€æ›´æ–°\"}],\"ã€‚å®ƒä¼šåœ¨æ‰€æœ‰ \",[\"$r\",\"strong\",null,{\"children\":\"äº‹ä»¶å¤„ç†å‡½æ•°è¿è¡Œ\"}],\" å¹¶è°ƒç”¨å…¶ \",[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•°åæ›´æ–°å±å¹•ã€‚è¿™å¯ä»¥é˜²æ­¢åœ¨å•ä¸ªäº‹ä»¶æœŸé—´å¤šæ¬¡é‡æ–°æ¸²æŸ“ã€‚åœ¨æŸäº›ç½•è§æƒ…å†µä¸‹ï¼Œä½ éœ€è¦å¼ºåˆ¶ React æ›´æ—©åœ°æ›´æ–°å±å¹•ï¼Œä¾‹å¦‚è®¿é—® DOMï¼Œä½ å¯ä»¥ä½¿ç”¨ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react-dom/flushSync\",\"children\":[\"$r\",\"code\",null,{\"children\":\"flushSync\"}]}],\"ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨æ¸²æŸ“æœŸé—´ï¼Œåªå…è®¸åœ¨å½“å‰æ¸²æŸ“ç»„ä»¶å†…éƒ¨è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•°ã€‚React å°†ä¸¢å¼ƒå…¶è¾“å‡ºå¹¶ç«‹å³å°è¯•ä½¿ç”¨æ–°çŠ¶æ€é‡æ–°æ¸²æŸ“ã€‚è¿™ç§æ–¹å¼å¾ˆå°‘éœ€è¦ï¼Œä½†ä½ å¯ä»¥ä½¿ç”¨å®ƒæ¥å­˜å‚¨ \",[\"$r\",\"strong\",null,{\"children\":\"å…ˆå‰æ¸²æŸ“ä¸­çš„ä¿¡æ¯\"}],\"ã€‚\",[\"$r\",\"a\",null,{\"href\":\"#storing-information-from-previous-renders\",\"children\":\"è¯·å‚è§ä¸‹é¢çš„ç¤ºä¾‹\"}],\"ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨ä¸¥æ ¼æ¨¡å¼ä¸­ï¼ŒReact å°† \",[\"$r\",\"strong\",null,{\"children\":\"ä¸¤æ¬¡è°ƒç”¨ä½ çš„æ›´æ–°å‡½æ•°\"}],\"ï¼Œä»¥å¸®åŠ©ä½ æ‰¾åˆ° \",[\"$r\",\"a\",null,{\"href\":\"#my-initializer-or-updater-function-runs-twice\",\"children\":\"æ„å¤–çš„ä¸çº¯æ€§\"}],\"ã€‚è¿™åªæ˜¯å¼€å‘æ—¶çš„è¡Œä¸ºï¼Œä¸å½±å“ç”Ÿäº§ã€‚å¦‚æœä½ çš„æ›´æ–°å‡½æ•°æ˜¯çº¯å‡½æ•°ï¼ˆæœ¬è¯¥æ˜¯è¿™æ ·ï¼‰ï¼Œå°±ä¸åº”å½±å“è¯¥è¡Œä¸ºã€‚å…¶ä¸­ä¸€æ¬¡è°ƒç”¨çš„ç»“æœå°†è¢«å¿½ç•¥ã€‚\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"usage\",\"children\":\"ç”¨æ³• \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"adding-state-to-a-component\",\"children\":\"ä¸ºç»„ä»¶æ·»åŠ çŠ¶æ€ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨ç»„ä»¶çš„é¡¶å±‚è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"useState\"}],\" æ¥å£°æ˜ä¸€ä¸ªæˆ–å¤šä¸ª \",[\"$r\",\"a\",null,{\"href\":\"/learn/state-a-components-memory\",\"children\":\"çŠ¶æ€å˜é‡\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[1, 4, \\\"age\\\"], [2, 4, \\\"setAge\\\"], [3, 4, \\\"42\\\"], [1, 5, \\\"name\\\"], [2, 5, \\\"setName\\\"], [3, 5, \\\"'Taylor'\\\"]]\",\"children\":\"import { useState } from 'react';\\n\\nfunction MyComponent() {\\n  const [age, setAge] = useState(42);\\n  const [name, setName] = useState('Taylor');\\n  // ...\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"æŒ‰ç…§æƒ¯ä¾‹ä½¿ç”¨ \",[\"$r\",\"a\",null,{\"href\":\"https://javascript.info/destructuring-assignment\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"æ•°ç»„è§£æ„\"}],\" æ¥å‘½åçŠ¶æ€å˜é‡ï¼Œä¾‹å¦‚ \",[\"$r\",\"code\",null,{\"children\":\"[something, setSomething]\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useState\"}],\" è¿”å›ä¸€ä¸ªåªåŒ…å«ä¸¤ä¸ªé¡¹çš„æ•°ç»„ï¼š\"]}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"è¯¥çŠ¶æ€å˜é‡ \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":\"å½“å‰çš„ state\"}],\"ï¼Œæœ€åˆè®¾ç½®ä¸ºä½ æä¾›çš„ \",[\"$r\",\"CodeStep\",null,{\"step\":3,\"children\":\"åˆå§‹åŒ– state\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":[[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•°\"]}],\"ï¼Œå®ƒå…è®¸ä½ åœ¨å“åº”äº¤äº’æ—¶å°† state æ›´æ”¹ä¸ºä»»ä½•å…¶ä»–å€¼ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è¦æ›´æ–°å±å¹•ä¸Šçš„å†…å®¹ï¼Œè¯·ä½¿ç”¨æ–°çŠ¶æ€è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•°ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[2, 2, \\\"setName\\\"]]\",\"children\":\"function handleClick() {\\n  setName('Robin');\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"React ä¼šå­˜å‚¨æ–°çŠ¶æ€ï¼Œä½¿ç”¨æ–°å€¼é‡æ–°æ¸²æŸ“ç»„ä»¶ï¼Œå¹¶æ›´æ–° UIã€‚\"}],\"\\n\",[\"$r\",\"Pitfall\",null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[\"è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•° \",[\"$r\",\"a\",null,{\"href\":\"#ive-updated-the-state-but-logging-gives-me-the-old-value\",\"children\":[[\"$r\",\"strong\",null,{\"children\":\"ä¸ä¼š\"}],\" æ”¹å˜å·²ç»æ‰§è¡Œçš„ä»£ç ä¸­å½“å‰çš„ state\"]}],\"ï¼š\"]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{3}\",\"children\":\"function handleClick() {\\n  setName('Robin');\\n  console.log(name); // Still \\\"Taylor\\\"!\\n}\\n\"}]}],[\"$r\",\"p\",null,{\"children\":[\"å®ƒåªå½±å“ \",[\"$r\",\"strong\",null,{\"children\":\"ä¸‹ä¸€æ¬¡\"}],\" æ¸²æŸ“ä¸­ \",[\"$r\",\"code\",null,{\"children\":\"useState\"}],\" è¿”å›çš„å†…å®¹ã€‚\"]}]]}],\"\\n\"]}],[\"$r\",\"Recipes\",null,{\"titleText\":\"åŸºæœ¬çš„ useState ç¤ºä¾‹\",\"titleId\":\"examples-basic\",\"children\":[[\"$r\",\"h4\",null,{\"id\":\"counter-number\",\"children\":\"è®¡æ•°å™¨ï¼ˆæ•°å­—ï¼‰ \"}],[\"$r\",\"p\",null,{\"children\":[\"åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"count\"}],\" çŠ¶æ€å˜é‡ä¿å­˜ä¸€ä¸ªæ•°å­—ã€‚ç‚¹å‡»æŒ‰é’®ä¼šå°†å…¶åŠ ä¸€ã€‚\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState } from 'react';\\n\\nexport default function Counter() {\\n  const [count, setCount] = useState(0);\\n\\n  function handleClick() {\\n    setCount(count + 1);\\n  }\\n\\n  return (\\n    <button onClick={handleClick}>\\n      You pressed me {count} times\\n    </button>\\n  );\\n}\\n\"}]}]}],[\"$r\",\"Solution\",null,{}],[\"$r\",\"h4\",null,{\"id\":\"text-field-string\",\"children\":\"æ–‡æœ¬å­—æ®µï¼ˆå­—ç¬¦ä¸²ï¼‰ \"}],[\"$r\",\"p\",null,{\"children\":[\"åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"text\"}],\" çŠ¶æ€å˜é‡ä¿å­˜ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å½“ä½ è¾“å…¥æ—¶ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"handleChange\"}],\" ä»æµè§ˆå™¨ input DOM å…ƒç´ ä¸­è¯»å–æœ€æ–°çš„è¾“å…¥å€¼ï¼Œå¹¶è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"setText\"}],\" æ¥æ›´æ–°çŠ¶æ€ã€‚è¿™å…è®¸ä½ åœ¨ä¸‹é¢å±•ç¤ºå½“å‰çš„ \",[\"$r\",\"code\",null,{\"children\":\"text\"}],\"ã€‚\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState } from 'react';\\n\\nexport default function MyInput() {\\n  const [text, setText] = useState('hello');\\n\\n  function handleChange(e) {\\n    setText(e.target.value);\\n  }\\n\\n  return (\\n    <>\\n      <input value={text} onChange={handleChange} />\\n      <p>You typed: {text}</p>\\n      <button onClick={() => setText('hello')}>\\n        Reset\\n      </button>\\n    </>\\n  );\\n}\\n\"}]}]}],[\"$r\",\"Solution\",null,{}],[\"$r\",\"h4\",null,{\"id\":\"checkbox-boolean\",\"children\":\"å¤é€‰æ¡†ï¼ˆå¸ƒå°”å€¼ï¼‰ \"}],[\"$r\",\"p\",null,{\"children\":[\"åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"liked\"}],\" çŠ¶æ€å˜é‡ä¿å­˜ä¸€ä¸ªå¸ƒå°”å€¼ã€‚å½“ä½ ç‚¹å‡» input æ—¶ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"setLiked\"}],\" ä¼šæ ¹æ®æµè§ˆå™¨å¤é€‰æ¡†æ˜¯å¦é€‰ä¸­æ¥æ›´æ–° \",[\"$r\",\"code\",null,{\"children\":\"liked\"}],\" çŠ¶æ€å˜é‡ã€‚\",[\"$r\",\"code\",null,{\"children\":\"liked\"}],\" å˜é‡ç”¨äºæ¸²æŸ“å¤é€‰æ¡†ä¸‹é¢çš„æ–‡æœ¬ã€‚\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState } from 'react';\\n\\nexport default function MyCheckbox() {\\n  const [liked, setLiked] = useState(true);\\n\\n  function handleChange(e) {\\n    setLiked(e.target.checked);\\n  }\\n\\n  return (\\n    <>\\n      <label>\\n        <input\\n          type=\\\"checkbox\\\"\\n          checked={liked}\\n          onChange={handleChange}\\n        />\\n        I liked this\\n      </label>\\n      <p>You {liked ? 'liked' : 'did not like'} this.</p>\\n    </>\\n  );\\n}\\n\"}]}]}],[\"$r\",\"Solution\",null,{}],[\"$r\",\"h4\",null,{\"id\":\"form-two-variables\",\"children\":\"è¡¨å•ï¼ˆä¸¤ä¸ªå˜é‡ï¼‰ \"}],[\"$r\",\"p\",null,{\"children\":\"ä½ å¯ä»¥åœ¨åŒä¸€ä¸ªç»„ä»¶ä¸­å£°æ˜å¤šä¸ªçŠ¶æ€å˜é‡ã€‚æ¯ä¸ªçŠ¶æ€å˜é‡éƒ½æ˜¯å®Œå…¨ç‹¬ç«‹çš„ã€‚\"}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState } from 'react';\\n\\nexport default function Form() {\\n  const [name, setName] = useState('Taylor');\\n  const [age, setAge] = useState(42);\\n\\n  return (\\n    <>\\n      <input\\n        value={name}\\n        onChange={e => setName(e.target.value)}\\n      />\\n      <button onClick={() => setAge(age + 1)}>\\n        Increment age\\n      </button>\\n      <p>Hello, {name}. You are {age}.</p>\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"button { display: block; margin-top: 10px; }\\n\"}]}]]}],[\"$r\",\"Solution\",null,{}]]}],[\"$r\",\"MaxWidth\",\"106\",{\"children\":[\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"updating-state-based-on-the-previous-state\",\"children\":\"æ ¹æ®å…ˆå‰çš„ state æ›´æ–° state \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å‡è®¾ \",[\"$r\",\"code\",null,{\"children\":\"age\"}],\" ä¸º \",[\"$r\",\"code\",null,{\"children\":\"42\"}],\"ï¼Œè¿™ä¸ªå¤„ç†å‡½æ•°ä¸‰æ¬¡è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"setAge(age + 1)\"}],\"ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"function handleClick() {\\n  setAge(age + 1); // setAge(42 + 1)\\n  setAge(age + 1); // setAge(42 + 1)\\n  setAge(age + 1); // setAge(42 + 1)\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ç„¶è€Œï¼Œç‚¹å‡»ä¸€æ¬¡åï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"age\"}],\" å°†åªä¼šå˜ä¸º \",[\"$r\",\"code\",null,{\"children\":\"43\"}],\" è€Œä¸æ˜¯ \",[\"$r\",\"code\",null,{\"children\":\"45\"}],\"ï¼è¿™æ˜¯å› ä¸ºè°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•° \",[\"$r\",\"a\",null,{\"href\":\"/learn/state-as-a-snapshot\",\"children\":\"ä¸ä¼šæ›´æ–°\"}],\" å·²ç»è¿è¡Œä»£ç ä¸­çš„ \",[\"$r\",\"code\",null,{\"children\":\"age\"}],\" çŠ¶æ€å˜é‡ã€‚å› æ­¤ï¼Œæ¯ä¸ª \",[\"$r\",\"code\",null,{\"children\":\"setAge(age + 1)\"}],\" è°ƒç”¨å˜æˆäº† \",[\"$r\",\"code\",null,{\"children\":\"setAge(43)\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ\",[\"$r\",\"strong\",null,{\"children\":[\"ä½ å¯ä»¥å‘ \",[\"$r\",\"code\",null,{\"children\":\"setAge\"}],\" ä¼ é€’ä¸€ä¸ª \",[\"$r\",\"em\",null,{\"children\":\"æ›´æ–°å‡½æ•°\"}]]}],\"ï¼Œè€Œä¸æ˜¯ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[1, 2, \\\"a\\\", 0], [2, 2, \\\"a + 1\\\"], [1, 3, \\\"a\\\", 0], [2, 3, \\\"a + 1\\\"], [1, 4, \\\"a\\\", 0], [2, 4, \\\"a + 1\\\"]]\",\"children\":\"function handleClick() {\\n  setAge(a => a + 1); // setAge(42 => 43)\\n  setAge(a => a + 1); // setAge(43 => 44)\\n  setAge(a => a + 1); // setAge(44 => 45)\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è¿™é‡Œï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"a => a + 1\"}],\" æ˜¯æ›´æ–°å‡½æ•°ã€‚å®ƒè·å– \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":\"å¾…å®šçŠ¶æ€\"}],\" å¹¶ä»ä¸­è®¡ç®— \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":\"ä¸‹ä¸€ä¸ªçŠ¶æ€\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"React å°†æ›´æ–°å‡½æ•°æ”¾å…¥ \",[\"$r\",\"a\",null,{\"href\":\"/learn/queueing-a-series-of-state-updates\",\"children\":\"é˜Ÿåˆ—\"}],\" ä¸­ã€‚ç„¶åï¼Œåœ¨ä¸‹ä¸€æ¬¡æ¸²æŸ“æœŸé—´ï¼Œå®ƒå°†æŒ‰ç…§ç›¸åŒçš„é¡ºåºè°ƒç”¨å®ƒä»¬ï¼š\"]}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"a => a + 1\"}],\" å°†æ¥æ”¶ \",[\"$r\",\"code\",null,{\"children\":\"42\"}],\" ä½œä¸ºå¾…å®šçŠ¶æ€ï¼Œå¹¶è¿”å› \",[\"$r\",\"code\",null,{\"children\":\"43\"}],\" ä½œä¸ºä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"a => a + 1\"}],\" å°†æ¥æ”¶ \",[\"$r\",\"code\",null,{\"children\":\"43\"}],\" ä½œä¸ºå¾…å®šçŠ¶æ€ï¼Œå¹¶è¿”å› \",[\"$r\",\"code\",null,{\"children\":\"44\"}],\" ä½œä¸ºä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"a => a + 1\"}],\" å°†æ¥æ”¶ \",[\"$r\",\"code\",null,{\"children\":\"44\"}],\" ä½œä¸ºå¾…å®šçŠ¶æ€ï¼Œå¹¶è¿”å› \",[\"$r\",\"code\",null,{\"children\":\"45\"}],\" ä½œä¸ºä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ç°åœ¨æ²¡æœ‰å…¶ä»–æ’é˜Ÿçš„æ›´æ–°ï¼Œå› æ­¤ React æœ€ç»ˆå°†å­˜å‚¨ \",[\"$r\",\"code\",null,{\"children\":\"45\"}],\" ä½œä¸ºå½“å‰çŠ¶æ€ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"æŒ‰ç…§æƒ¯ä¾‹ï¼Œé€šå¸¸å°†å¾…å®šçŠ¶æ€å‚æ•°å‘½åä¸ºçŠ¶æ€å˜é‡åç§°çš„ç¬¬ä¸€ä¸ªå­—æ¯ï¼Œå¦‚ \",[\"$r\",\"code\",null,{\"children\":\"age\"}],\" ä¸º \",[\"$r\",\"code\",null,{\"children\":\"a\"}],\"ã€‚ç„¶è€Œï¼Œä½ ä¹Ÿå¯ä»¥æŠŠå®ƒå‘½åä¸º \",[\"$r\",\"code\",null,{\"children\":\"prevAge\"}],\" æˆ–è€…å…¶ä»–ä½ è§‰å¾—æ›´æ¸…æ¥šçš„åç§°ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"React åœ¨å¼€å‘ç¯å¢ƒä¸­å¯èƒ½ä¼š \",[\"$r\",\"a\",null,{\"href\":\"#my-initializer-or-updater-function-runs-twice\",\"children\":\"ä¸¤æ¬¡è°ƒç”¨ä½ çš„æ›´æ–°å‡½æ•°\"}],\" æ¥éªŒè¯å…¶æ˜¯å¦ä¸º \",[\"$r\",\"a\",null,{\"href\":\"/learn/keeping-components-pure\",\"children\":\"çº¯å‡½æ•°\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"DeepDive\",null,{\"children\":[[\"$r\",\"h4\",null,{\"id\":\"is-using-an-updater-always-preferred\",\"children\":\"æ˜¯å¦æ€»æ˜¯ä¼˜å…ˆä½¿ç”¨æ›´æ–°å‡½æ•°ï¼Ÿ \"}],[\"$r\",\"p\",null,{\"children\":[\"ä½ å¯èƒ½ä¼šå¬åˆ°è¿™æ ·çš„å»ºè®®ï¼Œå¦‚æœè¦è®¾ç½®çš„çŠ¶æ€æ˜¯æ ¹æ®å…ˆå‰çš„çŠ¶æ€è®¡ç®—å¾—å‡ºçš„ï¼Œåˆ™åº”å§‹ç»ˆç¼–å†™ç±»ä¼¼äº \",[\"$r\",\"code\",null,{\"children\":\"setAge(a => a + 1)\"}],\" çš„ä»£ç ã€‚è¿™æ ·åšæ²¡æœ‰å®³å¤„ï¼Œä½†ä¹Ÿä¸æ€»æ˜¯å¿…è¦çš„ã€‚\"]}],[\"$r\",\"p\",null,{\"children\":[\"åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™ä¸¤ç§æ–¹æ³•æ²¡æœ‰åŒºåˆ«ã€‚React å§‹ç»ˆç¡®ä¿å¯¹äºæœ‰æ„çš„ç”¨æˆ·æ“ä½œï¼Œå¦‚å•å‡»ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"age\"}],\" çŠ¶æ€å˜é‡å°†åœ¨ä¸‹ä¸€æ¬¡å•å‡»ä¹‹å‰è¢«æ›´æ–°ã€‚è¿™æ„å‘³ç€å•å‡»äº‹ä»¶å¤„ç†å‡½æ•°åœ¨äº‹ä»¶å¤„ç†å¼€å§‹æ²¡æœ‰å¾—åˆ°â€œè¿‡æ—¶â€ \",[\"$r\",\"code\",null,{\"children\":\"age\"}],\" çš„é£é™©ã€‚\"]}],[\"$r\",\"p\",null,{\"children\":\"ä½†æ˜¯ï¼Œå¦‚æœåœ¨åŒä¸€äº‹ä»¶ä¸­è¿›è¡Œå¤šä¸ªæ›´æ–°ï¼Œåˆ™æ›´æ–°å‡½æ•°å¯èƒ½ä¼šæœ‰å¸®åŠ©ã€‚å¦‚æœè®¿é—®çŠ¶æ€å˜é‡æœ¬èº«ä¸æ–¹ä¾¿ï¼ˆåœ¨ä¼˜åŒ–é‡æ–°æ¸²æŸ“æ—¶å¯èƒ½ä¼šé‡åˆ°è¿™ç§æƒ…å†µï¼‰ï¼Œå®ƒä»¬ä¹Ÿå¾ˆæœ‰ç”¨ã€‚\"}],[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœæ¯”èµ·è½»å¾®çš„å†—ä½™ä½ æ›´å–œæ¬¢è¯­æ³•çš„ä¸€è‡´æ€§ï¼Œä½ æ­£è®¾ç½®çš„çŠ¶æ€åˆæ˜¯æ ¹æ®å…ˆå‰çš„çŠ¶æ€è®¡ç®—å‡ºæ¥çš„ï¼Œé‚£ä¹ˆæ€»æ˜¯ç¼–å†™ä¸€ä¸ªæ›´æ–°å‡½æ•°æ˜¯åˆç†çš„ã€‚å¦‚æœå®ƒæ˜¯ä»æŸä¸ªå…¶ä»–çŠ¶æ€å˜é‡çš„å…ˆå‰çŠ¶æ€è®¡ç®—å‡ºçš„ï¼Œåˆ™ä½ å¯èƒ½å¸Œæœ›å°†å®ƒä»¬ç»“åˆæˆä¸€ä¸ªå¯¹è±¡ç„¶å \",[\"$r\",\"a\",null,{\"href\":\"/learn/extracting-state-logic-into-a-reducer\",\"children\":\"ä½¿ç”¨ reducer\"}],\"ã€‚\"]}]]}],\"\\n\"]}],[\"$r\",\"Recipes\",null,{\"titleText\":\"ä¼ é€’æ›´æ–°å‡½æ•°å’Œç›´æ¥ä¼ é€’ä¸‹ä¸€ä¸ªçŠ¶æ€ä¹‹é—´çš„åŒºåˆ«\",\"titleId\":\"examples-updater\",\"children\":[[\"$r\",\"h4\",null,{\"id\":\"passing-the-updater-function\",\"children\":\"ä¼ é€’æ›´æ–°å‡½æ•° \"}],[\"$r\",\"p\",null,{\"children\":\"è¿™ä¸ªä¾‹å­ä¼ é€’äº†æ›´æ–°å‡½æ•°ï¼Œå› æ­¤â€œ+3â€æŒ‰é’®å¯ä»¥æ­£å¸¸å·¥ä½œã€‚\"}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState } from 'react';\\n\\nexport default function Counter() {\\n  const [age, setAge] = useState(42);\\n\\n  function increment() {\\n    setAge(a => a + 1);\\n  }\\n\\n  return (\\n    <>\\n      <h1>Your age: {age}</h1>\\n      <button onClick={() => {\\n        increment();\\n        increment();\\n        increment();\\n      }}>+3</button>\\n      <button onClick={() => {\\n        increment();\\n      }}>+1</button>\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"button { display: block; margin: 10px; font-size: 20px; }\\nh1 { display: block; margin: 10px; }\\n\"}]}]]}],[\"$r\",\"Solution\",null,{}],[\"$r\",\"h4\",null,{\"id\":\"passing-the-next-state-directly\",\"children\":\"ç›´æ¥ä¼ é€’ä¸‹ä¸€ä¸ªçŠ¶æ€ \"}],[\"$r\",\"p\",null,{\"children\":[\"è¿™ä¸ªç¤ºä¾‹ \",[\"$r\",\"strong\",null,{\"children\":\"æ²¡æœ‰\"}],\" ä¼ é€’æ›´æ–°å‡½æ•°ï¼Œæ‰€ä»¥â€œ+3â€æŒ‰é’® \",[\"$r\",\"strong\",null,{\"children\":\"ä¸èƒ½æŒ‰é¢„æœŸçš„æ–¹å¼å·¥ä½œ\"}],\"ã€‚\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState } from 'react';\\n\\nexport default function Counter() {\\n  const [age, setAge] = useState(42);\\n\\n  function increment() {\\n    setAge(age + 1);\\n  }\\n\\n  return (\\n    <>\\n      <h1>Your age: {age}</h1>\\n      <button onClick={() => {\\n        increment();\\n        increment();\\n        increment();\\n      }}>+3</button>\\n      <button onClick={() => {\\n        increment();\\n      }}>+1</button>\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"button { display: block; margin: 10px; font-size: 20px; }\\nh1 { display: block; margin: 10px; }\\n\"}]}]]}],[\"$r\",\"Solution\",null,{}]]}],[\"$r\",\"MaxWidth\",\"122\",{\"children\":[\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"updating-objects-and-arrays-in-state\",\"children\":\"æ›´æ–°çŠ¶æ€ä¸­çš„å¯¹è±¡å’Œæ•°ç»„ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä½ å¯ä»¥å°†å¯¹è±¡å’Œæ•°ç»„æ”¾å…¥çŠ¶æ€ä¸­ã€‚åœ¨ React ä¸­ï¼ŒçŠ¶æ€è¢«è®¤ä¸ºæ˜¯åªè¯»çš„ï¼Œå› æ­¤ \",[\"$r\",\"strong\",null,{\"children\":\"ä½ åº”è¯¥æ›¿æ¢å®ƒè€Œä¸æ˜¯æ”¹å˜ç°æœ‰å¯¹è±¡\"}],\"ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ åœ¨çŠ¶æ€ä¸­ä¿å­˜äº†ä¸€ä¸ª \",[\"$r\",\"code\",null,{\"children\":\"form\"}],\" å¯¹è±¡ï¼Œè¯·ä¸è¦æ”¹å˜å®ƒï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"// ğŸš© ä¸è¦åƒä¸‹é¢è¿™æ ·æ”¹å˜ä¸€ä¸ªå¯¹è±¡ï¼š\\nform.firstName = 'Taylor';\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ç›¸åï¼Œå¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡æ¥æ›¿æ¢æ•´ä¸ªå¯¹è±¡ï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"// âœ… ä½¿ç”¨æ–°å¯¹è±¡æ›¿æ¢ state\\nsetForm({\\n  ...form,\\n  firstName: 'Taylor'\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"é˜…è¯»æœ‰å…³ \",[\"$r\",\"a\",null,{\"href\":\"/learn/updating-objects-in-state\",\"children\":\"æ›´æ–°çŠ¶æ€ä¸­çš„å¯¹è±¡\"}],\" å’Œ \",[\"$r\",\"a\",null,{\"href\":\"/learn/updating-arrays-in-state\",\"children\":\"æ›´æ–°çŠ¶æ€ä¸­çš„æ•°ç»„\"}],\" æ¥äº†è§£æ›´å¤šã€‚\"]}],\"\\n\"]}],[\"$r\",\"Recipes\",null,{\"titleText\":\"çŠ¶æ€ä¸­çš„å¯¹è±¡å’Œæ•°ç»„çš„ç¤ºä¾‹\",\"titleId\":\"examples-objects\",\"children\":[[\"$r\",\"h4\",null,{\"id\":\"form-object\",\"children\":\"è¡¨å•ï¼ˆå¯¹è±¡ï¼‰\"}],[\"$r\",\"p\",null,{\"children\":[\"åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"form\"}],\" çŠ¶æ€å˜é‡ä¿å­˜ä¸€ä¸ªå¯¹è±¡ã€‚æ¯ä¸ªè¾“å…¥æ¡†éƒ½æœ‰ä¸€ä¸ªå˜æ›´å¤„ç†å‡½æ•°ï¼Œç”¨æ•´ä¸ªè¡¨å•çš„ä¸‹ä¸€ä¸ªçŠ¶æ€è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"setForm\"}],\"ã€‚\",[\"$r\",\"code\",null,{\"children\":\"{ ...form }\"}],\" å±•å¼€è¯­æ³•ç¡®ä¿æ›¿æ¢çŠ¶æ€å¯¹è±¡è€Œä¸æ˜¯æ”¹å˜å®ƒã€‚\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState } from 'react';\\n\\nexport default function Form() {\\n  const [form, setForm] = useState({\\n    firstName: 'Barbara',\\n    lastName: 'Hepworth',\\n    email: 'bhepworth@sculpture.com',\\n  });\\n\\n  return (\\n    <>\\n      <label>\\n        First name:\\n        <input\\n          value={form.firstName}\\n          onChange={e => {\\n            setForm({\\n              ...form,\\n              firstName: e.target.value\\n            });\\n          }}\\n        />\\n      </label>\\n      <label>\\n        Last name:\\n        <input\\n          value={form.lastName}\\n          onChange={e => {\\n            setForm({\\n              ...form,\\n              lastName: e.target.value\\n            });\\n          }}\\n        />\\n      </label>\\n      <label>\\n        Email:\\n        <input\\n          value={form.email}\\n          onChange={e => {\\n            setForm({\\n              ...form,\\n              email: e.target.value\\n            });\\n          }}\\n        />\\n      </label>\\n      <p>\\n        {form.firstName}{' '}\\n        {form.lastName}{' '}\\n        ({form.email})\\n      </p>\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"label { display: block; }\\ninput { margin-left: 5px; }\\n\"}]}]]}],[\"$r\",\"Solution\",null,{}],[\"$r\",\"h4\",null,{\"id\":\"form-nested-object\",\"children\":\"è¡¨å•ï¼ˆåµŒå¥—å¯¹è±¡ï¼‰\"}],[\"$r\",\"p\",null,{\"children\":[\"åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼ŒçŠ¶æ€æ›´ä¸ºåµŒå¥—ã€‚å½“ä½ æ›´æ–°åµŒå¥—çŠ¶æ€æ—¶ï¼Œä½ éœ€è¦å¤åˆ¶ä¸€ä»½æ­£åœ¨æ›´æ–°çš„å¯¹è±¡ï¼Œä»¥åŠå‘ä¸Šâ€œåŒ…å«â€å®ƒçš„æ‰€æœ‰å¯¹è±¡ã€‚é˜…è¯» \",[\"$r\",\"a\",null,{\"href\":\"/learn/updating-objects-in-state#updating-a-nested-object\",\"children\":\"æ›´æ–°åµŒå¥—å¯¹è±¡\"}],\" ä»¥äº†è§£æ›´å¤šã€‚\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState } from 'react';\\n\\nexport default function Form() {\\n  const [person, setPerson] = useState({\\n    name: 'Niki de Saint Phalle',\\n    artwork: {\\n      title: 'Blue Nana',\\n      city: 'Hamburg',\\n      image: 'https://i.imgur.com/Sd1AgUOm.jpg',\\n    }\\n  });\\n\\n  function handleNameChange(e) {\\n    setPerson({\\n      ...person,\\n      name: e.target.value\\n    });\\n  }\\n\\n  function handleTitleChange(e) {\\n    setPerson({\\n      ...person,\\n      artwork: {\\n        ...person.artwork,\\n        title: e.target.value\\n      }\\n    });\\n  }\\n\\n  function handleCityChange(e) {\\n    setPerson({\\n      ...person,\\n      artwork: {\\n        ...person.artwork,\\n        city: e.target.value\\n      }\\n    });\\n  }\\n\\n  function handleImageChange(e) {\\n    setPerson({\\n      ...person,\\n      artwork: {\\n        ...person.artwork,\\n        image: e.target.value\\n      }\\n    });\\n  }\\n\\n  return (\\n    <>\\n      <label>\\n        Name:\\n        <input\\n          value={person.name}\\n          onChange={handleNameChange}\\n        />\\n      </label>\\n      <label>\\n        Title:\\n        <input\\n          value={person.artwork.title}\\n          onChange={handleTitleChange}\\n        />\\n      </label>\\n      <label>\\n        City:\\n        <input\\n          value={person.artwork.city}\\n          onChange={handleCityChange}\\n        />\\n      </label>\\n      <label>\\n        Image:\\n        <input\\n          value={person.artwork.image}\\n          onChange={handleImageChange}\\n        />\\n      </label>\\n      <p>\\n        <i>{person.artwork.title}</i>\\n        {' by '}\\n        {person.name}\\n        <br />\\n        (located in {person.artwork.city})\\n      </p>\\n      <img \\n        src={person.artwork.image} \\n        alt={person.artwork.title}\\n      />\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"label { display: block; }\\ninput { margin-left: 5px; margin-bottom: 5px; }\\nimg { width: 200px; height: 200px; }\\n\"}]}]]}],[\"$r\",\"Solution\",null,{}],[\"$r\",\"h4\",null,{\"id\":\"list-array\",\"children\":\"åˆ—è¡¨ï¼ˆæ•°ç»„ï¼‰ \"}],[\"$r\",\"p\",null,{\"children\":[\"åœ¨æœ¬ä¾‹ä¸­ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"todos\"}],\" çŠ¶æ€å˜é‡ä¿å­˜ä¸€ä¸ªæ•°ç»„ã€‚æ¯ä¸ªæŒ‰é’®çš„å¤„ç†å‡½æ•°ä½¿ç”¨è¯¥æ•°ç»„çš„ä¸‹ä¸€ä¸ªç‰ˆæœ¬è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"setTodos\"}],\"ã€‚\",[\"$r\",\"code\",null,{\"children\":\"[...todos]\"}],\" å±•å¼€è¯­æ³•ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"todos.map()\"}],\" å’Œ \",[\"$r\",\"code\",null,{\"children\":\"todos.filter()\"}],\" ç¡®ä¿çŠ¶æ€æ•°ç»„è¢«æ›¿æ¢è€Œä¸æ˜¯æ”¹å˜ã€‚\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { useState } from 'react';\\nimport AddTodo from './AddTodo.js';\\nimport TaskList from './TaskList.js';\\n\\nlet nextId = 3;\\nconst initialTodos = [\\n  { id: 0, title: 'Buy milk', done: true },\\n  { id: 1, title: 'Eat tacos', done: false },\\n  { id: 2, title: 'Brew tea', done: false },\\n];\\n\\nexport default function TaskApp() {\\n  const [todos, setTodos] = useState(initialTodos);\\n\\n  function handleAddTodo(title) {\\n    setTodos([\\n      ...todos,\\n      {\\n        id: nextId++,\\n        title: title,\\n        done: false\\n      }\\n    ]);\\n  }\\n\\n  function handleChangeTodo(nextTodo) {\\n    setTodos(todos.map(t => {\\n      if (t.id === nextTodo.id) {\\n        return nextTodo;\\n      } else {\\n        return t;\\n      }\\n    }));\\n  }\\n\\n  function handleDeleteTodo(todoId) {\\n    setTodos(\\n      todos.filter(t => t.id !== todoId)\\n    );\\n  }\\n\\n  return (\\n    <>\\n      <AddTodo\\n        onAddTodo={handleAddTodo}\\n      />\\n      <TaskList\\n        todos={todos}\\n        onChangeTodo={handleChangeTodo}\\n        onDeleteTodo={handleDeleteTodo}\\n      />\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/AddTodo.js\",\"children\":\"import { useState } from 'react';\\n\\nexport default function AddTodo({ onAddTodo }) {\\n  const [title, setTitle] = useState('');\\n  return (\\n    <>\\n      <input\\n        placeholder=\\\"Add todo\\\"\\n        value={title}\\n        onChange={e => setTitle(e.target.value)}\\n      />\\n      <button onClick={() => {\\n        setTitle('');\\n        onAddTodo(title);\\n      }}>Add</button>\\n    </>\\n  )\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/TaskList.js\",\"children\":\"import { useState } from 'react';\\n\\nexport default function TaskList({\\n  todos,\\n  onChangeTodo,\\n  onDeleteTodo\\n}) {\\n  return (\\n    <ul>\\n      {todos.map(todo => (\\n        <li key={todo.id}>\\n          <Task\\n            todo={todo}\\n            onChange={onChangeTodo}\\n            onDelete={onDeleteTodo}\\n          />\\n        </li>\\n      ))}\\n    </ul>\\n  );\\n}\\n\\nfunction Task({ todo, onChange, onDelete }) {\\n  const [isEditing, setIsEditing] = useState(false);\\n  let todoContent;\\n  if (isEditing) {\\n    todoContent = (\\n      <>\\n        <input\\n          value={todo.title}\\n          onChange={e => {\\n            onChange({\\n              ...todo,\\n              title: e.target.value\\n            });\\n          }} />\\n        <button onClick={() => setIsEditing(false)}>\\n          Save\\n        </button>\\n      </>\\n    );\\n  } else {\\n    todoContent = (\\n      <>\\n        {todo.title}\\n        <button onClick={() => setIsEditing(true)}>\\n          Edit\\n        </button>\\n      </>\\n    );\\n  }\\n  return (\\n    <label>\\n      <input\\n        type=\\\"checkbox\\\"\\n        checked={todo.done}\\n        onChange={e => {\\n          onChange({\\n            ...todo,\\n            done: e.target.checked\\n          });\\n        }}\\n      />\\n      {todoContent}\\n      <button onClick={() => onDelete(todo.id)}>\\n        Delete\\n      </button>\\n    </label>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"button { margin: 5px; }\\nli { list-style-type: none; }\\nul, li { margin: 0; padding: 0; }\\n\"}]}]]}],[\"$r\",\"Solution\",null,{}],[\"$r\",\"h4\",null,{\"id\":\"writing-concise-update-logic-with-immer\",\"children\":\"ç”¨ Immer ç¼–å†™ç®€æ´çš„æ›´æ–°é€»è¾‘ \"}],[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœä¸èƒ½ç›´æ¥æ”¹å˜æ•°ç»„å’Œå¯¹è±¡æ¥è¿›è¡Œæ›´æ–°æ„Ÿè§‰å¾ˆçƒ¦çï¼Œä½ å¯ä»¥ä½¿ç”¨åƒ \",[\"$r\",\"a\",null,{\"href\":\"https://github.com/immerjs/use-immer\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"Immer\"}],\" è¿™æ ·çš„åº“æ¥å‡å°‘é‡å¤çš„ä»£ç ã€‚Immer å¯ä»¥è®©ä½ ç¼–å†™ç®€æ´çš„ä»£ç ï¼Œå°±åƒä½ å¯ä»¥ç›´æ¥æ”¹å˜å¯¹è±¡ä¸€æ ·ï¼Œä½†åœ¨åº•å±‚å®ƒæ‰§è¡Œçš„æ˜¯ä¸æ”¹å˜çš„æ›´æ–°ï¼š\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState } from 'react';\\nimport { useImmer } from 'use-immer';\\n\\nlet nextId = 3;\\nconst initialList = [\\n  { id: 0, title: 'Big Bellies', seen: false },\\n  { id: 1, title: 'Lunar Landscape', seen: false },\\n  { id: 2, title: 'Terracotta Army', seen: true },\\n];\\n\\nexport default function BucketList() {\\n  const [list, updateList] = useImmer(initialList);\\n\\n  function handleToggle(artworkId, nextSeen) {\\n    updateList(draft => {\\n      const artwork = draft.find(a =>\\n        a.id === artworkId\\n      );\\n      artwork.seen = nextSeen;\\n    });\\n  }\\n\\n  return (\\n    <>\\n      <h1>Art Bucket List</h1>\\n      <h2>My list of art to see:</h2>\\n      <ItemList\\n        artworks={list}\\n        onToggle={handleToggle} />\\n    </>\\n  );\\n}\\n\\nfunction ItemList({ artworks, onToggle }) {\\n  return (\\n    <ul>\\n      {artworks.map(artwork => (\\n        <li key={artwork.id}>\\n          <label>\\n            <input\\n              type=\\\"checkbox\\\"\\n              checked={artwork.seen}\\n              onChange={e => {\\n                onToggle(\\n                  artwork.id,\\n                  e.target.checked\\n                );\\n              }}\\n            />\\n            {artwork.title}\\n          </label>\\n        </li>\\n      ))}\\n    </ul>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json\",\"children\":\"{\\n  \\\"dependencies\\\": {\\n    \\\"immer\\\": \\\"1.7.3\\\",\\n    \\\"react\\\": \\\"latest\\\",\\n    \\\"react-dom\\\": \\\"latest\\\",\\n    \\\"react-scripts\\\": \\\"latest\\\",\\n    \\\"use-immer\\\": \\\"0.5.1\\\"\\n  },\\n  \\\"scripts\\\": {\\n    \\\"start\\\": \\\"react-scripts start\\\",\\n    \\\"build\\\": \\\"react-scripts build\\\",\\n    \\\"test\\\": \\\"react-scripts test --env=jsdom\\\",\\n    \\\"eject\\\": \\\"react-scripts eject\\\"\\n  }\\n}\\n\"}]}]]}],[\"$r\",\"Solution\",null,{}]]}],[\"$r\",\"MaxWidth\",\"142\",{\"children\":[\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"avoiding-recreating-the-initial-state\",\"children\":\"é¿å…é‡å¤åˆ›å»ºåˆå§‹çŠ¶æ€ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"React åªåœ¨åˆæ¬¡æ¸²æŸ“æ—¶ä¿å­˜åˆå§‹çŠ¶æ€ï¼Œåç»­æ¸²æŸ“æ—¶å°†å…¶å¿½ç•¥ã€‚\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"function TodoList() {\\n  const [todos, setTodos] = useState(createInitialTodos());\\n  // ...\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å°½ç®¡ \",[\"$r\",\"code\",null,{\"children\":\"createInitialTodos()\"}],\" çš„ç»“æœä»…ç”¨äºåˆå§‹æ¸²æŸ“ï¼Œä½†ä½ ä»ç„¶åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶è°ƒç”¨æ­¤å‡½æ•°ã€‚å¦‚æœå®ƒåˆ›å»ºå¤§æ•°ç»„æˆ–æ‰§è¡Œæ˜‚è´µçš„è®¡ç®—ï¼Œè¿™å¯èƒ½ä¼šæµªè´¹èµ„æºã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ å¯ä»¥å°†å®ƒ \",[\"$r\",\"strong\",null,{\"children\":\"ä½œä¸ºåˆå§‹åŒ–å‡½æ•°ä¼ é€’ç»™\"}],\" \",[\"$r\",\"code\",null,{\"children\":\"useState\"}],\"ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"function TodoList() {\\n  const [todos, setTodos] = useState(createInitialTodos);\\n  // ...\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è¯·æ³¨æ„ï¼Œä½ ä¼ é€’çš„æ˜¯ \",[\"$r\",\"code\",null,{\"children\":\"createInitialTodos\"}],\" \",[\"$r\",\"strong\",null,{\"children\":\"å‡½æ•°æœ¬èº«\"}],\"ï¼Œè€Œä¸æ˜¯ \",[\"$r\",\"code\",null,{\"children\":\"createInitialTodos()\"}],\" è°ƒç”¨è¯¥å‡½æ•°çš„ç»“æœã€‚å¦‚æœå°†å‡½æ•°ä¼ é€’ç»™ \",[\"$r\",\"code\",null,{\"children\":\"useState\"}],\"ï¼ŒReact ä»…åœ¨åˆå§‹åŒ–æœŸé—´è°ƒç”¨å®ƒã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"React åœ¨å¼€å‘æ¨¡å¼ä¸‹å¯èƒ½ä¼šè°ƒç”¨ä½ çš„ \",[\"$r\",\"a\",null,{\"href\":\"#my-initializer-or-updater-function-runs-twice\",\"children\":\"åˆå§‹åŒ–å‡½æ•°\"}],\" ä¸¤æ¬¡ï¼Œä»¥éªŒè¯å®ƒä»¬æ˜¯å¦æ˜¯ \",[\"$r\",\"a\",null,{\"href\":\"/learn/keeping-components-pure\",\"children\":\"çº¯å‡½æ•°\"}],\"ã€‚\"]}],\"\\n\"]}],[\"$r\",\"Recipes\",null,{\"titleText\":\"ä¼ é€’åˆå§‹åŒ–å‡½æ•°å’Œç›´æ¥ä¼ é€’åˆå§‹çŠ¶æ€ä¹‹é—´çš„åŒºåˆ«\",\"titleId\":\"examples-initializer\",\"children\":[[\"$r\",\"h4\",null,{\"id\":\"passing-the-initializer-function\",\"children\":\"ä¼ é€’åˆå§‹åŒ–å‡½æ•° \"}],[\"$r\",\"p\",null,{\"children\":[\"è¿™ä¸ªä¾‹å­ä¼ é€’äº†åˆå§‹åŒ–å‡½æ•°ï¼Œå› æ­¤ \",[\"$r\",\"code\",null,{\"children\":\"createInitialTodos\"}],\" å‡½æ•°ä»…åœ¨åˆå§‹åŒ–æœŸé—´è¿è¡Œã€‚å½“ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œä¾‹å¦‚ä½ åœ¨è¾“å…¥æ¡†ä¸­é”®å…¥å†…å®¹æ—¶ï¼Œå®ƒä¸ä¼šå†æ¬¡è¿è¡Œã€‚\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState } from 'react';\\n\\nfunction createInitialTodos() {\\n  const initialTodos = [];\\n  for (let i = 0; i < 50; i++) {\\n    initialTodos.push({\\n      id: i,\\n      text: 'Item ' + (i + 1)\\n    });\\n  }\\n  return initialTodos;\\n}\\n\\nexport default function TodoList() {\\n  const [todos, setTodos] = useState(createInitialTodos);\\n  const [text, setText] = useState('');\\n\\n  return (\\n    <>\\n      <input\\n        value={text}\\n        onChange={e => setText(e.target.value)}\\n      />\\n      <button onClick={() => {\\n        setText('');\\n        setTodos([{\\n          id: todos.length,\\n          text: text\\n        }, ...todos]);\\n      }}>Add</button>\\n      <ul>\\n        {todos.map(item => (\\n          <li key={item.id}>\\n            {item.text}\\n          </li>\\n        ))}\\n      </ul>\\n    </>\\n  );\\n}\\n\"}]}]}],[\"$r\",\"Solution\",null,{}],[\"$r\",\"h4\",null,{\"id\":\"passing-the-initial-state-directly\",\"children\":\"ç›´æ¥ä¼ é€’åˆå§‹çŠ¶æ€ \"}],[\"$r\",\"p\",null,{\"children\":[\"è¿™ä¸ªä¾‹å­ \",[\"$r\",\"strong\",null,{\"children\":\"æ²¡æœ‰\"}],\" ä¼ é€’åˆå§‹åŒ–å‡½æ•°ï¼Œå› æ­¤ \",[\"$r\",\"code\",null,{\"children\":\"createInitialTodos\"}],\" å‡½æ•°ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“æ—¶è¿è¡Œï¼Œæ¯”å¦‚å½“ä½ åœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥æ—¶ã€‚è¿™ç§è¡Œä¸ºæ²¡æœ‰ä»€ä¹ˆæ˜æ˜¾çš„å·®å¼‚ï¼Œä½†è¿™ç§ä»£ç æ˜¯ä¸é‚£ä¹ˆé«˜æ•ˆçš„ã€‚\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useState } from 'react';\\n\\nfunction createInitialTodos() {\\n  const initialTodos = [];\\n  for (let i = 0; i < 50; i++) {\\n    initialTodos.push({\\n      id: i,\\n      text: 'Item ' + (i + 1)\\n    });\\n  }\\n  return initialTodos;\\n}\\n\\nexport default function TodoList() {\\n  const [todos, setTodos] = useState(createInitialTodos());\\n  const [text, setText] = useState('');\\n\\n  return (\\n    <>\\n      <input\\n        value={text}\\n        onChange={e => setText(e.target.value)}\\n      />\\n      <button onClick={() => {\\n        setText('');\\n        setTodos([{\\n          id: todos.length,\\n          text: text\\n        }, ...todos]);\\n      }}>Add</button>\\n      <ul>\\n        {todos.map(item => (\\n          <li key={item.id}>\\n            {item.text}\\n          </li>\\n        ))}\\n      </ul>\\n    </>\\n  );\\n}\\n\"}]}]}],[\"$r\",\"Solution\",null,{}]]}],[\"$r\",\"MaxWidth\",\"154\",{\"children\":[\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"resetting-state-with-a-key\",\"children\":\"ä½¿ç”¨ key é‡ç½®çŠ¶æ€ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨ \",[\"$r\",\"a\",null,{\"href\":\"/learn/rendering-lists\",\"children\":\"æ¸²æŸ“åˆ—è¡¨\"}],\" æ—¶ï¼Œä½ ç»å¸¸ä¼šé‡åˆ° \",[\"$r\",\"code\",null,{\"children\":\"key\"}],\" å±æ€§ã€‚ç„¶è€Œï¼Œå®ƒè¿˜æœ‰å¦å¤–ä¸€ä¸ªç”¨é€”ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä½ å¯ä»¥ \",[\"$r\",\"strong\",null,{\"children\":[\"é€šè¿‡å‘ç»„ä»¶ä¼ é€’ä¸åŒçš„ \",[\"$r\",\"code\",null,{\"children\":\"key\"}],\" æ¥é‡ç½®ç»„ä»¶çš„çŠ¶æ€\"]}],\"ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œé‡ç½®æŒ‰é’®æ”¹å˜ \",[\"$r\",\"code\",null,{\"children\":\"version\"}],\" çŠ¶æ€å˜é‡ï¼Œæˆ‘ä»¬å°†å®ƒä½œä¸ºä¸€ä¸ª \",[\"$r\",\"code\",null,{\"children\":\"key\"}],\" ä¼ é€’ç»™ \",[\"$r\",\"code\",null,{\"children\":\"Form\"}],\" ç»„ä»¶ã€‚å½“ \",[\"$r\",\"code\",null,{\"children\":\"key\"}],\" æ”¹å˜æ—¶ï¼ŒReact ä¼šä»å¤´å¼€å§‹é‡æ–°åˆ›å»º \",[\"$r\",\"code\",null,{\"children\":\"Form\"}],\" ç»„ä»¶ï¼ˆä»¥åŠå®ƒçš„æ‰€æœ‰å­ç»„ä»¶ï¼‰ï¼Œæ‰€ä»¥å®ƒçš„çŠ¶æ€è¢«é‡ç½®äº†ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"é˜…è¯» \",[\"$r\",\"a\",null,{\"href\":\"/learn/preserving-and-resetting-state\",\"children\":\"ä¿ç•™å’Œé‡ç½®çŠ¶æ€\"}],\" ä»¥äº†è§£æ›´å¤šã€‚\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { useState } from 'react';\\n\\nexport default function App() {\\n  const [version, setVersion] = useState(0);\\n\\n  function handleReset() {\\n    setVersion(version + 1);\\n  }\\n\\n  return (\\n    <>\\n      <button onClick={handleReset}>Reset</button>\\n      <Form key={version} />\\n    </>\\n  );\\n}\\n\\nfunction Form() {\\n  const [name, setName] = useState('Taylor');\\n\\n  return (\\n    <>\\n      <input\\n        value={name}\\n        onChange={e => setName(e.target.value)}\\n      />\\n      <p>Hello, {name}.</p>\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"button { display: block; margin-bottom: 20px; }\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"174\",{\"children\":[\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"storing-information-from-previous-renders\",\"children\":\"å­˜å‚¨å‰ä¸€æ¬¡æ¸²æŸ“çš„ä¿¡æ¯ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"é€šå¸¸æƒ…å†µä¸‹ï¼Œä½ ä¼šåœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­æ›´æ–°çŠ¶æ€ã€‚ç„¶è€Œï¼Œåœ¨æå°‘æ•°æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½å¸Œæœ›åœ¨å“åº”æ¸²æŸ“æ—¶è°ƒæ•´çŠ¶æ€â€”â€”ä¾‹å¦‚ï¼Œå½“ props æ”¹å˜æ—¶ï¼Œä½ å¯èƒ½å¸Œæœ›æ”¹å˜çŠ¶æ€å˜é‡ã€‚\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½ ä¸éœ€è¦è¿™æ ·åšï¼š\"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":[\"å¦‚æœä½ éœ€è¦çš„å€¼å¯ä»¥å®Œå…¨ä»å½“å‰ props æˆ–å…¶ä»– state ä¸­è®¡ç®—å‡ºæ¥ï¼Œé‚£ä¹ˆ \",[\"$r\",\"a\",null,{\"href\":\"/learn/choosing-the-state-structure#avoid-redundant-state\",\"children\":\"å®Œå…¨å¯ä»¥ç§»é™¤é‚£äº›å¤šä½™çš„çŠ¶æ€\"}]]}],\"ã€‚å¦‚æœä½ æ‹…å¿ƒé‡æ–°è®¡ç®—çš„é¢‘ç‡è¿‡é«˜ï¼Œå¯ä»¥ä½¿ç”¨ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useMemo\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"useMemo\"}],\" Hook\"]}],\" æ¥å¸®åŠ©ä¼˜åŒ–ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"å¦‚æœä½ æƒ³é‡ç½®æ•´ä¸ªç»„ä»¶æ ‘çš„çŠ¶æ€ï¼Œ\",[\"$r\",\"a\",null,{\"href\":\"#resetting-state-with-a-key\",\"children\":[\"å¯ä»¥å‘ç»„ä»¶ä¼ é€’ä¸€ä¸ªä¸åŒçš„ \",[\"$r\",\"code\",null,{\"children\":\"key\"}]]}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":\"å¦‚æœå¯ä»¥çš„è¯ï¼Œåœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­æ›´æ–°æ‰€æœ‰ç›¸å…³çŠ¶æ€ã€‚\"}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨æä¸ºç½•è§çš„æƒ…å†µä¸‹ï¼Œå¦‚æœä¸Šè¿°æ–¹æ³•éƒ½ä¸é€‚ç”¨ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨ä¸€ç§æ–¹å¼ï¼Œåœ¨ç»„ä»¶æ¸²æŸ“æ—¶è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•°æ¥åŸºäºå·²ç»æ¸²æŸ“çš„å€¼æ›´æ–°çŠ¶æ€ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è¿™é‡Œæ˜¯ä¸€ä¸ªä¾‹å­ã€‚è¿™ä¸ª \",[\"$r\",\"code\",null,{\"children\":\"CountLabel\"}],\" ç»„ä»¶æ˜¾ç¤ºä¼ é€’ç»™å®ƒçš„ \",[\"$r\",\"code\",null,{\"children\":\"count\"}],\" propsï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/CountLabel.js\",\"children\":\"export default function CountLabel({ count }) {\\n  return <h1>{count}</h1>\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å‡è®¾ä½ æƒ³æ˜¾ç¤ºè®¡æ•°å™¨æ˜¯å¦è‡ªä¸Šæ¬¡æ›´æ”¹ä»¥æ¥ \",[\"$r\",\"strong\",null,{\"children\":\"å¢åŠ æˆ–å‡å°‘\"}],\"ã€‚\",[\"$r\",\"code\",null,{\"children\":\"count\"}],\" props æ— æ³•å‘Šè¯‰ä½ è¿™ä¸€ç‚¹â€”â€”ä½ éœ€è¦è·Ÿè¸ªå®ƒçš„å…ˆå‰å€¼ã€‚æ·»åŠ  \",[\"$r\",\"code\",null,{\"children\":\"prevCount\"}],\" çŠ¶æ€å˜é‡æ¥è·Ÿè¸ªå®ƒï¼Œå†æ·»åŠ å¦ä¸€ä¸ªçŠ¶æ€å˜é‡ \",[\"$r\",\"code\",null,{\"children\":\"trend\"}],\" æ¥ä¿å­˜è®¡æ•°æ˜¯å¦å¢åŠ æˆ–å‡å°‘ã€‚æ¯”è¾ƒ \",[\"$r\",\"code\",null,{\"children\":\"prevCount\"}],\" å’Œ \",[\"$r\",\"code\",null,{\"children\":\"count\"}],\"ï¼Œå¦‚æœå®ƒä»¬ä¸ç›¸ç­‰ï¼Œåˆ™æ›´æ–° \",[\"$r\",\"code\",null,{\"children\":\"prevCount\"}],\" å’Œ \",[\"$r\",\"code\",null,{\"children\":\"trend\"}],\"ã€‚ç°åœ¨ä½ æ—¢å¯ä»¥æ˜¾ç¤ºå½“å‰çš„ \",[\"$r\",\"code\",null,{\"children\":\"count\"}],\" propsï¼Œä¹Ÿå¯ä»¥æ˜¾ç¤º \",[\"$r\",\"strong\",null,{\"children\":\"è‡ªä¸Šæ¬¡æ¸²æŸ“ä»¥æ¥å®ƒå¦‚ä½•æ”¹å˜\"}],\"ã€‚\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { useState } from 'react';\\nimport CountLabel from './CountLabel.js';\\n\\nexport default function App() {\\n  const [count, setCount] = useState(0);\\n  return (\\n    <>\\n      <button onClick={() => setCount(count + 1)}>\\n        Increment\\n      </button>\\n      <button onClick={() => setCount(count - 1)}>\\n        Decrement\\n      </button>\\n      <CountLabel count={count} />\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/CountLabel.js active\",\"children\":\"import { useState } from 'react';\\n\\nexport default function CountLabel({ count }) {\\n  const [prevCount, setPrevCount] = useState(count);\\n  const [trend, setTrend] = useState(null);\\n  if (prevCount !== count) {\\n    setPrevCount(count);\\n    setTrend(count > prevCount ? 'increasing' : 'decreasing');\\n  }\\n  return (\\n    <>\\n      <h1>{count}</h1>\\n      {trend && <p>The count is {trend}</p>}\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"button { margin-bottom: 10px; }\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"last\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è¯·æ³¨æ„ï¼Œåœ¨æ¸²æŸ“æ—¶è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•°æ—¶ï¼Œå®ƒå¿…é¡»ä½äºæ¡ä»¶è¯­å¥ä¸­ï¼Œä¾‹å¦‚ \",[\"$r\",\"code\",null,{\"children\":\"prevCount !== count\"}],\"ï¼Œå¹¶ä¸”å¿…é¡»åœ¨è¯¥æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"setPrevCount(count)\"}],\"ã€‚å¦åˆ™ï¼Œä½ çš„ç»„ä»¶å°†åœ¨å¾ªç¯ä¸­é‡æ–°æ¸²æŸ“ï¼Œç›´åˆ°å´©æºƒã€‚æ­¤å¤–ï¼Œä½ åªèƒ½åƒè¿™æ ·æ›´æ–° \",[\"$r\",\"strong\",null,{\"children\":\"å½“å‰æ¸²æŸ“\"}],\" ç»„ä»¶çš„çŠ¶æ€ã€‚åœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­è°ƒç”¨ \",[\"$r\",\"strong\",null,{\"children\":\"å¦ä¸€ä¸ª\"}],\" ç»„ä»¶çš„ \",[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•°æ˜¯é”™è¯¯çš„ã€‚æœ€åï¼Œä½ çš„ \",[\"$r\",\"code\",null,{\"children\":\"set\"}],\" è°ƒç”¨ä»åº” \",[\"$r\",\"a\",null,{\"href\":\"#updating-objects-and-arrays-in-state\",\"children\":\"ä¸ç›´æ¥æ”¹å˜ state æ¥æ›´æ–°\"}],\" çŠ¶æ€â€”â€”è¿™å¹¶ä¸æ„å‘³ç€ä½ å¯ä»¥è¿åå…¶ä»– \",[\"$r\",\"a\",null,{\"href\":\"/learn/keeping-components-pure\",\"children\":\"çº¯å‡½æ•°\"}],\" çš„è§„åˆ™ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è¿™ç§æ–¹å¼å¯èƒ½å¾ˆéš¾ç†è§£ï¼Œé€šå¸¸æœ€å¥½é¿å…ä½¿ç”¨ã€‚ä½†æ˜¯ï¼Œå®ƒæ¯”åœ¨ effect ä¸­æ›´æ–°çŠ¶æ€è¦å¥½ã€‚å½“ä½ åœ¨æ¸²æŸ“æœŸé—´è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•°æ—¶ï¼ŒReact å°†åœ¨ä½ çš„ç»„ä»¶ä½¿ç”¨ \",[\"$r\",\"code\",null,{\"children\":\"return\"}],\" è¯­å¥é€€å‡ºåç«‹å³é‡æ–°æ¸²æŸ“è¯¥ç»„ä»¶ï¼Œå¹¶åœ¨æ¸²æŸ“å­ç»„ä»¶å‰è¿›è¡Œã€‚è¿™æ ·ï¼Œå­ç»„ä»¶å°±ä¸éœ€è¦è¿›è¡Œä¸¤æ¬¡æ¸²æŸ“ã€‚ä½ çš„ç»„ä»¶å‡½æ•°çš„å…¶ä½™éƒ¨åˆ†ä»ä¼šæ‰§è¡Œï¼ˆç„¶åç»“æœå°†è¢«ä¸¢å¼ƒï¼‰ã€‚å¦‚æœä½ çš„æ¡ä»¶åˆ¤æ–­åœ¨æ‰€æœ‰ Hook è°ƒç”¨çš„ä¸‹æ–¹ï¼Œå¯ä»¥æå‰æ·»åŠ ä¸€ä¸ª \",[\"$r\",\"code\",null,{\"children\":\"return;\"}],\" ä»¥ä¾¿æ›´æ—©åœ°é‡æ–°å¼€å§‹æ¸²æŸ“ã€‚\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"troubleshooting\",\"children\":\"ç–‘éš¾è§£ç­” \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"ive-updated-the-state-but-logging-gives-me-the-old-value\",\"children\":\"æˆ‘å·²ç»æ›´æ–°äº†çŠ¶æ€ï¼Œä½†æ—¥å¿—ä»æ˜¾ç¤ºæ—§å€¼ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•° \",[\"$r\",\"strong\",null,{\"children\":\"ä¸èƒ½æ”¹å˜è¿è¡Œä¸­ä»£ç çš„çŠ¶æ€\"}],\"ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{4,5,8}\",\"children\":\"function handleClick() {\\n  console.log(count);  // 0\\n\\n  setCount(count + 1); // è¯·æ±‚ä½¿ç”¨ 1 é‡æ–°æ¸²æŸ“\\n  console.log(count);  // ä»ç„¶æ˜¯ 0!\\n\\n  setTimeout(() => {\\n    console.log(count); // è¿˜æ˜¯ 0!\\n  }, 5000);\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è¿™æ˜¯å› ä¸º \",[\"$r\",\"a\",null,{\"href\":\"/learn/state-as-a-snapshot\",\"children\":\"çŠ¶æ€è¡¨ç°ä¸ºå°±åƒä¸€ä¸ªå¿«ç…§\"}],\"ã€‚æ›´æ–°çŠ¶æ€ä¼šä½¿ç”¨æ–°çš„çŠ¶æ€å€¼è¯·æ±‚å¦ä¸€ä¸ªæ¸²æŸ“ï¼Œä½†å¹¶ä¸å½±å“åœ¨ä½ å·²ç»è¿è¡Œçš„äº‹ä»¶å¤„ç†å‡½æ•°ä¸­çš„ \",[\"$r\",\"code\",null,{\"children\":\"count\"}],\" JavaScript å˜é‡ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœä½ éœ€è¦ä½¿ç”¨ä¸‹ä¸€ä¸ªçŠ¶æ€ï¼Œä½ å¯ä»¥åœ¨å°†å…¶ä¼ é€’ç»™ \",[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•°ä¹‹å‰å°†å…¶ä¿å­˜åœ¨ä¸€ä¸ªå˜é‡ä¸­ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"const nextCount = count + 1;\\nsetCount(nextCount);\\n\\nconsole.log(count);     // 0\\nconsole.log(nextCount); // 1\\n\"}]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"ive-updated-the-state-but-the-screen-doesnt-update\",\"children\":\"æˆ‘å·²ç»æ›´æ–°äº†çŠ¶æ€ï¼Œä½†æ˜¯å±å¹•æ²¡æœ‰æ›´æ–° \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"å¦‚æœä¸‹ä¸€ä¸ªçŠ¶æ€ç­‰äºå…ˆå‰çš„çŠ¶æ€ï¼ŒReact å°†å¿½ç•¥ä½ çš„æ›´æ–°\"}],\"ï¼Œè¿™æ˜¯ç”± \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/is\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":[\"$r\",\"code\",null,{\"children\":\"Object.is\"}]}],\" æ¯”è¾ƒç¡®å®šçš„ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ¨ä½ ç›´æ¥æ›´æ”¹çŠ¶æ€ä¸­çš„å¯¹è±¡æˆ–æ•°ç»„æ—¶ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"obj.x = 10;  // ğŸš© é”™è¯¯ï¼šç›´æ¥ä¿®æ”¹ç°æœ‰çš„å¯¹è±¡\\nsetObj(obj); // ğŸš© ä¸ä¼šå‘ç”Ÿä»»ä½•äº‹æƒ…\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä½ ä¿®æ”¹äº†ä¸€ä¸ªç°æœ‰çš„ \",[\"$r\",\"code\",null,{\"children\":\"obj\"}],\" å¯¹è±¡å¹¶å°†å…¶ä¼ é€’å› \",[\"$r\",\"code\",null,{\"children\":\"setObj\"}],\"ï¼Œå› æ­¤ React å¿½ç•¥äº†æ›´æ–°ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä½ éœ€è¦ç¡®ä¿å§‹ç»ˆ\",[\"$r\",\"a\",null,{\"href\":\"#updating-objects-and-arrays-in-state\",\"children\":[\"åœ¨çŠ¶æ€ä¸­ \",[\"$r\",\"strong\",null,{\"children\":\"æ›¿æ¢\"}],\" å¯¹è±¡å’Œæ•°ç»„ï¼Œè€Œä¸æ˜¯å¯¹å®ƒä»¬è¿›è¡Œ \",[\"$r\",\"strong\",null,{\"children\":\"æ›´æ”¹\"}]]}],\"ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"// âœ… æ­£ç¡®ï¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡\\nsetObj({\\n  ...obj,\\n  x: 10\\n});\\n\"}]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"im-getting-an-error-too-many-re-renders\",\"children\":\"å‡ºç°é”™è¯¯ï¼šâ€œToo many re-rendersâ€ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"æœ‰æ—¶å¯èƒ½ä¼šå‡ºç°é”™è¯¯ï¼šâ€œToo many re-rendersâ€ã€‚React ä¼šé™åˆ¶æ¸²æŸ“æ¬¡æ•°ï¼Œä»¥é˜²æ­¢è¿›å…¥æ— é™å¾ªç¯ã€‚é€šå¸¸ï¼Œè¿™æ„å‘³ç€ \",[\"$r\",\"strong\",null,{\"children\":\"åœ¨æ¸²æŸ“æœŸé—´\"}],\" æ— æ¡ä»¶åœ°è®¾ç½®çŠ¶æ€ï¼Œå› æ­¤ç»„ä»¶è¿›å…¥å¾ªç¯ï¼šæ¸²æŸ“ã€è®¾ç½®çŠ¶æ€ï¼ˆå¯¼è‡´é‡æ–°æ¸²æŸ“ï¼‰ã€æ¸²æŸ“ã€è®¾ç½®çŠ¶æ€ï¼ˆå¯¼è‡´é‡æ–°æ¸²æŸ“ï¼‰ç­‰ç­‰ã€‚é€šå¸¸ï¼Œè¿™æ˜¯ç”±é”™è¯¯åœ°æŒ‡å®šäº‹ä»¶å¤„ç†å‡½æ•°æ—¶å¼•èµ·çš„ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{1-2}\",\"children\":\"// ğŸš© é”™è¯¯ï¼šåœ¨æ¸²æŸ“è¿‡ç¨‹ä¸­è°ƒç”¨äº‹ä»¶å¤„ç†å‡½æ•°\\nreturn <button onClick={handleClick()}>Click me</button>\\n\\n// âœ… æ­£ç¡®ï¼šå°†äº‹ä»¶å¤„ç†å‡½æ•°ä¼ é€’ä¸‹å»\\nreturn <button onClick={handleClick}>Click me</button>\\n\\n// âœ… æ­£ç¡®ï¼šä¼ é€’ä¸€ä¸ªå†…è”å‡½æ•°\\nreturn <button onClick={(e) => handleClick(e)}>Click me</button>\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœæ‰¾ä¸åˆ°è¿™ä¸ªé”™è¯¯çš„åŸå› ï¼Œè¯·å•å‡»æ§åˆ¶å°ä¸­é”™è¯¯æ—è¾¹çš„ç®­å¤´ï¼ŒæŸ¥çœ‹ JavaScript å †æ ˆä»¥æ‰¾åˆ°å¯¼è‡´é”™è¯¯çš„å…·ä½“ \",[\"$r\",\"code\",null,{\"children\":\"set\"}],\" å‡½æ•°è°ƒç”¨ã€‚\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"my-initializer-or-updater-function-runs-twice\",\"children\":\"åˆå§‹åŒ–å‡½æ•°æˆ–æ›´æ–°å‡½æ•°è¿è¡Œäº†ä¸¤æ¬¡ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/StrictMode\",\"children\":\"ä¸¥æ ¼æ¨¡å¼\"}],\" ä¸‹ï¼ŒReact ä¼šè°ƒç”¨ä½ çš„æŸäº›å‡½æ•°ä¸¤æ¬¡è€Œä¸æ˜¯ä¸€æ¬¡ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{2,5-6,11-12}\",\"children\":\"function TodoList() {\\n  // è¯¥å‡½æ•°ç»„ä»¶ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“è¿è¡Œä¸¤æ¬¡ã€‚\\n\\n  const [todos, setTodos] = useState(() => {\\n    // è¯¥åˆå§‹åŒ–å‡½æ•°åœ¨åˆå§‹åŒ–æœŸé—´ä¼šè¿è¡Œä¸¤æ¬¡ã€‚\\n    return createTodos();\\n  });\\n\\n  function handleClick() {\\n    setTodos(prevTodos => {\\n      // è¯¥æ›´æ–°å‡½æ•°åœ¨æ¯æ¬¡ç‚¹å‡»ä¸­éƒ½ä¼šè¿è¡Œä¸¤æ¬¡\\n      return [...prevTodos, createTodo()];\\n    });\\n  }\\n  // ...\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"è¿™æ˜¯æ‰€æœŸæœ›çš„ï¼Œä¸”ä¸åº”è¯¥ç ´åä½ çš„ä»£ç ã€‚\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è¿™ç§ \",[\"$r\",\"strong\",null,{\"children\":\"ä»…åœ¨å¼€å‘ç¯å¢ƒä¸‹ç”Ÿæ•ˆ\"}],\" çš„è¡Œä¸ºæœ‰åŠ©äº \",[\"$r\",\"a\",null,{\"href\":\"/learn/keeping-components-pure\",\"children\":\"ä¿æŒç»„ä»¶çš„çº¯ç²¹æ€§\"}],\"ã€‚React ä½¿ç”¨å…¶ä¸­ä¸€ä¸ªè°ƒç”¨çš„ç»“æœï¼Œè€Œå¿½ç•¥å¦ä¸€ä¸ªè°ƒç”¨çš„ç»“æœã€‚åªè¦ä½ çš„ç»„ä»¶ã€åˆå§‹åŒ–å‡½æ•°å’Œæ›´æ–°å‡½æ•°æ˜¯çº¯ç²¹çš„ï¼Œå°±ä¸ä¼šå½±å“ä½ çš„é€»è¾‘ã€‚ä½†æ˜¯ï¼Œå¦‚æœå®ƒä»¬æ„å¤–åœ°ä¸çº¯ç²¹ï¼Œè¿™å°†å¸®åŠ©ä½ æ³¨æ„åˆ°é”™è¯¯ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ä¾‹å¦‚ï¼Œè¿™ä¸ªä¸çº¯çš„æ›´æ–°å‡½æ•°æ”¹å˜äº† state ä¸­çš„ä¸€ä¸ªæ•°ç»„ï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{2,3}\",\"children\":\"setTodos(prevTodos => {\\n  // ğŸš© é”™è¯¯ï¼šæ”¹å˜ state\\n  prevTodos.push(createTodo());\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å› ä¸º React è°ƒç”¨äº†ä¸¤æ¬¡æ›´æ–°å‡½æ•°ï¼Œæ‰€ä»¥ä½ å°†çœ‹åˆ° todo è¢«æ·»åŠ äº†ä¸¤æ¬¡ï¼Œæ‰€ä»¥ä½ å°†çŸ¥é“å‡ºç°äº†é”™è¯¯ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ \",[\"$r\",\"a\",null,{\"href\":\"#updating-objects-and-arrays-in-state\",\"children\":\"æ›¿æ¢æ•°ç»„è€Œä¸æ˜¯æ›´æ”¹æ•°ç»„\"}],\" æ¥ä¿®å¤è¿™ä¸ªé”™è¯¯ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{2,3}\",\"children\":\"setTodos(prevTodos => {\\n  // âœ… æ­£ç¡®ï¼šä½¿ç”¨æ–°çŠ¶æ€æ›¿æ¢\\n  return [...prevTodos, createTodo()];\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ç°åœ¨ï¼Œè¿™ä¸ªæ›´æ–°å‡½æ•°æ˜¯çº¯ç²¹çš„ï¼Œæ‰€ä»¥å¤šè°ƒç”¨ä¸€æ¬¡ä¸ä¼šå¯¹è¡Œä¸ºäº§ç”Ÿå½±å“ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ React è°ƒç”¨å®ƒä¸¤æ¬¡å¯ä»¥å¸®åŠ©ä½ æ‰¾åˆ°é”™è¯¯çš„åŸå› ã€‚\",[\"$r\",\"strong\",null,{\"children\":\"åªæœ‰ç»„ä»¶ã€åˆå§‹åŒ–å‡½æ•°å’Œæ›´æ–°å‡½æ•°éœ€è¦æ˜¯çº¯ç²¹çš„\"}],\"ã€‚äº‹ä»¶å¤„ç†å‡½æ•°ä¸éœ€è¦æ˜¯çº¯ç²¹çš„ï¼Œæ‰€ä»¥ React ä¸ä¼šä¸¤æ¬¡è°ƒç”¨ä½ çš„äº‹ä»¶å¤„ç†å‡½æ•°ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"é˜…è¯» \",[\"$r\",\"a\",null,{\"href\":\"/learn/keeping-components-pure\",\"children\":\"ä¿æŒç»„ä»¶çº¯ç²¹\"}],\" ä»¥äº†è§£æ›´å¤šä¿¡æ¯ã€‚\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"im-trying-to-set-state-to-a-function-but-it-gets-called-instead\",\"children\":\"æˆ‘å°è¯•å°† state è®¾ç½®ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œä½†å®ƒå´è¢«è°ƒç”¨äº† \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ä½ ä¸èƒ½åƒè¿™æ ·æŠŠå‡½æ•°æ”¾å…¥çŠ¶æ€ï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"const [fn, setFn] = useState(someFunction);\\n\\nfunction handleClick() {\\n  setFn(someOtherFunction);\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å› ä¸ºä½ ä¼ é€’äº†ä¸€ä¸ªå‡½æ•°ï¼ŒReact è®¤ä¸º \",[\"$r\",\"code\",null,{\"children\":\"someFunction\"}],\" æ˜¯ä¸€ä¸ª \",[\"$r\",\"a\",null,{\"href\":\"#avoiding-recreating-the-initial-state\",\"children\":\"åˆå§‹åŒ–å‡½æ•°\"}],\"ï¼Œè€Œ \",[\"$r\",\"code\",null,{\"children\":\"someOtherFunction\"}],\" æ˜¯ä¸€ä¸ª \",[\"$r\",\"a\",null,{\"href\":\"#updating-state-based-on-the-previous-state\",\"children\":\"æ›´æ–°å‡½æ•°\"}],\"ï¼Œäºæ˜¯å®ƒå°è¯•è°ƒç”¨å®ƒä»¬å¹¶å­˜å‚¨ç»“æœã€‚è¦å®é™… \",[\"$r\",\"strong\",null,{\"children\":\"å­˜å‚¨\"}],\" ä¸€ä¸ªå‡½æ•°ï¼Œä½ å¿…é¡»åœ¨ä¸¤ç§æƒ…å†µä¸‹åœ¨å®ƒä»¬ä¹‹å‰åŠ ä¸Š \",[\"$r\",\"code\",null,{\"children\":\"() =>\"}],\"ã€‚ç„¶å React å°†å­˜å‚¨ä½ ä¼ é€’çš„å‡½æ•°ã€‚\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{1,4}\",\"children\":\"const [fn, setFn] = useState(() => someFunction);\\n\\nfunction handleClick() {\\n  setFn(() => someOtherFunction);\\n}\\n\"}]}]]}]]","meta":{"title":"useState"}},"__N_SSG":true}