{"pageProps":{"toc":"[{\"url\":\"#\",\"text\":\"概览\",\"depth\":2},{\"url\":\"#reference\",\"depth\":2,\"text\":\"参考 \"},{\"url\":\"#starttransitionscope\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"startTransition(scope)\"}],\" \"]},{\"url\":\"#usage\",\"depth\":2,\"text\":\"使用方法 \"},{\"url\":\"#marking-a-state-update-as-a-non-blocking-transition\",\"depth\":3,\"text\":\"将 state 更新标记为非阻塞 transition \"}]","content":"[[\"$r\",\"MaxWidth\",\"last\",{\"children\":[[\"$r\",\"Intro\",null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" 可以让你在不阻塞 UI 的情况下更新 state。\"]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"startTransition(scope)\\n\"}]}]]}],\"\\n\",[\"$r\",\"InlineToc\",null,{}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"reference\",\"children\":\"参考 \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"starttransitionscope\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"startTransition(scope)\"}],\" \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" 函数可以将 state 更新标记为 transition。\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{7,9}\",\"children\":\"import { startTransition } from 'react';\\n\\nfunction TabContainer() {\\n  const [tab, setTab] = useState('about');\\n\\n  function selectTab(nextTab) {\\n    startTransition(() => {\\n      setTab(nextTab);\\n    });\\n  }\\n  // ...\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"#usage\",\"children\":\"请看下面的更多例子\"}],\"。\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"parameters\",\"children\":\"参数 \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"scope\"}],\"：调用一个或多个 \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useState#setstate\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"set\"}],\" 函数\"]}],\" 来更新 state 的函数。React 会立即调用没有参数的 \",[\"$r\",\"code\",null,{\"children\":\"scope\"}],\"，并将在 \",[\"$r\",\"code\",null,{\"children\":\"scope\"}],\" 函数调用期间，调度所有的 state，并将同步更新标记为 transition。它们是 \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useTransition#marking-a-state-update-as-a-non-blocking-transition\",\"children\":\"非阻塞的\"}],\"，并且 \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useTransition#preventing-unwanted-loading-indicators\",\"children\":\"不会显示不想要的加载提示\"}],\"。\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"returns\",\"children\":\"返回值 \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" 不返回任何内容。\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"caveats\",\"children\":\"注意事项 \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" 没有提供一种跟踪 transition 是否处于待定状态的方法。为了在 transition 进行时显示一个待定状态的指示器，你需要使用 \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useTransition\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useTransition\"}]}],\"。\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"只有当你能访问某个 state 的 \",[\"$r\",\"code\",null,{\"children\":\"set\"}],\" 函数时，你才能将它的更新包裹到 transition 中。如果你想根据 props 或自定义 Hook 的返回值来启动一个 transition，请尝试使用 \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useDeferredValue\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useDeferredValue\"}]}],\"。\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"你传递给 \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" 的函数必须是同步的。React 会立即执行此函数，将其执行期间发生的所有 state 更新标记为 transition。如果你想试着稍后执行更多的 state 更新（例如，在 timeout 中），它们不会被标记为转换。\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":\"一个被标记为 transition 的 state 更新时将会被其他 state 更新打断。例如，如果你在 transition 内部更新图表组件，但在图表重新渲染时在输入框中打字，则 React 将先处理输入 state 更新，之后才会重新启动对图表组件的渲染工作。\"}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":\"transition 更新不能用于控制文本输入。\"}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":\"如果有多个正在进行的 transition，当前 React 会将它们集中在一起处理。这是一个限制，在未来的版本中可能会被移除。\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"usage\",\"children\":\"使用方法 \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"marking-a-state-update-as-a-non-blocking-transition\",\"children\":\"将 state 更新标记为非阻塞 transition \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"你可以通过将一个 state 包裹在 \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" 回调中，将其更新标记为一个 \",[\"$r\",\"strong\",null,{\"children\":\"transition\"}],\"：\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{7,9}\",\"children\":\"import { startTransition } from 'react';\\n\\nfunction TabContainer() {\\n  const [tab, setTab] = useState('about');\\n\\n  function selectTab(nextTab) {\\n    startTransition(() => {\\n      setTab(nextTab);\\n    });\\n  }\\n  // ...\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"transition 可以让用户界面在慢速设备上保持更新响应。\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"通过 transition，你的 UI 在重新渲染过程中保持响应。例如，如果用户单击一个选项卡后又改变主意并单击另一个选项卡，则可以在第一次重新渲染完成之前执行此操作而无需等待。\"}],\"\\n\",[\"$r\",\"Note\",null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" 与 \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useTransition\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useTransition\"}]}],\" 非常相似，但它不提供 \",[\"$r\",\"code\",null,{\"children\":\"isPending\"}],\" 标志来跟踪一个 transition 是否正在进行。你可以在 \",[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" 不可用时调用 \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\"。例如，在组件外部（如从数据库中）使用 \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\"。\"]}],[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"/reference/react/useTransition\",\"children\":[\"在 \",[\"$r\",\"code\",null,{\"children\":\"useTransition\"}],\" 页面上了解 transition 并查看示例\"]}],\"。\"]}]]}]]}]]","meta":{"title":"startTransition","translators":["Davont"]}},"__N_SSG":true}