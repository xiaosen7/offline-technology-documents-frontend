{"pageProps":{"toc":"[{\"url\":\"#\",\"text\":\"æ¦‚è§ˆ\",\"depth\":2},{\"url\":\"#reference\",\"depth\":2,\"text\":\"å‚è€ƒ \"},{\"url\":\"#usecallback\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"useCallback(fn, dependencies)\"}],\" \"]},{\"url\":\"#usage\",\"depth\":2,\"text\":\"ç”¨æ³• \"},{\"url\":\"#skipping-re-rendering-of-components\",\"depth\":3,\"text\":\"è·³è¿‡ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ \"},{\"url\":\"#updating-state-from-a-memoized-callback\",\"depth\":3,\"text\":\"ä»è®°å¿†åŒ–å›è°ƒä¸­æ›´æ–° state \"},{\"url\":\"#preventing-an-effect-from-firing-too-often\",\"depth\":3,\"text\":\"é˜²æ­¢é¢‘ç¹è§¦å‘ Effect \"},{\"url\":\"#optimizing-a-custom-hook\",\"depth\":3,\"text\":\"ä¼˜åŒ–è‡ªå®šä¹‰ Hook\"},{\"url\":\"#troubleshooting\",\"depth\":2,\"text\":\"ç–‘éš¾è§£ç­” \"},{\"url\":\"#every-time-my-component-renders-usecallback-returns-a-different-function\",\"depth\":3,\"text\":[\"æˆ‘çš„ç»„ä»¶æ¯ä¸€æ¬¡æ¸²æŸ“æ—¶, \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" éƒ½è¿”å›äº†å®Œå…¨ä¸åŒçš„å‡½æ•° \"]},{\"url\":\"#i-need-to-call-usememo-for-each-list-item-in-a-loop-but-its-not-allowed\",\"depth\":3,\"text\":[\"æˆ‘éœ€è¦åœ¨å¾ªç¯ä¸­ä¸ºæ¯ä¸€ä¸ªåˆ—è¡¨é¡¹è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" å‡½æ•°ï¼Œä½†æ˜¯è¿™ä¸è¢«å…è®¸ \"]}]","content":"[[\"$r\",\"MaxWidth\",\"80\",{\"children\":[[\"$r\",\"Intro\",null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" æ˜¯ä¸€ä¸ªå…è®¸ä½ åœ¨å¤šæ¬¡æ¸²æŸ“ä¸­ç¼“å­˜å‡½æ•°çš„ React Hookã€‚\"]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"const cachedFn = useCallback(fn, dependencies)\\n\"}]}]]}],\"\\n\",[\"$r\",\"InlineToc\",null,{}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"reference\",\"children\":\"å‚è€ƒ \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"usecallback\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"useCallback(fn, dependencies)\"}],\" \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨ç»„ä»¶é¡¶å±‚è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" ä»¥ä¾¿åœ¨å¤šæ¬¡æ¸²æŸ“ä¸­ç¼“å­˜å‡½æ•°ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{4,9}\",\"children\":\"import { useCallback } from 'react';\\n\\nexport default function ProductPage({ productId, referrer, theme }) {\\n  const handleSubmit = useCallback((orderDetails) => {\\n    post('/product/' + productId + '/buy', {\\n      referrer,\\n      orderDetails,\\n    });\\n  }, [productId, referrer]);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"#usage\",\"children\":\"å‚è§ä¸‹é¢æ›´å¤šç¤ºä¾‹\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"parameters\",\"children\":\"å‚æ•° \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"fn\"}],\"ï¼šæƒ³è¦ç¼“å­˜çš„å‡½æ•°ã€‚æ­¤å‡½æ•°å¯ä»¥æ¥å—ä»»ä½•å‚æ•°å¹¶ä¸”è¿”å›ä»»ä½•å€¼ã€‚åœ¨åˆæ¬¡æ¸²æŸ“æ—¶ï¼ŒReact å°†æŠŠå‡½æ•°è¿”å›ç»™ä½ ï¼ˆè€Œä¸æ˜¯è°ƒç”¨å®ƒï¼ï¼‰ã€‚å½“è¿›è¡Œä¸‹ä¸€æ¬¡æ¸²æŸ“æ—¶ï¼Œå¦‚æœ \",[\"$r\",\"code\",null,{\"children\":\"dependencies\"}],\" ç›¸æ¯”äºä¸Šä¸€æ¬¡æ¸²æŸ“æ—¶æ²¡æœ‰æ”¹å˜ï¼Œé‚£ä¹ˆ React å°†ä¼šè¿”å›ç›¸åŒçš„å‡½æ•°ã€‚å¦åˆ™ï¼ŒReact å°†è¿”å›åœ¨æœ€æ–°ä¸€æ¬¡æ¸²æŸ“ä¸­ä¼ å…¥çš„å‡½æ•°ï¼Œå¹¶ä¸”å°†å…¶ç¼“å­˜ä»¥ä¾¿ä¹‹åä½¿ç”¨ã€‚React ä¸ä¼šè°ƒç”¨æ­¤å‡½æ•°ï¼Œè€Œæ˜¯è¿”å›æ­¤å‡½æ•°ã€‚ä½ å¯ä»¥è‡ªå·±å†³å®šä½•æ—¶è°ƒç”¨ä»¥åŠæ˜¯å¦è°ƒç”¨ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"dependencies\"}],\"ï¼šæœ‰å…³æ˜¯å¦æ›´æ–° \",[\"$r\",\"code\",null,{\"children\":\"fn\"}],\" çš„æ‰€æœ‰å“åº”å¼å€¼çš„ä¸€ä¸ªåˆ—è¡¨ã€‚å“åº”å¼å€¼åŒ…æ‹¬ propsã€stateï¼Œå’Œæ‰€æœ‰åœ¨ä½ ç»„ä»¶å†…éƒ¨ç›´æ¥å£°æ˜çš„å˜é‡å’Œå‡½æ•°ã€‚å¦‚æœä½ çš„ä»£ç æ£€æŸ¥å·¥å…· \",[\"$r\",\"a\",null,{\"href\":\"/learn/editor-setup#linting\",\"children\":\"é…ç½®äº† React\"}],\"ï¼Œé‚£ä¹ˆå®ƒå°†æ ¡éªŒæ¯ä¸€ä¸ªæ­£ç¡®æŒ‡å®šä¸ºä¾èµ–çš„å“åº”å¼å€¼ã€‚ä¾èµ–åˆ—è¡¨å¿…é¡»å…·æœ‰ç¡®åˆ‡æ•°é‡çš„é¡¹ï¼Œå¹¶ä¸”å¿…é¡»åƒ \",[\"$r\",\"code\",null,{\"children\":\"[dep1, dep2, dep3]\"}],\" è¿™æ ·ç¼–å†™ã€‚React ä½¿ç”¨ \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/is\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":[\"$r\",\"code\",null,{\"children\":\"Object.is\"}]}],\" æ¯”è¾ƒæ¯ä¸€ä¸ªä¾èµ–å’Œå®ƒçš„ä¹‹å‰çš„å€¼ã€‚\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"returns\",\"children\":\"è¿”å›å€¼ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨åˆæ¬¡æ¸²æŸ“æ—¶ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" è¿”å›ä½ å·²ç»ä¼ å…¥çš„ \",[\"$r\",\"code\",null,{\"children\":\"fn\"}],\" å‡½æ•°\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨ä¹‹åçš„æ¸²æŸ“ä¸­, å¦‚æœä¾èµ–æ²¡æœ‰æ”¹å˜ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" è¿”å›ä¸Šä¸€æ¬¡æ¸²æŸ“ä¸­ç¼“å­˜çš„ \",[\"$r\",\"code\",null,{\"children\":\"fn\"}],\" å‡½æ•°ï¼›å¦åˆ™è¿”å›è¿™ä¸€æ¬¡æ¸²æŸ“ä¼ å…¥çš„ \",[\"$r\",\"code\",null,{\"children\":\"fn\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"caveats\",\"children\":\"æ³¨æ„ \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" æ˜¯ä¸€ä¸ª Hookï¼Œæ‰€ä»¥åº”è¯¥åœ¨ \",[\"$r\",\"strong\",null,{\"children\":\"ç»„ä»¶çš„é¡¶å±‚\"}],\" æˆ–è‡ªå®šä¹‰ Hook ä¸­è°ƒç”¨ã€‚ä½ ä¸åº”åœ¨å¾ªç¯æˆ–è€…æ¡ä»¶è¯­å¥ä¸­è°ƒç”¨å®ƒã€‚å¦‚æœä½ éœ€è¦è¿™æ ·åšï¼Œè¯·æ–°å»ºä¸€ä¸ªç»„ä»¶ï¼Œå¹¶å°† state ç§»å…¥å…¶ä¸­ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"é™¤éæœ‰ç‰¹å®šçš„ç†ç”±ï¼ŒReact \",[\"$r\",\"strong\",null,{\"children\":\"å°†ä¸ä¼šä¸¢å¼ƒå·²ç¼“å­˜çš„å‡½æ•°\"}],\"ã€‚ä¾‹å¦‚ï¼Œåœ¨å¼€å‘ä¸­ï¼Œå½“ç¼–è¾‘ç»„ä»¶æ–‡ä»¶æ—¶ï¼ŒReact ä¼šä¸¢å¼ƒç¼“å­˜ã€‚åœ¨ç”Ÿäº§å’Œå¼€å‘ç¯å¢ƒä¸­ï¼Œå¦‚æœä½ çš„ç»„ä»¶åœ¨åˆæ¬¡æŒ‚è½½ä¸­æš‚åœï¼ŒReact å°†ä¼šä¸¢å¼ƒç¼“å­˜ã€‚åœ¨æœªæ¥ï¼ŒReact å¯èƒ½ä¼šå¢åŠ æ›´å¤šåˆ©ç”¨äº†ä¸¢å¼ƒç¼“å­˜æœºåˆ¶çš„ç‰¹æ€§ã€‚ä¾‹å¦‚ï¼Œå¦‚æœ React æœªæ¥å†…ç½®äº†å¯¹è™šæ‹Ÿåˆ—è¡¨çš„æ”¯æŒï¼Œé‚£ä¹ˆåœ¨æ»šåŠ¨è¶…å‡ºè™šæ‹ŸåŒ–è¡¨è§†å£çš„é¡¹ç›®æ—¶ï¼ŒæŠ›å¼ƒç¼“å­˜æ˜¯æœ‰æ„ä¹‰çš„ã€‚å¦‚æœä½ ä¾èµ– \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" ä½œä¸ºä¸€ä¸ªæ€§èƒ½ä¼˜åŒ–é€”å¾„ï¼Œé‚£ä¹ˆè¿™äº›å¯¹ä½ ä¼šæœ‰å¸®åŠ©ã€‚å¦åˆ™è¯·è€ƒè™‘ä½¿ç”¨ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useState#im-trying-to-set-state-to-a-function-but-it-gets-called-instead\",\"children\":\"state å˜é‡\"}],\" æˆ– \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useRef#avoiding-recreating-the-ref-contents\",\"children\":\"ref\"}],\"ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"usage\",\"children\":\"ç”¨æ³• \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"skipping-re-rendering-of-components\",\"children\":\"è·³è¿‡ç»„ä»¶çš„é‡æ–°æ¸²æŸ“ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"å½“ä½ ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½çš„æ—¶å€™ï¼Œæœ‰æ—¶éœ€è¦ç¼“å­˜ä¼ é€’ç»™å­ç»„ä»¶çš„å‡½æ•°ã€‚è®©æˆ‘ä»¬å…ˆå…³æ³¨ä¸€ä¸‹å¦‚ä½•å®ç°ï¼Œç¨åå»ç†è§£åœ¨å“ªäº›åœºæ™¯ä¸­å®ƒæ˜¯æœ‰ç”¨çš„ã€‚\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä¸ºäº†ç¼“å­˜ç»„ä»¶ä¸­å¤šæ¬¡æ¸²æŸ“çš„å‡½æ•°ï¼Œä½ éœ€è¦å°†å…¶å®šä¹‰åœ¨ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" Hook ä¸­ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[3, 4, \\\"handleSubmit\\\"], [2, 9, \\\"[productId, referrer]\\\"]]\",\"children\":\"import { useCallback } from 'react';\\n\\nfunction ProductPage({ productId, referrer, theme }) {\\n  const handleSubmit = useCallback((orderDetails) => {\\n    post('/product/' + productId + '/buy', {\\n      referrer,\\n      orderDetails,\\n    });\\n  }, [productId, referrer]);\\n  // ...\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä½ éœ€è¦ä¼ é€’ä¸¤ä¸ªå‚æ•°ç»™ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\"ï¼š\"]}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":\"åœ¨å¤šæ¬¡æ¸²æŸ“ä¸­éœ€è¦ç¼“å­˜çš„å‡½æ•°\"}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"å‡½æ•°å†…éƒ¨éœ€è¦ä½¿ç”¨åˆ°çš„æ‰€æœ‰ç»„ä»¶å†…éƒ¨å€¼çš„ \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":\"ä¾èµ–åˆ—è¡¨\"}],\"ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åˆæ¬¡æ¸²æŸ“æ—¶ï¼Œåœ¨ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" å¤„æ¥æ”¶çš„ \",[\"$r\",\"CodeStep\",null,{\"step\":3,\"children\":\"è¿”å›å‡½æ•°\"}],\" å°†ä¼šæ˜¯å·²ç»ä¼ å…¥çš„å‡½æ•°ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨ä¹‹åçš„æ¸²æŸ“ä¸­ï¼ŒReact å°†ä¼šä½¿ç”¨ \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/is\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":[\"$r\",\"code\",null,{\"children\":\"Object.is\"}]}],\" æŠŠ \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":\"å½“å‰çš„ä¾èµ–\"}],\" å’Œå·²ä¼ å…¥ä¹‹å‰çš„ä¾èµ–è¿›è¡Œæ¯”è¾ƒã€‚å¦‚æœæ²¡æœ‰ä»»ä½•ä¾èµ–æ”¹å˜ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" å°†ä¼šè¿”å›ä¸ä¹‹å‰ä¸€æ ·çš„å‡½æ•°ã€‚å¦åˆ™ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" å°†è¿”å› \",[\"$r\",\"strong\",null,{\"children\":\"æ­¤æ¬¡\"}],\" æ¸²æŸ“ä¸­ä¼ é€’çš„å‡½æ•°ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ç®€è€Œè¨€ä¹‹ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" åœ¨å¤šæ¬¡æ¸²æŸ“ä¸­ç¼“å­˜ä¸€ä¸ªå‡½æ•°ï¼Œç›´è‡³è¿™ä¸ªå‡½æ•°çš„ä¾èµ–å‘ç”Ÿæ”¹å˜ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªç¤ºä¾‹çœ‹çœ‹å®ƒä½•æ—¶æœ‰ç”¨\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å‡è®¾ä½ æ­£åœ¨ä» \",[\"$r\",\"code\",null,{\"children\":\"ProductPage\"}],\" ä¼ é€’ä¸€ä¸ª \",[\"$r\",\"code\",null,{\"children\":\"handleSubmit\"}],\" å‡½æ•°åˆ° \",[\"$r\",\"code\",null,{\"children\":\"ShippingForm\"}],\" ç»„ä»¶ä¸­ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{5}\",\"children\":\"function ProductPage({ productId, referrer, theme }) {\\n  // ...\\n  return (\\n    <div className={theme}>\\n      <ShippingForm onSubmit={handleSubmit} />\\n    </div>\\n  );\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"æ³¨æ„ï¼Œåˆ‡æ¢ \",[\"$r\",\"code\",null,{\"children\":\"theme\"}],\" props åä¼šè®©åº”ç”¨åœæ»ä¸€å°ä¼šï¼Œä½†å¦‚æœå°† \",[\"$r\",\"code\",null,{\"children\":\"<ShippingForm />\"}],\" ä» JSX ä¸­ç§»é™¤ï¼Œåº”ç”¨å°†ååº”è¿…é€Ÿã€‚è¿™å°±æç¤ºå°½åŠ›ä¼˜åŒ– \",[\"$r\",\"code\",null,{\"children\":\"ShippingForm\"}],\" ç»„ä»¶å°†ä¼šå¾ˆæœ‰ç”¨ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“ä¸€ä¸ªç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œ React å°†é€’å½’æ¸²æŸ“å®ƒçš„æ‰€æœ‰å­ç»„ä»¶\"}],\"ï¼Œå› æ­¤æ¯å½“å›  \",[\"$r\",\"code\",null,{\"children\":\"theme\"}],\" æ›´æ”¹æ—¶è€Œ \",[\"$r\",\"code\",null,{\"children\":\"ProductPage\"}],\" ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"ShippingForm\"}],\" ç»„ä»¶ä¹Ÿä¼šé‡æ–°æ¸²æŸ“ã€‚è¿™å¯¹äºä¸éœ€è¦å¤§é‡è®¡ç®—å»é‡æ–°æ¸²æŸ“çš„ç»„ä»¶æ¥è¯´å½±å“å¾ˆå°ã€‚ä½†å¦‚æœä½ å‘ç°æŸæ¬¡é‡æ–°æ¸²æŸ“å¾ˆæ…¢ï¼Œä½ å¯ä»¥å°† \",[\"$r\",\"code\",null,{\"children\":\"ShippingForm\"}],\" ç»„ä»¶åŒ…è£¹åœ¨ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/memo\",\"children\":[\"$r\",\"code\",null,{\"children\":\"memo\"}]}],\" ä¸­ã€‚å¦‚æœ props å’Œä¸Šä¸€æ¬¡æ¸²æŸ“æ—¶ç›¸åŒï¼Œé‚£ä¹ˆ \",[\"$r\",\"code\",null,{\"children\":\"ShippingForm\"}],\" ç»„ä»¶å°†è·³è¿‡é‡æ–°æ¸²æŸ“ã€‚\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{3,5}\",\"children\":\"import { memo } from 'react';\\n\\nconst ShippingForm = memo(function ShippingForm({ onSubmit }) {\\n  // ...\\n});\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":[\"å½“ä»£ç åƒä¸Šé¢ä¸€æ ·æ”¹å˜åï¼Œå¦‚æœ props ä¸ä¸Šä¸€æ¬¡æ¸²æŸ“æ—¶ç›¸åŒï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"ShippingForm\"}],\" å°†è·³è¿‡é‡æ–°æ¸²æŸ“\"]}],\"ã€‚è¿™æ—¶ç¼“å­˜å‡½æ•°å°±å˜å¾—å¾ˆé‡è¦ã€‚å‡è®¾å®šä¹‰äº† \",[\"$r\",\"code\",null,{\"children\":\"handleSubmit\"}],\" è€Œæ²¡æœ‰å®šä¹‰ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\"ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{2,3,8,12-13}\",\"children\":\"function ProductPage({ productId, referrer, theme }) {\\n  // æ¯å½“ theme æ”¹å˜æ—¶ï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªä¸åŒçš„å‡½æ•°\\n  function handleSubmit(orderDetails) {\\n    post('/product/' + productId + '/buy', {\\n      referrer,\\n      orderDetails,\\n    });\\n  }\\n  \\n  return (\\n    <div className={theme}>\\n      {/* è¿™å°†å¯¼è‡´ ShippingForm props æ°¸è¿œéƒ½ä¸ä¼šæ˜¯ç›¸åŒçš„ï¼Œå¹¶ä¸”æ¯æ¬¡å®ƒéƒ½ä¼šé‡æ–°æ¸²æŸ“ */}\\n      <ShippingForm onSubmit={handleSubmit} />\\n    </div>\\n  );\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä¸å­—é¢é‡å¯¹è±¡ \",[\"$r\",\"code\",null,{\"children\":\"{}\"}],\" æ€»æ˜¯ä¼šåˆ›å»ºæ–°å¯¹è±¡ç±»ä¼¼ï¼Œ\",[\"$r\",\"strong\",null,{\"children\":[\"åœ¨ JavaScript ä¸­ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"function () {}\"}],\" æˆ–è€… \",[\"$r\",\"code\",null,{\"children\":\"() => {}\"}],\" æ€»æ˜¯ä¼šç”Ÿæˆä¸åŒçš„å‡½æ•°\"]}],\"ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œè¿™ä¸ä¼šæœ‰é—®é¢˜ï¼Œä½†æ˜¯è¿™æ„å‘³ç€ \",[\"$r\",\"code\",null,{\"children\":\"ShippingForm\"}],\" props å°†æ°¸è¿œä¸ä¼šæ˜¯ç›¸åŒçš„ï¼Œå¹¶ä¸” \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/memo\",\"children\":[\"$r\",\"code\",null,{\"children\":\"memo\"}]}],\" å¯¹æ€§èƒ½çš„ä¼˜åŒ–æ°¸è¿œä¸ä¼šç”Ÿæ•ˆã€‚è€Œè¿™å°±æ˜¯ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" èµ·ä½œç”¨çš„åœ°æ–¹ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{2,3,8,12-13}\",\"children\":\"function ProductPage({ productId, referrer, theme }) {\\n  // åœ¨å¤šæ¬¡æ¸²æŸ“ä¸­ç¼“å­˜å‡½æ•°\\n  const handleSubmit = useCallback((orderDetails) => {\\n    post('/product/' + productId + '/buy', {\\n      referrer,\\n      orderDetails,\\n    });\\n  }, [productId, referrer]); // åªè¦è¿™äº›ä¾èµ–æ²¡æœ‰æ”¹å˜\\n\\n  return (\\n    <div className={theme}>\\n      {/* ShippingForm å°±ä¼šæ”¶åˆ°åŒæ ·çš„ props å¹¶ä¸”è·³è¿‡é‡æ–°æ¸²æŸ“ */}\\n      <ShippingForm onSubmit={handleSubmit} />\\n    </div>\\n  );\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":[\"å°† \",[\"$r\",\"code\",null,{\"children\":\"handleSubmit\"}],\" ä¼ é€’ç»™ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" å°±å¯ä»¥ç¡®ä¿å®ƒåœ¨å¤šæ¬¡é‡æ–°æ¸²æŸ“ä¹‹é—´æ˜¯ç›¸åŒçš„å‡½æ•°\"]}],\"ï¼Œç›´åˆ°ä¾èµ–å‘ç”Ÿæ”¹å˜ã€‚æ³¨æ„ï¼Œé™¤éå‡ºäºæŸç§ç‰¹å®šåŸå› ï¼Œå¦åˆ™ä¸å¿…å°†ä¸€ä¸ªå‡½æ•°åŒ…è£¹åœ¨ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" ä¸­ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œä½ å°†å®ƒä¼ é€’åˆ°äº†åŒ…è£¹åœ¨ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/memo\",\"children\":[\"$r\",\"code\",null,{\"children\":\"memo\"}]}],\" ä¸­çš„ç»„ä»¶ï¼Œè¿™å…è®¸å®ƒè·³è¿‡é‡æ–°æ¸²æŸ“ã€‚ä¸è¿‡è¿˜æœ‰å…¶ä»–åœºæ™¯å¯èƒ½éœ€è¦ç”¨åˆ° \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\"ï¼Œæœ¬ç« å°†å¯¹æ­¤è¿›è¡Œè¿›ä¸€æ­¥æè¿°ã€‚\"]}],\"\\n\",[\"$r\",\"Note\",null,{\"children\":[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" åªåº”ä½œç”¨äºæ€§èƒ½ä¼˜åŒ–\"]}],\"ã€‚å¦‚æœä»£ç åœ¨æ²¡æœ‰å®ƒçš„æƒ…å†µä¸‹æ— æ³•è¿è¡Œï¼Œè¯·æ‰¾åˆ°æ ¹æœ¬é—®é¢˜å¹¶é¦–å…ˆä¿®å¤å®ƒï¼Œç„¶åå†ä½¿ç”¨ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\"ã€‚\"]}]}],\"\\n\",[\"$r\",\"DeepDive\",null,{\"children\":[[\"$r\",\"h4\",null,{\"id\":\"how-is-usecallback-related-to-usememo\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" ä¸ \",[\"$r\",\"code\",null,{\"children\":\"useMemo\"}],\" æœ‰ä½•å…³ç³»ï¼Ÿ \"]}],[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"/reference/react/useMemo\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useMemo\"}]}],\" ç»å¸¸ä¸ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" ä¸€åŒå‡ºç°ã€‚å½“å°è¯•ä¼˜åŒ–å­ç»„ä»¶æ—¶ï¼Œå®ƒä»¬éƒ½å¾ˆæœ‰ç”¨ã€‚ä»–ä»¬ä¼š \",[\"$r\",\"a\",null,{\"href\":\"https://en.wikipedia.org/wiki/Memoization\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"è®°ä½\"}],\"ï¼ˆæˆ–è€…è¯´ï¼Œç¼“å­˜ï¼‰æ­£åœ¨ä¼ é€’çš„ä¸œè¥¿ï¼š\"]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{6-8,10-15,19}\",\"children\":\"import { useMemo, useCallback } from 'react';\\n\\nfunction ProductPage({ productId, referrer }) {\\n  const product = useData('/product/' + productId);\\n\\n  const requirements = useMemo(() => { //è°ƒç”¨å‡½æ•°å¹¶ç¼“å­˜ç»“æœ\\n    return computeRequirements(product);\\n  }, [product]);\\n\\n  const handleSubmit = useCallback((orderDetails) => { // ç¼“å­˜å‡½æ•°æœ¬èº«\\n    post('/product/' + productId + '/buy', {\\n      referrer,\\n      orderDetails,\\n    });\\n  }, [productId, referrer]);\\n\\n  return (\\n    <div className={theme}>\\n      <ShippingForm requirements={requirements} onSubmit={handleSubmit} />\\n    </div>\\n  );\\n}\\n\"}]}],[\"$r\",\"p\",null,{\"children\":[\"åŒºåˆ«åœ¨äºä½ éœ€è¦ç¼“å­˜ \",[\"$r\",\"strong\",null,{\"children\":\"ä»€ä¹ˆ\"}],\":\"]}],[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"/reference/react/useMemo\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useMemo\"}]}],\" ç¼“å­˜å‡½æ•°è°ƒç”¨çš„ç»“æœ\"]}],\"ã€‚åœ¨è¿™é‡Œï¼Œå®ƒç¼“å­˜äº†è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"computeRequirements(product)\"}],\" çš„ç»“æœã€‚é™¤é \",[\"$r\",\"code\",null,{\"children\":\"product\"}],\" å‘ç”Ÿæ”¹å˜ï¼Œå¦åˆ™å®ƒå°†ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚è¿™è®©ä½ å‘ä¸‹ä¼ é€’ \",[\"$r\",\"code\",null,{\"children\":\"requirements\"}],\" æ—¶è€Œæ— éœ€ä¸å¿…è¦åœ°é‡æ–°æ¸²æŸ“ \",[\"$r\",\"code\",null,{\"children\":\"ShippingForm\"}],\"ã€‚å¿…è¦æ—¶ï¼ŒReact å°†ä¼šè°ƒç”¨ä¼ å…¥çš„å‡½æ•°é‡æ–°è®¡ç®—ç»“æœã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" ç¼“å­˜å‡½æ•°æœ¬èº«\"]}],\"ã€‚ä¸åƒ \",[\"$r\",\"code\",null,{\"children\":\"useMemo\"}],\"ï¼Œå®ƒä¸ä¼šè°ƒç”¨ä½ ä¼ å…¥çš„å‡½æ•°ã€‚ç›¸åï¼Œå®ƒç¼“å­˜æ­¤å‡½æ•°ã€‚ä»è€Œé™¤é \",[\"$r\",\"code\",null,{\"children\":\"productId\"}],\" æˆ– \",[\"$r\",\"code\",null,{\"children\":\"referrer\"}],\" å‘ç”Ÿæ”¹å˜ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"handleSubmit\"}],\" è‡ªå·±å°†ä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚è¿™è®©ä½ å‘ä¸‹ä¼ é€’ \",[\"$r\",\"code\",null,{\"children\":\"handleSubmit\"}],\" å‡½æ•°è€Œæ— éœ€ä¸å¿…è¦åœ°é‡æ–°æ¸²æŸ“ \",[\"$r\",\"code\",null,{\"children\":\"ShippingForm\"}],\"ã€‚ç›´è‡³ç”¨æˆ·æäº¤è¡¨å•ï¼Œä½ çš„ä»£ç éƒ½å°†ä¸ä¼šè¿è¡Œã€‚\"]}],\"\\n\"]}],[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœä½ å·²ç»ç†Ÿæ‚‰äº† \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useMemo\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useMemo\"}]}],\"ï¼Œä½ å¯èƒ½å‘ç°å°† \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" è§†ä¸ºä»¥ä¸‹å†…å®¹ä¼šå¾ˆæœ‰å¸®åŠ©ï¼š\"]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"// åœ¨ React å†…éƒ¨çš„ç®€åŒ–å®ç°\\nfunction useCallback(fn, dependencies) {\\n  return useMemo(() => fn, dependencies);\\n}\\n\"}]}],[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"/reference/react/useMemo#memoizing-a-function\",\"children\":[\"é˜…è¯»æ›´å¤šå…³äº \",[\"$r\",\"code\",null,{\"children\":\"useMemo\"}],\" ä¸ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" ä¹‹é—´åŒºåˆ«çš„ä¿¡æ¯\"]}],\"ã€‚\"]}]]}],\"\\n\",[\"$r\",\"DeepDive\",null,{\"children\":[[\"$r\",\"h4\",null,{\"id\":\"should-you-add-usecallback-everywhere\",\"children\":[\"æ˜¯å¦åº”è¯¥åœ¨ä»»ä½•åœ°æ–¹æ·»åŠ  \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\"ï¼Ÿ \"]}],[\"$r\",\"p\",null,{\"children\":\"å¦‚æœä½ çš„åº”ç”¨ç¨‹åºä¸æœ¬ç½‘ç«™ç±»ä¼¼ï¼Œå¹¶ä¸”å¤§å¤šæ•°äº¤äº’éƒ½å¾ˆç²—ç³™ï¼ˆä¾‹å¦‚æ›¿æ¢é¡µé¢æˆ–æ•´ä¸ªéƒ¨åˆ†ï¼‰ï¼Œåˆ™é€šå¸¸ä¸éœ€è¦ç¼“å­˜ã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœä½ çš„åº”ç”¨æ›´åƒæ˜¯ä¸€ä¸ªç»˜å›¾ç¼–è¾‘å™¨ï¼Œå¹¶ä¸”å¤§å¤šæ•°äº¤äº’éƒ½æ˜¯ç²¾ç»†çš„ï¼ˆå¦‚ç§»åŠ¨å½¢çŠ¶ï¼‰ï¼Œé‚£ä¹ˆä½ å¯èƒ½ä¼šå‘ç°ç¼“å­˜éå¸¸æœ‰ç”¨ã€‚\"}],[\"$r\",\"p\",null,{\"children\":[\"ä½¿ç”¨ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" ç¼“å­˜å‡½æ•°ä»…åœ¨å°‘æ•°æƒ…å†µä¸‹æœ‰æ„ä¹‰ï¼š\"]}],[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"å°†å…¶ä½œä¸º props ä¼ é€’ç»™åŒ…è£…åœ¨ [\",[\"$r\",\"code\",null,{\"children\":\"memo\"}],\"] ä¸­çš„ç»„ä»¶ã€‚å¦‚æœ props æœªæ›´æ”¹ï¼Œåˆ™å¸Œæœ›è·³è¿‡é‡æ–°æ¸²æŸ“ã€‚ç¼“å­˜å…è®¸ç»„ä»¶ä»…åœ¨ä¾èµ–é¡¹æ›´æ”¹æ—¶é‡æ–°æ¸²æŸ“ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"ä¼ é€’çš„å‡½æ•°å¯èƒ½ä½œä¸ºæŸäº› Hook çš„ä¾èµ–ã€‚æ¯”å¦‚ï¼Œå¦ä¸€ä¸ªåŒ…è£¹åœ¨ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" ä¸­çš„å‡½æ•°ä¾èµ–äºå®ƒï¼Œæˆ–è€…ä¾èµ–äº \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useEffect\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useEffect\"}]}],\" ä¸­çš„å‡½æ•°ã€‚\"]}],\"\\n\"]}],[\"$r\",\"p\",null,{\"children\":[\"åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œå°†å‡½æ•°åŒ…è£…åœ¨ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" ä¸­æ²¡æœ‰ä»»ä½•æ„ä¹‰ã€‚ä¸è¿‡å³ä½¿è¿™æ ·åšäº†ï¼Œä¹Ÿæ²¡æœ‰å¾ˆå¤§çš„åå¤„ã€‚æ‰€ä»¥æœ‰äº›å›¢é˜Ÿé€‰æ‹©ä¸è€ƒè™‘ä¸ªæ¡ˆï¼Œä»è€Œå°½å¯èƒ½ç¼“å­˜ã€‚ä¸å¥½çš„åœ°æ–¹å¯èƒ½æ˜¯é™ä½äº†ä»£ç å¯è¯»æ€§ã€‚è€Œä¸”ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ç¼“å­˜éƒ½æ˜¯æœ‰æ•ˆçš„ï¼šä¸€ä¸ªå§‹ç»ˆæ˜¯æ–°çš„å€¼è¶³ä»¥ç ´åæ•´ä¸ªç»„ä»¶çš„ç¼“å­˜ã€‚\"]}],[\"$r\",\"p\",null,{\"children\":[\"è¯·æ³¨æ„ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" ä¸ä¼šé˜»æ­¢åˆ›å»ºå‡½æ•°ã€‚ä½ æ€»æ˜¯åœ¨åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼ˆè¿™å¾ˆå¥½ï¼ï¼‰ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰ä»»ä½•ä¸œè¥¿æ”¹å˜ï¼ŒReact ä¼šå¿½ç•¥å®ƒå¹¶è¿”å›ç¼“å­˜çš„å‡½æ•°ã€‚\"]}],[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"åœ¨å®è·µä¸­, ä½ å¯ä»¥é€šè¿‡éµå¾ªä¸€äº›åŸåˆ™æ¥å‡å°‘è®¸å¤šä¸å¿…è¦çš„è®°å¿†åŒ–\"}],\"ï¼š\"]}],[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"å½“ä¸€ä¸ªç»„ä»¶åœ¨è§†è§‰ä¸ŠåŒ…è£…å…¶ä»–ç»„ä»¶æ—¶ï¼Œè®©å®ƒ \",[\"$r\",\"a\",null,{\"href\":\"/learn/passing-props-to-a-component#passing-jsx-as-children\",\"children\":\"æ¥å— JSX ä½œä¸ºå­å…ƒç´ \"}],\"ã€‚éšåï¼Œå¦‚æœåŒ…è£…ç»„ä»¶æ›´æ–°è‡ªå·±çš„ stateï¼ŒReact çŸ¥é“å®ƒçš„å­ç»„ä»¶ä¸éœ€è¦é‡æ–°æ¸²æŸ“ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"å»ºè®®ä½¿ç”¨ state å¹¶ä¸”ä¸è¦ \",[\"$r\",\"a\",null,{\"href\":\"/learn/sharing-state-between-components\",\"children\":\"æå‡çŠ¶æ€\"}],\" è¶…è¿‡å¿…è¦çš„ç¨‹åº¦ã€‚ä¸è¦å°†è¡¨å•å’Œé¡¹æ˜¯å¦æ‚¬åœç­‰çŸ­æš‚çŠ¶æ€ä¿å­˜åœ¨æ ‘çš„é¡¶éƒ¨æˆ–å…¨å±€çŠ¶æ€åº“ä¸­ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"ä¿æŒ \",[\"$r\",\"a\",null,{\"href\":\"/learn/keeping-components-pure\",\"children\":\"æ¸²æŸ“é€»è¾‘çº¯ç²¹\"}],\"ã€‚å¦‚æœé‡æ–°æ¸²æŸ“ç»„ä»¶ä¼šå¯¼è‡´é—®é¢˜æˆ–äº§ç”Ÿä¸€äº›æ˜æ˜¾çš„è§†è§‰ç‘•ç–µï¼Œé‚£ä¹ˆè¿™æ˜¯ç»„ä»¶è‡ªèº«çš„é—®é¢˜ï¼è¯·ä¿®å¤è¿™ä¸ªé”™è¯¯ï¼Œè€Œä¸æ˜¯æ·»åŠ è®°å¿†åŒ–ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"é¿å… \",[\"$r\",\"a\",null,{\"href\":\"/learn/you-might-not-need-an-effect\",\"children\":\"ä¸å¿…è¦åœ°æ›´æ–° Effect\"}],\"ã€‚React åº”ç”¨ç¨‹åºä¸­çš„å¤§å¤šæ•°æ€§èƒ½é—®é¢˜éƒ½æ˜¯ç”± Effect çš„æ›´æ–°é“¾å¼•èµ·çš„ï¼Œè¿™äº›æ›´æ–°é“¾ä¸æ–­å¯¼è‡´ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"å°è¯• \",[\"$r\",\"a\",null,{\"href\":\"/learn/removing-effect-dependencies\",\"children\":\"ä» Effect ä¸­åˆ é™¤ä¸å¿…è¦çš„ä¾èµ–å…³ç³»\"}],\"ã€‚ä¾‹å¦‚ï¼Œå°†æŸäº›å¯¹è±¡æˆ–å‡½æ•°ç§»åŠ¨åˆ°å‰¯ä½œç”¨å†…éƒ¨æˆ–ç»„ä»¶å¤–éƒ¨é€šå¸¸æ›´ç®€å•ï¼Œè€Œä¸æ˜¯ä½¿ç”¨è®°å¿†åŒ–ã€‚\"]}],\"\\n\"]}],[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœç‰¹å®šçš„äº¤äº’ä»ç„¶æ„Ÿè§‰æ»åï¼Œ\",[\"$r\",\"a\",null,{\"href\":\"https://legacy.reactjs.org/blog/2018/09/10/introducing-the-react-profiler.html\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"ä½¿ç”¨ React å¼€å‘è€…å·¥å…·\"}],\" æŸ¥çœ‹å“ªäº›ç»„ä»¶åœ¨è®°å¿†åŒ–ä¸­å—ç›Šæœ€å¤§ï¼Œå¹¶åœ¨éœ€è¦æ—¶æ·»åŠ è®°å¿†åŒ–ã€‚è¿™äº›åŸåˆ™ä½¿ä½ çš„ç»„ä»¶æ›´æ˜“äºè°ƒè¯•å’Œç†è§£ï¼Œå› æ­¤åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½æœ€å¥½éµå¾ªå®ƒä»¬ã€‚ä»é•¿è¿œæ¥çœ‹ï¼Œæˆ‘ä»¬æ­£åœ¨ç ”ç©¶ \",[\"$r\",\"a\",null,{\"href\":\"https://www.youtube.com/watch?v=lGEMwh32soc\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"è‡ªåŠ¨è®°å¿†åŒ–\"}],\" ä»¥ä¸€åŠ³æ°¸é€¸åœ°è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\"]}]]}],\"\\n\"]}],[\"$r\",\"Recipes\",null,{\"titleText\":\"ä½¿ç”¨ useCallback ä¸ç›´æ¥å£°æ˜å‡½æ•°çš„åŒºåˆ«\",\"titleId\":\"examples-rerendering\",\"children\":[[\"$r\",\"h4\",null,{\"id\":\"skipping-re-rendering-with-usecallback-and-memo\",\"children\":[\"ä½¿ç”¨ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" å’Œ \",[\"$r\",\"code\",null,{\"children\":\"memo\"}],\" è·³è¿‡å‡½æ•°çš„é‡æ–°æ¸²æŸ“ \"]}],[\"$r\",\"p\",null,{\"children\":[\"åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"ShippingForm\"}],\" ç»„ä»¶è¢«äººä¸ºåœ°å‡æ…¢äº†é€Ÿåº¦ï¼Œä»¥ä¾¿ä½ å¯ä»¥çœ‹åˆ°æ¸²æŸ“çš„ React ç»„ä»¶çœŸæ­£å˜æ…¢æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚å°è¯•é€’å¢è®¡æ•°å™¨å¹¶åˆ‡æ¢ä¸»é¢˜ã€‚\"]}],[\"$r\",\"p\",null,{\"children\":[\"é€’å¢è®¡æ•°å™¨æ„Ÿè§‰å¾ˆæ…¢ï¼Œå› ä¸ºå®ƒä¼šå¼ºåˆ¶å˜æ…¢ \",[\"$r\",\"code\",null,{\"children\":\"ShippingForm\"}],\" çš„é‡æ–°æ¸²æŸ“ã€‚è¿™æ˜¯æ„æ–™ä¹‹ä¸­çš„ï¼Œå› ä¸ºè®¡æ•°å™¨å·²æ›´æ”¹ï¼Œå› æ­¤ä½ éœ€è¦åœ¨å±å¹•ä¸Šåæ˜ ç”¨æˆ·çš„æ–°é€‰æ‹©ã€‚\"]}],[\"$r\",\"p\",null,{\"children\":[\"æ¥ä¸‹æ¥ï¼Œå°è¯•æ›´æ”¹ä¸»é¢˜ã€‚\",[\"$r\",\"strong\",null,{\"children\":[\"å°† \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" å’Œ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/memo\",\"children\":[\"$r\",\"code\",null,{\"children\":\"memo\"}]}],\" ç»“åˆä½¿ç”¨åï¼Œå°½ç®¡äººä¸ºå‡ç¼“äº†é€Ÿåº¦ï¼Œä½†å®ƒè¿˜æ˜¯å¾ˆå¿«\"]}],\"ã€‚ç”±äº \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" ä¾èµ– \",[\"$r\",\"code\",null,{\"children\":\"productId\"}],\" ä¸ \",[\"$r\",\"code\",null,{\"children\":\"referrer\"}],\" è‡ªä¸Šæ¬¡æ¸²æŸ“åå§‹ç»ˆæ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œå› æ­¤ \",[\"$r\",\"code\",null,{\"children\":\"handleSubmit\"}],\" ä¹Ÿæ²¡æœ‰æ”¹å˜ã€‚ç”±äº \",[\"$r\",\"code\",null,{\"children\":\"handleSubmit\"}],\" æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"ShippingForm\"}],\" å°±è·³è¿‡äº†é‡æ–°æ¸²æŸ“ã€‚\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { useState } from 'react';\\nimport ProductPage from './ProductPage.js';\\n\\nexport default function App() {\\n  const [isDark, setIsDark] = useState(false);\\n  return (\\n    <>\\n      <label>\\n        <input\\n          type=\\\"checkbox\\\"\\n          checked={isDark}\\n          onChange={e => setIsDark(e.target.checked)}\\n        />\\n        Dark mode\\n      </label>\\n      <hr />\\n      <ProductPage\\n        referrerId=\\\"wizard_of_oz\\\"\\n        productId={123}\\n        theme={isDark ? 'dark' : 'light'}\\n      />\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ProductPage.js active\",\"children\":\"import { useCallback } from 'react';\\nimport ShippingForm from './ShippingForm.js';\\n\\nexport default function ProductPage({ productId, referrer, theme }) {\\n  const handleSubmit = useCallback((orderDetails) => {\\n    post('/product/' + productId + '/buy', {\\n      referrer,\\n      orderDetails,\\n    });\\n  }, [productId, referrer]);\\n\\n  return (\\n    <div className={theme}>\\n      <ShippingForm onSubmit={handleSubmit} />\\n    </div>\\n  );\\n}\\n\\nfunction post(url, data) {\\n  // æƒ³è±¡è¿™å‘é€äº†ä¸€ä¸ªè¯·æ±‚\\n  console.log('POST /' + url);\\n  console.log(data);\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ShippingForm.js\",\"children\":\"import { memo, useState } from 'react';\\n\\nconst ShippingForm = memo(function ShippingForm({ onSubmit }) {\\n  const [count, setCount] = useState(1);\\n\\n  console.log('[ARTIFICIALLY SLOW] Rendering <ShippingForm />');\\n  let startTime = performance.now();\\n  while (performance.now() - startTime < 500) {\\n    // 500 æ¯«ç§’å†…ä¸æ‰§è¡Œä»»ä½•æ“ä½œæ¥æ¨¡æ‹Ÿææ…¢çš„ä»£ç \\n  }\\n\\n  function handleSubmit(e) {\\n    e.preventDefault();\\n    const formData = new FormData(e.target);\\n    const orderDetails = {\\n      ...Object.fromEntries(formData),\\n      count\\n    };\\n    onSubmit(orderDetails);\\n  }\\n\\n  return (\\n    <form onSubmit={handleSubmit}>\\n      <p><b>Note: <code>ShippingForm</code> is artificially slowed down!</b></p>\\n      <label>\\n        Number of items:\\n        <button type=\\\"button\\\" onClick={() => setCount(count - 1)}>â€“</button>\\n        {count}\\n        <button type=\\\"button\\\" onClick={() => setCount(count + 1)}>+</button>\\n      </label>\\n      <label>\\n        Street:\\n        <input name=\\\"street\\\" />\\n      </label>\\n      <label>\\n        City:\\n        <input name=\\\"city\\\" />\\n      </label>\\n      <label>\\n        Postal code:\\n        <input name=\\\"zipCode\\\" />\\n      </label>\\n      <button type=\\\"submit\\\">Submit</button>\\n    </form>\\n  );\\n});\\n\\nexport default ShippingForm;\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"label {\\n  display: block; margin-top: 10px;\\n}\\n\\ninput {\\n  margin-left: 5px;\\n}\\n\\nbutton[type=\\\"button\\\"] {\\n  margin: 5px;\\n}\\n\\n.dark {\\n  background-color: black;\\n  color: white;\\n}\\n\\n.light {\\n  background-color: white;\\n  color: black;\\n}\\n\"}]}]]}],[\"$r\",\"Solution\",null,{}],[\"$r\",\"h4\",null,{\"id\":\"always-re-rendering-a-component\",\"children\":\"å§‹ç»ˆé‡æ–°æ¸²æŸ“ç»„ä»¶ \"}],[\"$r\",\"p\",null,{\"children\":[\"åœ¨æœ¬ä¾‹ä¸­ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"ShippingForm\"}],\" è¢«äººä¸ºåœ°å‡æ…¢äº†é€Ÿåº¦ï¼Œè¿™æ ·ä½ å¯ä»¥çœ‹åˆ°å½“ä½ æ¸²æŸ“çš„æŸäº› React ç»„ä»¶è¿è¡Œå¾ˆæ…¢æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚å°è¯•é€’å¢è®¡æ•°å™¨å¹¶åˆ‡æ¢ä¸»é¢˜ã€‚\"]}],[\"$r\",\"p\",null,{\"children\":[\"ä¸å‰é¢ç¤ºä¾‹ä¸åŒï¼Œç°åœ¨åˆ‡æ¢ä¸»é¢˜ä¹Ÿå¾ˆæ…¢ï¼è¿™æ˜¯å› ä¸º \",[\"$r\",\"strong\",null,{\"children\":[\"æ­¤å¤„æ²¡æœ‰è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}]]}],\"ï¼Œæ‰€ä»¥ \",[\"$r\",\"code\",null,{\"children\":\"handleSubmit\"}],\" æ€»æ˜¯ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå¹¶ä¸”è¢«å‡é€Ÿçš„ \",[\"$r\",\"code\",null,{\"children\":\"ShippingForm\"}],\" ç»„ä»¶ä¸èƒ½è·³è¿‡é‡æ–°æ¸²æŸ“ã€‚\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { useState } from 'react';\\nimport ProductPage from './ProductPage.js';\\n\\nexport default function App() {\\n  const [isDark, setIsDark] = useState(false);\\n  return (\\n    <>\\n      <label>\\n        <input\\n          type=\\\"checkbox\\\"\\n          checked={isDark}\\n          onChange={e => setIsDark(e.target.checked)}\\n        />\\n        Dark mode\\n      </label>\\n      <hr />\\n      <ProductPage\\n        referrerId=\\\"wizard_of_oz\\\"\\n        productId={123}\\n        theme={isDark ? 'dark' : 'light'}\\n      />\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ProductPage.js active\",\"children\":\"import ShippingForm from './ShippingForm.js';\\n\\nexport default function ProductPage({ productId, referrer, theme }) {\\n  function handleSubmit(orderDetails) {\\n    post('/product/' + productId + '/buy', {\\n      referrer,\\n      orderDetails,\\n    });\\n  }\\n\\n  return (\\n    <div className={theme}>\\n      <ShippingForm onSubmit={handleSubmit} />\\n    </div>\\n  );\\n}\\n\\nfunction post(url, data) {\\n  //æƒ³è±¡è¿™å‘é€äº†ä¸€ä¸ªè¯·æ±‚\\n  console.log('POST /' + url);\\n  console.log(data);\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ShippingForm.js\",\"children\":\"import { memo, useState } from 'react';\\n\\nconst ShippingForm = memo(function ShippingForm({ onSubmit }) {\\n  const [count, setCount] = useState(1);\\n\\n  console.log('[ARTIFICIALLY SLOW] Rendering <ShippingForm />');\\n  let startTime = performance.now();\\n  while (performance.now() - startTime < 500) {\\n     // 500 æ¯«ç§’å†…ä¸æ‰§è¡Œä»»ä½•æ“ä½œæ¥æ¨¡æ‹Ÿææ…¢çš„ä»£ç \\n  }\\n\\n  function handleSubmit(e) {\\n    e.preventDefault();\\n    const formData = new FormData(e.target);\\n    const orderDetails = {\\n      ...Object.fromEntries(formData),\\n      count\\n    };\\n    onSubmit(orderDetails);\\n  }\\n\\n  return (\\n    <form onSubmit={handleSubmit}>\\n      <p><b>Note: <code>ShippingForm</code> is artificially slowed down!</b></p>\\n      <label>\\n        Number of items:\\n        <button type=\\\"button\\\" onClick={() => setCount(count - 1)}>â€“</button>\\n        {count}\\n        <button type=\\\"button\\\" onClick={() => setCount(count + 1)}>+</button>\\n      </label>\\n      <label>\\n        Street:\\n        <input name=\\\"street\\\" />\\n      </label>\\n      <label>\\n        City:\\n        <input name=\\\"city\\\" />\\n      </label>\\n      <label>\\n        Postal code:\\n        <input name=\\\"zipCode\\\" />\\n      </label>\\n      <button type=\\\"submit\\\">Submit</button>\\n    </form>\\n  );\\n});\\n\\nexport default ShippingForm;\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"label {\\n  display: block; margin-top: 10px;\\n}\\n\\ninput {\\n  margin-left: 5px;\\n}\\n\\nbutton[type=\\\"button\\\"] {\\n  margin: 5px;\\n}\\n\\n.dark {\\n  background-color: black;\\n  color: white;\\n}\\n\\n.light {\\n  background-color: white;\\n  color: black;\\n}\\n\"}]}]]}],[\"$r\",\"p\",null,{\"children\":[\"ç„¶è€Œï¼Œè¿™é‡Œçš„ä»£ç æ˜¯ä¸€è‡´çš„ï¼Œåªæ˜¯ \",[\"$r\",\"strong\",null,{\"children\":\"ç§»é™¤äº†äººä¸ºå‡ç¼“çš„éƒ¨åˆ†\"}],\"ã€‚æ­¤æ—¶ç¼ºå°‘ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" æ˜¯å¦ä¼šæ„Ÿè§‰æ˜æ˜¾ï¼Ÿ\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { useState } from 'react';\\nimport ProductPage from './ProductPage.js';\\n\\nexport default function App() {\\n  const [isDark, setIsDark] = useState(false);\\n  return (\\n    <>\\n      <label>\\n        <input\\n          type=\\\"checkbox\\\"\\n          checked={isDark}\\n          onChange={e => setIsDark(e.target.checked)}\\n        />\\n        Dark mode\\n      </label>\\n      <hr />\\n      <ProductPage\\n        referrerId=\\\"wizard_of_oz\\\"\\n        productId={123}\\n        theme={isDark ? 'dark' : 'light'}\\n      />\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ProductPage.js active\",\"children\":\"import ShippingForm from './ShippingForm.js';\\n\\nexport default function ProductPage({ productId, referrer, theme }) {\\n  function handleSubmit(orderDetails) {\\n    post('/product/' + productId + '/buy', {\\n      referrer,\\n      orderDetails,\\n    });\\n  }\\n\\n  return (\\n    <div className={theme}>\\n      <ShippingForm onSubmit={handleSubmit} />\\n    </div>\\n  );\\n}\\n\\nfunction post(url, data) {\\n  // æƒ³è±¡è¿™é‡Œå‘é€äº†ä¸€ä¸ªè¯·æ±‚\\n  console.log('POST /' + url);\\n  console.log(data);\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ShippingForm.js\",\"children\":\"import { memo, useState } from 'react';\\n\\nconst ShippingForm = memo(function ShippingForm({ onSubmit }) {\\n  const [count, setCount] = useState(1);\\n\\n  console.log('Rendering <ShippingForm />');\\n\\n  function handleSubmit(e) {\\n    e.preventDefault();\\n    const formData = new FormData(e.target);\\n    const orderDetails = {\\n      ...Object.fromEntries(formData),\\n      count\\n    };\\n    onSubmit(orderDetails);\\n  }\\n\\n  return (\\n    <form onSubmit={handleSubmit}>\\n      <label>\\n        Number of items:\\n        <button type=\\\"button\\\" onClick={() => setCount(count - 1)}>â€“</button>\\n        {count}\\n        <button type=\\\"button\\\" onClick={() => setCount(count + 1)}>+</button>\\n      </label>\\n      <label>\\n        Street:\\n        <input name=\\\"street\\\" />\\n      </label>\\n      <label>\\n        City:\\n        <input name=\\\"city\\\" />\\n      </label>\\n      <label>\\n        Postal code:\\n        <input name=\\\"zipCode\\\" />\\n      </label>\\n      <button type=\\\"submit\\\">Submit</button>\\n    </form>\\n  );\\n});\\n\\nexport default ShippingForm;\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"label {\\n  display: block; margin-top: 10px;\\n}\\n\\ninput {\\n  margin-left: 5px;\\n}\\n\\nbutton[type=\\\"button\\\"] {\\n  margin: 5px;\\n}\\n\\n.dark {\\n  background-color: black;\\n  color: white;\\n}\\n\\n.light {\\n  background-color: white;\\n  color: black;\\n}\\n\"}]}]]}],[\"$r\",\"p\",null,{\"children\":\"å¾ˆå¤šæ—¶å€™ï¼Œæ²¡æœ‰è®°å¿†åŒ–çš„ä»£ç è¿è¡Œå¾—ä¹Ÿå¾ˆå¥½ã€‚å¦‚æœä½ çš„äº¤äº’å·²ç»è¶³å¤Ÿå¿«äº†ï¼Œå°±ä¸å¿…å»ä½¿ç”¨è®°å¿†åŒ–ã€‚\"}],[\"$r\",\"p\",null,{\"children\":[\"æ³¨æ„ï¼Œå¦‚æœä½ éœ€è¦åœ¨ç”Ÿäº§æ¨¡å¼ä¸‹è¿è¡Œ Reactï¼Œè¯·ç¦ç”¨ \",[\"$r\",\"a\",null,{\"href\":\"/learn/react-developer-tools\",\"children\":\"React å¼€å‘è€…å·¥å…·\"}],\"ï¼Œå¹¶ä½¿ç”¨ä¸ç”¨æˆ·ç±»ä¼¼çš„è®¾å¤‡ï¼Œä»¥ä¾¿çœŸå®åœ°äº†è§£å®é™…å‡æ…¢åº”ç”¨é€Ÿåº¦çš„å› ç´ ã€‚\"]}],[\"$r\",\"Solution\",null,{}]]}],[\"$r\",\"MaxWidth\",\"last\",{\"children\":[\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"updating-state-from-a-memoized-callback\",\"children\":\"ä»è®°å¿†åŒ–å›è°ƒä¸­æ›´æ–° state \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"æœ‰æ—¶ï¼Œä½ å¯èƒ½åœ¨è®°å¿†åŒ–å›è°ƒä¸­åŸºäºä¹‹å‰çš„ state æ¥æ›´æ–° stateã€‚\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä¸‹é¢çš„ \",[\"$r\",\"code\",null,{\"children\":\"handleAddTodo\"}],\" å‡½æ•°å°† \",[\"$r\",\"code\",null,{\"children\":\"todos\"}],\" æŒ‡å®šä¸ºä¾èµ–é¡¹ï¼Œå› ä¸ºå®ƒä¼šä»ä¸­è®¡ç®—ä¸‹ä¸€ä¸ª todosï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{6,7}\",\"children\":\"function TodoList() {\\n  const [todos, setTodos] = useState([]);\\n\\n  const handleAddTodo = useCallback((text) => {\\n    const newTodo = { id: nextId++, text };\\n    setTodos([...todos, newTodo]);\\n  }, [todos]);\\n  // ...\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"æˆ‘ä»¬æœŸæœ›è®°å¿†åŒ–å‡½æ•°å…·æœ‰å°½å¯èƒ½å°‘çš„ä¾èµ–ï¼Œå½“ä½ è¯»å– state åªæ˜¯ä¸ºäº†è®¡ç®—ä¸‹ä¸€ä¸ª state æ—¶ï¼Œä½ å¯ä»¥é€šè¿‡ä¼ é€’ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useState#updating-state-based-on-the-previous-state\",\"children\":\"updater function\"}],\" ä»¥ç§»é™¤è¯¥ä¾èµ–ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{6,7}\",\"children\":\"function TodoList() {\\n  const [todos, setTodos] = useState([]);\\n\\n  const handleAddTodo = useCallback((text) => {\\n    const newTodo = { id: nextId++, text };\\n    setTodos(todos => [...todos, newTodo]);\\n  }, []); // âœ… ä¸éœ€è¦ todos ä¾èµ–é¡¹\\n  // ...\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨è¿™é‡Œï¼Œå¹¶ä¸æ˜¯å°† \",[\"$r\",\"code\",null,{\"children\":\"todos\"}],\" ä½œä¸ºä¾èµ–é¡¹å¹¶åœ¨å†…éƒ¨è¯»å–å®ƒï¼Œè€Œæ˜¯ä¼ é€’ä¸€ä¸ªå…³äº \",[\"$r\",\"strong\",null,{\"children\":\"å¦‚ä½•\"}],\" æ›´æ–° state çš„æŒ‡ç¤ºå™¨ (\",[\"$r\",\"code\",null,{\"children\":\"todos => [...todos, newTodo]\"}],\") ç»™ Reactã€‚\",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useState#updating-state-based-on-the-previous-state\",\"children\":\"é˜…è¯»æ›´å¤šæœ‰å…³ updater function çš„å†…å®¹\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"preventing-an-effect-from-firing-too-often\",\"children\":\"é˜²æ­¢é¢‘ç¹è§¦å‘ Effect \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"æœ‰æ—¶ï¼Œä½ æƒ³è¦åœ¨ \",[\"$r\",\"a\",null,{\"href\":\"/learn/synchronizing-with-effects\",\"children\":\"Effect\"}],\" å†…éƒ¨è°ƒç”¨å‡½æ•°ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{4-9,12}\",\"children\":\"function ChatRoom({ roomId }) {\\n  const [message, setMessage] = useState('');\\n\\n  function createOptions() {\\n    return {\\n      serverUrl: 'https://localhost:1234',\\n      roomId: roomId\\n    };\\n  }\\n\\n  useEffect(() => {\\n    const options = createOptions();\\n    const connection = createConnection();\\n    connection.connect();\\n    // ...\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è¿™ä¼šäº§ç”Ÿä¸€ä¸ªé—®é¢˜ï¼Œ\",[\"$r\",\"a\",null,{\"href\":\"/learn/lifecycle-of-reactive-effects#react-verifies-that-you-specified-every-reactive-value-as-a-dependency\",\"children\":\"æ¯ä¸€ä¸ªå“åº”å€¼éƒ½å¿…é¡»å£°æ˜ä¸º Effect çš„ä¾èµ–\"}],\"ã€‚ä½†æ˜¯å¦‚æœå°† \",[\"$r\",\"code\",null,{\"children\":\"createOptions\"}],\" å£°æ˜ä¸ºä¾èµ–ï¼Œå®ƒä¼šå¯¼è‡´ Effect ä¸æ–­é‡æ–°è¿æ¥åˆ°èŠå¤©å®¤ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{6}\",\"children\":\"  useEffect(() => {\\n    const options = createOptions();\\n    const connection = createConnection();\\n    connection.connect();\\n    return () => connection.disconnect();\\n  }, [createOptions]); // ğŸ”´ é—®é¢˜ï¼šè¿™ä¸ªä¾èµ–åœ¨æ¯ä¸€æ¬¡æ¸²æŸ“ä¸­éƒ½ä¼šå‘ç”Ÿæ”¹å˜\\n  // ...\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œéœ€è¦åœ¨ Effect ä¸­å°†è¦è°ƒç”¨çš„å‡½æ•°åŒ…è£¹åœ¨ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" ä¸­ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{4-9,16}\",\"children\":\"function ChatRoom({ roomId }) {\\n  const [message, setMessage] = useState('');\\n\\n  const createOptions = useCallback(() => {\\n    return {\\n      serverUrl: 'https://localhost:1234',\\n      roomId: roomId\\n    };\\n  }, [roomId]); // âœ… ä»…å½“ roomId æ›´æ”¹æ—¶æ›´æ”¹\\n\\n  useEffect(() => {\\n    const options = createOptions();\\n    const connection = createConnection();\\n    connection.connect();\\n    return () => connection.disconnect();\\n  }, [createOptions]); // âœ… ä»…å½“ createOptions æ›´æ”¹æ—¶æ›´æ”¹\\n  // ...\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è¿™å°†ç¡®ä¿å¦‚æœ \",[\"$r\",\"code\",null,{\"children\":\"roomId\"}],\" ç›¸åŒï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"createOptions\"}],\" åœ¨å¤šæ¬¡æ¸²æŸ“ä¸­ä¼šæ˜¯åŒä¸€ä¸ªå‡½æ•°ã€‚\",[\"$r\",\"strong\",null,{\"children\":\"ä½†æ˜¯ï¼Œæœ€å¥½æ¶ˆé™¤å¯¹å‡½æ•°ä¾èµ–é¡¹çš„éœ€æ±‚\"}],\"ã€‚å°†ä½ çš„å‡½æ•°ç§»å…¥ Effect \",[\"$r\",\"strong\",null,{\"children\":\"å†…éƒ¨\"}],\"ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{5-10,16}\",\"children\":\"function ChatRoom({ roomId }) {\\n  const [message, setMessage] = useState('');\\n\\n  useEffect(() => {\\n    function createOptions() { // âœ… æ— éœ€ä½¿ç”¨å›è°ƒæˆ–å‡½æ•°ä¾èµ–ï¼\\n      return {\\n        serverUrl: 'https://localhost:1234',\\n        roomId: roomId\\n      };\\n    }\\n\\n    const options = createOptions();\\n    const connection = createConnection();\\n    connection.connect();\\n    return () => connection.disconnect();\\n  }, [roomId]); // âœ… ä»…å½“ roomId æ›´æ”¹æ—¶æ›´æ”¹\\n  // ...\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ç°åœ¨ä½ çš„ä»£ç å˜å¾—æ›´ç®€å•äº†å¹¶ä¸”ä¸éœ€è¦ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\"ã€‚\",[\"$r\",\"a\",null,{\"href\":\"/learn/removing-effect-dependencies#move-dynamic-objects-and-functions-inside-your-effect\",\"children\":\"é˜…è¯»æ›´å¤šå…³äºç§»é™¤ Effect ä¾èµ–çš„ä¿¡æ¯\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"optimizing-a-custom-hook\",\"children\":\"ä¼˜åŒ–è‡ªå®šä¹‰ Hook\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœä½ æ­£åœ¨ç¼–å†™ä¸€ä¸ª \",[\"$r\",\"a\",null,{\"href\":\"/learn/reusing-logic-with-custom-hooks\",\"children\":\"è‡ªå®šä¹‰ Hook\"}],\"ï¼Œå»ºè®®å°†å®ƒè¿”å›çš„ä»»ä½•å‡½æ•°åŒ…è£¹åœ¨ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" ä¸­ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{4-6,8-10}\",\"children\":\"function useRouter() {\\n  const { dispatch } = useContext(RouterStateContext);\\n\\n  const navigate = useCallback((url) => {\\n    dispatch({ type: 'navigate', url });\\n  }, [dispatch]);\\n\\n  const goBack = useCallback(() => {\\n    dispatch({ type: 'back' });\\n  }, [dispatch]);\\n\\n  return {\\n    navigate,\\n    goBack,\\n  };\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"è¿™ç¡®ä¿äº† Hook çš„ä½¿ç”¨è€…åœ¨éœ€è¦æ—¶èƒ½å¤Ÿä¼˜åŒ–è‡ªå·±çš„ä»£ç ã€‚\"}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"troubleshooting\",\"children\":\"ç–‘éš¾è§£ç­” \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"every-time-my-component-renders-usecallback-returns-a-different-function\",\"children\":[\"æˆ‘çš„ç»„ä»¶æ¯ä¸€æ¬¡æ¸²æŸ“æ—¶, \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" éƒ½è¿”å›äº†å®Œå…¨ä¸åŒçš„å‡½æ•° \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ç¡®ä¿ä½ å·²ç»å°†ä¾èµ–æ•°ç»„æŒ‡å®šä¸ºç¬¬äºŒä¸ªå‚æ•°ï¼\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœä½ å¿˜è®°ä½¿ç”¨ä¾èµ–æ•°ç»„ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" æ¯ä¸€æ¬¡éƒ½å°†è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{7}\",\"children\":\"function ProductPage({ productId, referrer }) {\\n  const handleSubmit = useCallback((orderDetails) => {\\n    post('/product/' + productId + '/buy', {\\n      referrer,\\n      orderDetails,\\n    });\\n  }); // ğŸ”´ æ¯ä¸€æ¬¡éƒ½è¿”å›ä¸€ä¸ªæ–°å‡½æ•°ï¼šæ²¡æœ‰ä¾èµ–é¡¹æ•°ç»„\\n  // ...\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"è¿™æ˜¯å°†ä¾èµ–é¡¹æ•°ç»„ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ä¼ é€’çš„æ›´æ­£ç‰ˆæœ¬ï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{7}\",\"children\":\"function ProductPage({ productId, referrer }) {\\n  const handleSubmit = useCallback((orderDetails) => {\\n    post('/product/' + productId + '/buy', {\\n      referrer,\\n      orderDetails,\\n    });\\n  }, [productId, referrer]); // âœ… å¿…è¦æ—¶è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°\\n  // ...\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"å¦‚æœè¿™æ²¡æœ‰å¸®åŠ©ï¼Œé‚£ä¹ˆé—®é¢˜æ˜¯è‡³å°‘æœ‰ä¸€ä¸ªä¾èµ–é¡¹ä¸ä¹‹å‰çš„æ¸²æŸ“ä¸åŒã€‚ä½ å¯ä»¥é€šè¿‡æ‰‹åŠ¨å°†ä¾èµ–é¡¹è®°å½•åˆ°æ§åˆ¶å°æ¥è°ƒè¯•æ­¤é—®é¢˜ï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{5}\",\"children\":\"  const handleSubmit = useCallback((orderDetails) => {\\n    // ..\\n  }, [productId, referrer]);\\n\\n  console.log([productId, referrer]);\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ç„¶åï¼Œä½ å¯ä»¥åœ¨æ§åˆ¶å°ä¸­å³é”®å•å‡»æ¥è‡ªä¸åŒé‡æ–°æ¸²æŸ“çš„æ•°ç»„ï¼Œå¹¶ä¸ºå®ƒä»¬é€‰æ‹©â€œå­˜å‚¨ä¸ºå…¨å±€å˜é‡â€ã€‚å‡è®¾ç¬¬ä¸€ä¸ªè¢«ä¿å­˜ä¸º \",[\"$r\",\"code\",null,{\"children\":\"temp1\"}],\"ï¼Œç¬¬äºŒä¸ªè¢«ä¿å­˜ä¸º \",[\"$r\",\"code\",null,{\"children\":\"temp2\"}],\"ï¼Œç„¶åä½ å¯ä»¥ä½¿ç”¨æµè§ˆå™¨æ§åˆ¶å°æ£€æŸ¥ä¸¤ä¸ªæ•°ç»„ä¸­çš„æ¯ä¸ªä¾èµ–é¡¹æ˜¯å¦ç›¸åŒï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"Object.is(temp1[0], temp2[0]); // æ•°ç»„ä¹‹é—´çš„ç¬¬ä¸€ä¸ªä¾èµ–å…³ç³»æ˜¯å¦ç›¸åŒï¼Ÿ\\nObject.is(temp1[1], temp2[1]); // æ•°ç»„ä¹‹é—´çš„ç¬¬äºŒä¸ªä¾èµ–å…³ç³»æ˜¯å¦ç›¸åŒï¼Ÿ\\nObject.is(temp1[2], temp2[2]); // æ•°ç»„ä¹‹é—´çš„æ¯ä¸€ä¸ªä¾èµ–å…³ç³»æ˜¯å¦ç›¸åŒ...\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å½“ä½ å‘ç°æ˜¯æŸä¸€ä¸ªä¾èµ–æ€§ç ´åè®°å¿†åŒ–æ—¶ï¼Œè¯·å°è¯•å°†å…¶åˆ é™¤ï¼Œæˆ–è€… \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useMemo#memoizing-a-dependency-of-another-hook\",\"children\":\"ä¹Ÿå¯¹å…¶è¿›è¡Œè®°å¿†åŒ–\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"i-need-to-call-usememo-for-each-list-item-in-a-loop-but-its-not-allowed\",\"children\":[\"æˆ‘éœ€è¦åœ¨å¾ªç¯ä¸­ä¸ºæ¯ä¸€ä¸ªåˆ—è¡¨é¡¹è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\" å‡½æ•°ï¼Œä½†æ˜¯è¿™ä¸è¢«å…è®¸ \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å‡è®¾ \",[\"$r\",\"code\",null,{\"children\":\"Chart\"}],\" ç»„ä»¶è¢«åŒ…è£¹åœ¨ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/memo\",\"children\":[\"$r\",\"code\",null,{\"children\":\"memo\"}]}],\" ä¸­ã€‚ä½ å¸Œæœ›åœ¨ \",[\"$r\",\"code\",null,{\"children\":\"ReportList\"}],\" ç»„ä»¶é‡æ–°æ¸²æŸ“æ—¶è·³è¿‡é‡æ–°æ¸²æŸ“åˆ—è¡¨ä¸­çš„æ¯ä¸ª \",[\"$r\",\"code\",null,{\"children\":\"Chart\"}],\"ã€‚ä½†æ˜¯ï¼Œä½ ä¸èƒ½åœ¨å¾ªç¯ä¸­è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{5-14}\",\"children\":\"function ReportList({ items }) {\\n  return (\\n    <article>\\n      {items.map(item => {\\n        // ğŸ”´ ä½ ä¸èƒ½åœ¨å¾ªç¯ä¸­è°ƒç”¨ useCallbackï¼š\\n        const handleClick = useCallback(() => {\\n          sendReport(item)\\n        }, [item]);\\n\\n        return (\\n          <figure key={item.id}>\\n            <Chart onClick={handleClick} />\\n          </figure>\\n        );\\n      })}\\n    </article>\\n  );\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ç›¸åï¼Œä¸ºå•ä¸ªé¡¹ç›®æå–ä¸€ä¸ªç»„ä»¶ï¼Œç„¶åä½¿ç”¨ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\"ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{5,12-21}\",\"children\":\"function ReportList({ items }) {\\n  return (\\n    <article>\\n      {items.map(item =>\\n        <Report key={item.id} item={item} />\\n      )}\\n    </article>\\n  );\\n}\\n\\nfunction Report({ item }) {\\n  // âœ… åœ¨æœ€é¡¶å±‚è°ƒç”¨ useCallback\\n  const handleClick = useCallback(() => {\\n    sendReport(item)\\n  }, [item]);\\n\\n  return (\\n    <figure>\\n      <Chart onClick={handleClick} />\\n    </figure>\\n  );\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"æˆ–è€…ï¼Œä½ å¯ä»¥åˆ é™¤æœ€åä¸€ä¸ªä»£ç æ®µä¸­çš„ \",[\"$r\",\"code\",null,{\"children\":\"useCallback\"}],\"ï¼Œå¹¶å°† \",[\"$r\",\"code\",null,{\"children\":\"Report\"}],\" æœ¬èº«åŒ…è£…åœ¨ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/memo\",\"children\":[\"$r\",\"code\",null,{\"children\":\"memo\"}]}],\" ä¸­ã€‚å¦‚æœ \",[\"$r\",\"code\",null,{\"children\":\"item\"}],\" props æ²¡æœ‰æ›´æ”¹ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"Report\"}],\" å°†è·³è¿‡é‡æ–°æ¸²æŸ“ï¼Œå› æ­¤ \",[\"$r\",\"code\",null,{\"children\":\"Chart\"}],\" ä¹Ÿå°†è·³è¿‡é‡æ–°æ¸²æŸ“ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{5,6-8,15}\",\"children\":\"function ReportList({ items }) {\\n  // ...\\n}\\n\\nconst Report = memo(function Report({ item }) {\\n  function handleClick() {\\n    sendReport(item);\\n  }\\n\\n  return (\\n    <figure>\\n      <Chart onClick={handleClick} />\\n    </figure>\\n  );\\n});\\n\"}]}]]}]]","meta":{"title":"useCallback"}},"__N_SSG":true}