{"pageProps":{"toc":"[{\"url\":\"#\",\"text\":\"æ¦‚è§ˆ\",\"depth\":2},{\"url\":\"#reference\",\"depth\":2,\"text\":\"å‚è€ƒ \"},{\"url\":\"#suspense\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"<Suspense>\"}],\" \"]},{\"url\":\"#usage\",\"depth\":2,\"text\":\"ç”¨æ³• \"},{\"url\":\"#displaying-a-fallback-while-content-is-loading\",\"depth\":3,\"text\":\"å½“å†…å®¹æ­£åœ¨åŠ è½½æ—¶æ˜¾ç¤ºåå¤‡æ–¹æ¡ˆ \"},{\"url\":\"#revealing-content-together-at-once\",\"depth\":3,\"text\":\"åŒæ—¶å±•ç¤ºå†…å®¹ \"},{\"url\":\"#revealing-nested-content-as-it-loads\",\"depth\":3,\"text\":\"é€æ­¥åŠ è½½å†…å®¹ \"},{\"url\":\"#showing-stale-content-while-fresh-content-is-loading\",\"depth\":3,\"text\":\"åœ¨æ–°å†…å®¹åŠ è½½æ—¶å±•ç¤ºè¿‡æ—¶å†…å®¹ \"},{\"url\":\"#preventing-already-revealed-content-from-hiding\",\"depth\":3,\"text\":\"é˜»æ­¢éšè—å·²ç»æ˜¾ç¤ºçš„å†…å®¹ \"},{\"url\":\"#indicating-that-a-transition-is-happening\",\"depth\":3,\"text\":\"è¡¨æ˜ transition æ­£åœ¨å‘ç”Ÿ \"},{\"url\":\"#resetting-suspense-boundaries-on-navigation\",\"depth\":3,\"text\":\"åœ¨å¯¼èˆªæ—¶é‡ç½® Suspense è¾¹ç•Œ \"},{\"url\":\"#providing-a-fallback-for-server-errors-and-client-only-content\",\"depth\":3,\"text\":\"ä¸ºæœåŠ¡å™¨é”™è¯¯å’Œå®¢æˆ·ç«¯å†…å®¹æä¾›åå¤‡æ–¹æ¡ˆ \"},{\"url\":\"#troubleshooting\",\"depth\":2,\"text\":\"æ•…éšœæ’é™¤ \"},{\"url\":\"#preventing-unwanted-fallbacks\",\"depth\":3,\"text\":\"å¦‚ä½•é˜»æ­¢ UI åœ¨æ›´æ–°æœŸé—´è¢«åå¤‡æ–¹æ¡ˆæ›¿æ¢ \"}]","content":"[[\"$r\",\"MaxWidth\",\"32\",{\"children\":[[\"$r\",\"Intro\",null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"<Suspense>\"}],\" å…è®¸åœ¨å­ç»„ä»¶å®ŒæˆåŠ è½½å‰å±•ç¤ºåå¤‡æ–¹æ¡ˆã€‚\"]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"<Suspense fallback={<Loading />}>\\n  <SomeComponent />\\n</Suspense>\\n\"}]}]]}],\"\\n\",[\"$r\",\"InlineToc\",null,{}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"reference\",\"children\":\"å‚è€ƒ \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"suspense\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"<Suspense>\"}],\" \"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"props\",\"children\":\"å‚æ•° \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"children\"}],\"ï¼šçœŸæ­£çš„ UI æ¸²æŸ“å†…å®¹ã€‚å¦‚æœ \",[\"$r\",\"code\",null,{\"children\":\"children\"}],\" åœ¨æ¸²æŸ“ä¸­è¢«æŒ‚èµ·ï¼ŒSuspense è¾¹ç•Œå°†ä¼šæ¸²æŸ“ \",[\"$r\",\"code\",null,{\"children\":\"fallback\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"fallback\"}],\"ï¼šçœŸæ­£çš„ UI æœªæ¸²æŸ“å®Œæˆæ—¶ä»£æ›¿å…¶æ¸²æŸ“çš„å¤‡ç”¨ UIï¼Œå®ƒå¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆçš„ React èŠ‚ç‚¹ã€‚åå¤‡æ–¹æ¡ˆé€šå¸¸æ˜¯ä¸€ä¸ªè½»é‡çš„å ä½ç¬¦ï¼Œä¾‹å¦‚è¡¨ç¤ºåŠ è½½ä¸­çš„å›¾æ ‡æˆ–è€…éª¨æ¶å±ã€‚å½“ \",[\"$r\",\"code\",null,{\"children\":\"children\"}],\" è¢«æŒ‚èµ·æ—¶ï¼ŒSuspense å°†è‡ªåŠ¨åˆ‡æ¢è‡³æ¸²æŸ“ \",[\"$r\",\"code\",null,{\"children\":\"fallback\"}],\"ï¼›å½“æ•°æ®å‡†å¤‡å¥½æ—¶ï¼Œåˆä¼šè‡ªåŠ¨åˆ‡æ¢è‡³æ¸²æŸ“ \",[\"$r\",\"code\",null,{\"children\":\"children\"}],\"ã€‚å¦‚æœ \",[\"$r\",\"code\",null,{\"children\":\"fallback\"}],\" åœ¨æ¸²æŸ“ä¸­è¢«æŒ‚èµ·ï¼Œé‚£ä¹ˆå°†è‡ªåŠ¨æ¿€æ´»æœ€è¿‘çš„ Suspense è¾¹ç•Œã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"caveats\",\"children\":\"æ³¨æ„ \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":\"åœ¨ç»„ä»¶é¦–æ¬¡æŒ‚è½½å‰ï¼Œå¦‚æœç»„ä»¶è¢«æŒ‚èµ·ï¼Œé‚£ä¹ˆ React å°†ä¸ä¼šä¿ç•™å…¶ä»»ä½•çŠ¶æ€ã€‚å½“ç»„ä»¶å®ŒæˆåŠ è½½åï¼ŒReact å°†ä»å¤´å¼€å§‹é‡æ–°å°è¯•æ¸²æŸ“è¢«æŒ‚èµ·çš„ç»„ä»¶æ ‘ã€‚\"}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"å¦‚æœ Suspense æ­£åœ¨å±•ç¤º React ç»„ä»¶æ ‘ä¸­çš„å†…å®¹ï¼Œé‚£ä¹ˆå½“å†æ¬¡è¢«æŒ‚èµ·æ—¶ï¼Œé™¤éå¯¼è‡´æ­¤å¤„æ›´æ–°æ˜¯ç”± \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/startTransition\",\"children\":[\"$r\",\"code\",null,{\"children\":\"startTransition\"}]}],\" æˆ– \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useDeferredValue\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useDeferredValue\"}]}],\" å¼•èµ·ï¼Œå¦åˆ™ Suspense å°†å±•ç¤º \",[\"$r\",\"code\",null,{\"children\":\"fallback\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"å¦‚æœ React éœ€è¦éšè—è¢«å†æ¬¡æŒ‚èµ·çš„å¯è§å†…å®¹ï¼Œå®ƒå°†æ¸…ç†å†…å®¹æ ‘ä¸­çš„ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useLayoutEffect\",\"children\":\"layout effect\"}],\"ã€‚å½“å†…å®¹å¯ä»¥è¢«å†æ¬¡å±•ç¤ºæ—¶ï¼ŒReact å°†é‡æ–°è§¦å‘ layout effectã€‚è¿™ç¡®ä¿äº†æµ‹é‡ DOM å¸ƒå±€çš„ effect ä¸ä¼šåœ¨å†…å®¹ä¸å¯è§æ—¶è¿è¡Œã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"React å¸¦æœ‰å†…ç½®ä¼˜åŒ–ï¼Œä¾‹å¦‚ \",[\"$r\",\"strong\",null,{\"children\":\"æµå¼æœåŠ¡å™¨æ¸²æŸ“ï¼ˆStreaming Server Renderingï¼‰\"}],\" å’Œ \",[\"$r\",\"strong\",null,{\"children\":\"Selective Hydration\"}],\"ï¼Œå®ƒä»¬å·²ç»ä¸ Suspense é›†æˆã€‚å‚è§ \",[\"$r\",\"a\",null,{\"href\":\"https://github.com/reactwg/react-18/discussions/37\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"æ¶æ„æ¦‚è¿°\"}],\" å¹¶è§‚çœ‹ \",[\"$r\",\"a\",null,{\"href\":\"https://www.youtube.com/watch?v=pj5N-Khihgc\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"æŠ€æœ¯è®²åº§\"}],\" ä»¥äº†è§£æ›´å¤šã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"usage\",\"children\":\"ç”¨æ³• \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"displaying-a-fallback-while-content-is-loading\",\"children\":\"å½“å†…å®¹æ­£åœ¨åŠ è½½æ—¶æ˜¾ç¤ºåå¤‡æ–¹æ¡ˆ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ä½ å¯ä»¥ä½¿ç”¨ Suspense è¾¹ç•ŒåŒ…è£¹ä½ åº”ç”¨çš„ä»»ä½•éƒ¨åˆ†ï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[1, 1, \\\"<Loading />\\\"], [2, 2, \\\"<Albums />\\\"]]\",\"children\":\"<Suspense fallback={<Loading />}>\\n  <Albums />\\n</Suspense>\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"React å°†å±•ç¤º \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":\"åå¤‡æ–¹æ¡ˆ\"}],\" ç›´åˆ° \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":\" children \"}],\" éœ€è¦çš„æ‰€æœ‰ä»£ç å’Œæ•°æ®éƒ½åŠ è½½å®Œæˆã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"Albums\"}],\" ç»„ä»¶åœ¨è·å–ä¸“è¾‘åˆ—è¡¨æ—¶è¢« \",[\"$r\",\"strong\",null,{\"children\":\"æŒ‚èµ·\"}],\"ã€‚åœ¨å®ƒå‡†å¤‡å¥½æ¸²æŸ“å‰ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"Albums\"}],\" ç¥–å…ˆç»„ä»¶ä¸­è·ç¦»å…¶æœ€è¿‘çš„ Suspense å°†å±•ç¤ºåå¤‡æ–¹æ¡ˆ â€”â€” å³ \",[\"$r\",\"code\",null,{\"children\":\"Loading\"}],\" ç»„ä»¶ã€‚å½“æ•°æ®åŠ è½½å®Œæˆæ—¶ï¼ŒReact ä¼šéšè— \",[\"$r\",\"code\",null,{\"children\":\"Loading\"}],\" åå¤‡æ–¹æ¡ˆå¹¶æ¸²æŸ“å¸¦æœ‰æ•°æ®çš„ \",[\"$r\",\"code\",null,{\"children\":\"Albums\"}],\" ç»„ä»¶ã€‚\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\n  \\\"dependencies\\\": {\\n    \\\"react\\\": \\\"experimental\\\",\\n    \\\"react-dom\\\": \\\"experimental\\\"\\n  },\\n  \\\"scripts\\\": {\\n    \\\"start\\\": \\\"react-scripts start\\\",\\n    \\\"build\\\": \\\"react-scripts build\\\",\\n    \\\"test\\\": \\\"react-scripts test --env=jsdom\\\",\\n    \\\"eject\\\": \\\"react-scripts eject\\\"\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js hidden\",\"children\":\"import { useState } from 'react';\\nimport ArtistPage from './ArtistPage.js';\\n\\nexport default function App() {\\n  const [show, setShow] = useState(false);\\n  if (show) {\\n    return (\\n      <ArtistPage\\n        artist={{\\n          id: 'the-beatles',\\n          name: 'The Beatles',\\n        }}\\n      />\\n    );\\n  } else {\\n    return (\\n      <button onClick={() => setShow(true)}>\\n        Open The Beatles artist page\\n      </button>\\n    );\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ArtistPage.js active\",\"children\":\"import { Suspense } from 'react';\\nimport Albums from './Albums.js';\\n\\nexport default function ArtistPage({ artist }) {\\n  return (\\n    <>\\n      <h1>{artist.name}</h1>\\n      <Suspense fallback={<Loading />}>\\n        <Albums artistId={artist.id} />\\n      </Suspense>\\n    </>\\n  );\\n}\\n\\nfunction Loading() {\\n  return <h2>ğŸŒ€ Loading...</h2>;\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Albums.js hidden\",\"children\":\"import { fetchData } from './data.js';\\n\\n// æ³¨æ„ï¼šè¿™ä¸ªç»„ä»¶ä½¿ç”¨äº†ä¸€ä¸ªå®éªŒæ€§çš„ API\\n// è¯¥ API å¹¶æœªåœ¨ React çš„ç¨³å®šç‰ˆæœ¬ä¸­å¯ç”¨\\n\\n// åœ¨å®é™…çš„ä¾‹å­ä¸­ï¼Œä½ å¯ä»¥å°è¯•å·²ç»\\n// ä¸ Suspense é›†æˆçš„æ¡†æ¶ï¼Œä¾‹å¦‚ Relay æˆ– Next.jsã€‚\\n\\nexport default function Albums({ artistId }) {\\n  const albums = use(fetchData(`/${artistId}/albums`));\\n  return (\\n    <ul>\\n      {albums.map(album => (\\n        <li key={album.id}>\\n          {album.title} ({album.year})\\n        </li>\\n      ))}\\n    </ul>\\n  );\\n}\\n\\n// è¿™æ˜¯ä¸€ä¸ªè§£å†³ bug çš„ä¸´æ—¶æ–¹æ¡ˆï¼Œä»¥ä¾¿è®©æ¼”ç¤ºè¿è¡Œèµ·æ¥ã€‚\\n// TODOï¼šå½“ bug ä¿®å¤åï¼Œç”¨çœŸæ­£çš„å®ç°æ›¿æ¢ã€‚\\nfunction use(promise) {\\n  if (promise.status === 'fulfilled') {\\n    return promise.value;\\n  } else if (promise.status === 'rejected') {\\n    throw promise.reason;\\n  } else if (promise.status === 'pending') {\\n    throw promise;\\n  } else {\\n    promise.status = 'pending';\\n    promise.then(\\n      result => {\\n        promise.status = 'fulfilled';\\n        promise.value = result;\\n      },\\n      reason => {\\n        promise.status = 'rejected';\\n        promise.reason = reason;\\n      },      \\n    );\\n    throw promise;\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/data.js hidden\",\"children\":\"// æ³¨æ„ï¼šä½ è¿›è¡Œæ•°æ®è·å–çš„æ–¹å¼å–å†³äº\\n// ä½ ä¸ Suspense é›†æˆçš„æ¡†æ¶ã€‚\\n// é€šå¸¸ï¼Œç¼“å­˜é€»è¾‘ä¼šåœ¨æ¡†æ¶å†…éƒ¨ã€‚\\n\\nlet cache = new Map();\\n\\nexport function fetchData(url) {\\n  if (!cache.has(url)) {\\n    cache.set(url, getData(url));\\n  }\\n  return cache.get(url);\\n}\\n\\nasync function getData(url) {\\n  if (url === '/the-beatles/albums') {\\n    return await getAlbums();\\n  } else {\\n    throw Error('Not implemented');\\n  }\\n}\\n\\nasync function getAlbums() {\\n  // æ·»åŠ ä¸€ä¸ªå‡çš„å»¶è¿Ÿï¼Œä»¥ä¾¿è®©ç­‰å¾…æ›´åŠ æ˜æ˜¾ã€‚\\n  await new Promise(resolve => {\\n    setTimeout(resolve, 3000);\\n  });\\n\\n  return [{\\n    id: 13,\\n    title: 'Let It Be',\\n    year: 1970\\n  }, {\\n    id: 12,\\n    title: 'Abbey Road',\\n    year: 1969\\n  }, {\\n    id: 11,\\n    title: 'Yellow Submarine',\\n    year: 1969\\n  }, {\\n    id: 10,\\n    title: 'The Beatles',\\n    year: 1968\\n  }, {\\n    id: 9,\\n    title: 'Magical Mystery Tour',\\n    year: 1967\\n  }, {\\n    id: 8,\\n    title: 'Sgt. Pepper\\\\'s Lonely Hearts Club Band',\\n    year: 1967\\n  }, {\\n    id: 7,\\n    title: 'Revolver',\\n    year: 1966\\n  }, {\\n    id: 6,\\n    title: 'Rubber Soul',\\n    year: 1965\\n  }, {\\n    id: 5,\\n    title: 'Help!',\\n    year: 1965\\n  }, {\\n    id: 4,\\n    title: 'Beatles For Sale',\\n    year: 1964\\n  }, {\\n    id: 3,\\n    title: 'A Hard Day\\\\'s Night',\\n    year: 1964\\n  }, {\\n    id: 2,\\n    title: 'With The Beatles',\\n    year: 1963\\n  }, {\\n    id: 1,\\n    title: 'Please Please Me',\\n    year: 1963\\n  }];\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"48\",{\"children\":[\"\\n\",[\"$r\",\"Note\",null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"åªæœ‰å¯ç”¨äº† Suspense çš„æ•°æ®æºæ‰ä¼šæ¿€æ´» Suspense ç»„ä»¶\"}],\"ï¼Œå®ƒä»¬åŒ…æ‹¬ï¼š\"]}],[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"æ”¯æŒ Suspense çš„æ¡†æ¶å¦‚ \",[\"$r\",\"a\",null,{\"href\":\"https://relay.dev/docs/guided-tour/rendering/loading-states/\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"Relay\"}],\" å’Œ \",[\"$r\",\"a\",null,{\"href\":\"https://nextjs.org/docs/getting-started/react-essentials\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"Next.js\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"ä½¿ç”¨ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/lazy\",\"children\":[\"$r\",\"code\",null,{\"children\":\"lazy\"}]}],\" æ‡’åŠ è½½ç»„ä»¶ä»£ç ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"ä½¿ç”¨ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/use\",\"children\":[\"$r\",\"code\",null,{\"children\":\"use\"}]}],\" è¯»å– Promise çš„å€¼ã€‚\"]}],\"\\n\"]}],[\"$r\",\"p\",null,{\"children\":[\"Suspense \",[\"$r\",\"strong\",null,{\"children\":\"æ— æ³•\"}],\" æ£€æµ‹åœ¨ Effect æˆ–äº‹ä»¶å¤„ç†ç¨‹åºä¸­è·å–æ•°æ®çš„æƒ…å†µã€‚\"]}],[\"$r\",\"p\",null,{\"children\":[\"åœ¨ä¸Šé¢çš„ \",[\"$r\",\"code\",null,{\"children\":\"Albums\"}],\" ç»„ä»¶ä¸­ï¼Œæ­£ç¡®çš„æ•°æ®åŠ è½½æ–¹æ³•å–å†³äºä½ ä½¿ç”¨çš„æ¡†æ¶ã€‚å¦‚æœä½ ä½¿ç”¨äº†æ”¯æŒ Suspense çš„æ¡†æ¶ï¼Œä½ ä¼šåœ¨å…¶æ•°æ®è·å–æ–‡æ¡£ä¸­æ‰¾åˆ°è¯¦ç»†ä¿¡æ¯ã€‚\"]}],[\"$r\",\"p\",null,{\"children\":\"ç›®å‰å°šä¸æ”¯æŒåœ¨ä¸ä½¿ç”¨å›ºå®šæ¡†æ¶çš„æƒ…å†µä¸‹è¿›è¡Œå¯ç”¨ Suspense çš„æ•°æ®è·å–ã€‚å®ç°æ”¯æŒ Suspense æ•°æ®æºçš„è¦æ±‚æ˜¯ä¸ç¨³å®šçš„ï¼Œä¹Ÿæ²¡æœ‰æ–‡æ¡£ã€‚React å°†åœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­å‘å¸ƒå®˜æ–¹ APIï¼Œç”¨äºä¸ Suspense é›†æˆæ•°æ®æºã€‚\"}]]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"revealing-content-together-at-once\",\"children\":\"åŒæ—¶å±•ç¤ºå†…å®¹ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"é»˜è®¤æƒ…å†µä¸‹ï¼ŒSuspense å†…éƒ¨çš„æ•´æ£µç»„ä»¶æ ‘éƒ½è¢«è§†ä¸ºä¸€ä¸ªå•ç‹¬çš„å•å…ƒã€‚ä¾‹å¦‚ï¼Œå³ä½¿ \",[\"$r\",\"strong\",null,{\"children\":\"åªæœ‰ä¸€ä¸ª\"}],\" ç»„ä»¶å› ç­‰å¾…æ•°æ®è€Œè¢«æŒ‚èµ·ï¼ŒSuspense å†…éƒ¨çš„æ•´æ£µç»„ä»¶æ ‘ä¸­çš„ \",[\"$r\",\"strong\",null,{\"children\":\"æ‰€æœ‰\"}],\" çš„ç»„ä»¶éƒ½å°†è¢«æ›¿æ¢ä¸ºåŠ è½½ä¸­æŒ‡ç¤ºå™¨ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{2-5}\",\"children\":\"<Suspense fallback={<Loading />}>\\n  <Biography />\\n  <Panel>\\n    <Albums />\\n  </Panel>\\n</Suspense>\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ç„¶åï¼Œå½“å®ƒä»¬éƒ½å‡†å¤‡å¥½å±•ç¤ºæ—¶ï¼Œå®ƒä»¬å°†ä¸€èµ·å‡ºç°ã€‚\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"Biography\"}],\" å’Œ \",[\"$r\",\"code\",null,{\"children\":\"Albums\"}],\" éƒ½ä¼šè·å–ä¸€äº›æ•°æ®ã€‚ä½†æ˜¯ç”±äºå®ƒä»¬éƒ½å¤„äºåŒä¸€ä¸ª Suspense ä¸‹ï¼Œæ‰€ä»¥è¿™äº›ç»„ä»¶æ€»æ˜¯ä¸€èµ·â€œæµ®ç°â€ã€‚\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\n  \\\"dependencies\\\": {\\n    \\\"react\\\": \\\"experimental\\\",\\n    \\\"react-dom\\\": \\\"experimental\\\"\\n  },\\n  \\\"scripts\\\": {\\n    \\\"start\\\": \\\"react-scripts start\\\",\\n    \\\"build\\\": \\\"react-scripts build\\\",\\n    \\\"test\\\": \\\"react-scripts test --env=jsdom\\\",\\n    \\\"eject\\\": \\\"react-scripts eject\\\"\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js hidden\",\"children\":\"import { useState } from 'react';\\nimport ArtistPage from './ArtistPage.js';\\n\\nexport default function App() {\\n  const [show, setShow] = useState(false);\\n  if (show) {\\n    return (\\n      <ArtistPage\\n        artist={{\\n          id: 'the-beatles',\\n          name: 'The Beatles',\\n        }}\\n      />\\n    );\\n  } else {\\n    return (\\n      <button onClick={() => setShow(true)}>\\n        Open The Beatles artist page\\n      </button>\\n    );\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ArtistPage.js active\",\"children\":\"import { Suspense } from 'react';\\nimport Albums from './Albums.js';\\nimport Biography from './Biography.js';\\nimport Panel from './Panel.js';\\n\\nexport default function ArtistPage({ artist }) {\\n  return (\\n    <>\\n      <h1>{artist.name}</h1>\\n      <Suspense fallback={<Loading />}>\\n        <Biography artistId={artist.id} />\\n        <Panel>\\n          <Albums artistId={artist.id} />\\n        </Panel>\\n      </Suspense>\\n    </>\\n  );\\n}\\n\\nfunction Loading() {\\n  return <h2>ğŸŒ€ Loading...</h2>;\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Panel.js\",\"children\":\"export default function Panel({ children }) {\\n  return (\\n    <section className=\\\"panel\\\">\\n      {children}\\n    </section>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Biography.js hidden\",\"children\":\"import { fetchData } from './data.js';\\n\\n// æ³¨æ„ï¼šè¿™ä¸ªç»„ä»¶ä½¿ç”¨äº†ä¸€ä¸ªå®éªŒæ€§çš„ API\\n// è¯¥ API æœªåœ¨ React çš„ç¨³å®šç‰ˆæœ¬ä¸­å¯ç”¨\\n\\n// å¯¹äºä¸€ä¸ªç°å®çš„ä¾‹å­ï¼Œä½ å¯ä»¥å°è¯•ä¸€ä¸ª\\n// ä¸ Suspense é›†æˆçš„æ¡†æ¶ï¼Œä¾‹å¦‚ Relay æˆ– Next.jsã€‚\\n\\nexport default function Biography({ artistId }) {\\n  const bio = use(fetchData(`/${artistId}/bio`));\\n  return (\\n    <section>\\n      <p className=\\\"bio\\\">{bio}</p>\\n    </section>\\n  );\\n}\\n\\n// è¿™æ˜¯ä¸€ä¸ªè§£å†³ bug çš„ä¸´æ—¶æ–¹æ¡ˆï¼Œä»¥ä¾¿è®©æ¼”ç¤ºè¿è¡Œèµ·æ¥ã€‚\\n// TODOï¼šå½“ bug ä¿®å¤åï¼Œç”¨çœŸæ­£çš„å®ç°æ›¿æ¢ã€‚\\nfunction use(promise) {\\n  if (promise.status === 'fulfilled') {\\n    return promise.value;\\n  } else if (promise.status === 'rejected') {\\n    throw promise.reason;\\n  } else if (promise.status === 'pending') {\\n    throw promise;\\n  } else {\\n    promise.status = 'pending';\\n    promise.then(\\n      result => {\\n        promise.status = 'fulfilled';\\n        promise.value = result;\\n      },\\n      reason => {\\n        promise.status = 'rejected';\\n        promise.reason = reason;\\n      },      \\n    );\\n    throw promise;\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Albums.js hidden\",\"children\":\"import { fetchData } from './data.js';\\n\\n// æ³¨æ„ï¼šè¿™ä¸ªç»„ä»¶ä½¿ç”¨äº†ä¸€ä¸ªå®éªŒæ€§çš„ API\\n// è¯¥ API å¹¶æœªåœ¨ React çš„ç¨³å®šç‰ˆæœ¬ä¸­å¯ç”¨\\n\\n// å¯¹äºä¸€ä¸ªç°å®çš„ä¾‹å­ï¼Œä½ å¯ä»¥å°è¯•ä¸€ä¸ª\\n// ä¸ Suspense é›†æˆçš„æ¡†æ¶ï¼Œä¾‹å¦‚ Relay æˆ– Next.jsã€‚\\n\\nexport default function Albums({ artistId }) {\\n  const albums = use(fetchData(`/${artistId}/albums`));\\n  return (\\n    <ul>\\n      {albums.map(album => (\\n        <li key={album.id}>\\n          {album.title} ({album.year})\\n        </li>\\n      ))}\\n    </ul>\\n  );\\n}\\n\\n// è¿™æ˜¯ä¸€ä¸ªè§£å†³ bug çš„ä¸´æ—¶æ–¹æ¡ˆï¼Œä»¥ä¾¿è®©æ¼”ç¤ºè¿è¡Œèµ·æ¥ã€‚\\n// TODOï¼šå½“ bug ä¿®å¤åï¼Œç”¨çœŸæ­£çš„å®ç°æ›¿æ¢ã€‚\\nfunction use(promise) {\\n  if (promise.status === 'fulfilled') {\\n    return promise.value;\\n  } else if (promise.status === 'rejected') {\\n    throw promise.reason;\\n  } else if (promise.status === 'pending') {\\n    throw promise;\\n  } else {\\n    promise.status = 'pending';\\n    promise.then(\\n      result => {\\n        promise.status = 'fulfilled';\\n        promise.value = result;\\n      },\\n      reason => {\\n        promise.status = 'rejected';\\n        promise.reason = reason;\\n      },      \\n    );\\n    throw promise;\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/data.js hidden\",\"children\":\"// æ³¨æ„ï¼šä½ è¿›è¡Œæ•°æ®è·å–çš„æ–¹å¼å–å†³äº\\n// ä½ ä¸ Suspense é›†æˆçš„æ¡†æ¶ã€‚\\n// é€šå¸¸ï¼Œç¼“å­˜é€»è¾‘ä¼šåœ¨æ¡†æ¶å†…éƒ¨ã€‚\\n\\nlet cache = new Map();\\n\\nexport function fetchData(url) {\\n  if (!cache.has(url)) {\\n    cache.set(url, getData(url));\\n  }\\n  return cache.get(url);\\n}\\n\\nasync function getData(url) {\\n  if (url === '/the-beatles/albums') {\\n    return await getAlbums();\\n  } else if (url === '/the-beatles/bio') {\\n    return await getBio();\\n  } else {\\n    throw Error('Not implemented');\\n  }\\n}\\n\\nasync function getBio() {\\n  // æ·»åŠ ä¸€ä¸ªå‡çš„å»¶è¿Ÿï¼Œä»¥ä¾¿è®©ç­‰å¾…æ›´åŠ æ˜æ˜¾ã€‚\\n  await new Promise(resolve => {\\n    setTimeout(resolve, 1500);\\n  });\\n\\n  return `The Beatles were an English rock band, \\n    formed in Liverpool in 1960, that comprised \\n    John Lennon, Paul McCartney, George Harrison \\n    and Ringo Starr.`;\\n}\\n\\nasync function getAlbums() {\\n  // æ·»åŠ ä¸€ä¸ªå‡çš„å»¶è¿Ÿï¼Œä»¥ä¾¿è®©ç­‰å¾…æ›´åŠ æ˜æ˜¾ã€‚\\n  await new Promise(resolve => {\\n    setTimeout(resolve, 3000);\\n  });\\n\\n  return [{\\n    id: 13,\\n    title: 'Let It Be',\\n    year: 1970\\n  }, {\\n    id: 12,\\n    title: 'Abbey Road',\\n    year: 1969\\n  }, {\\n    id: 11,\\n    title: 'Yellow Submarine',\\n    year: 1969\\n  }, {\\n    id: 10,\\n    title: 'The Beatles',\\n    year: 1968\\n  }, {\\n    id: 9,\\n    title: 'Magical Mystery Tour',\\n    year: 1967\\n  }, {\\n    id: 8,\\n    title: 'Sgt. Pepper\\\\'s Lonely Hearts Club Band',\\n    year: 1967\\n  }, {\\n    id: 7,\\n    title: 'Revolver',\\n    year: 1966\\n  }, {\\n    id: 6,\\n    title: 'Rubber Soul',\\n    year: 1965\\n  }, {\\n    id: 5,\\n    title: 'Help!',\\n    year: 1965\\n  }, {\\n    id: 4,\\n    title: 'Beatles For Sale',\\n    year: 1964\\n  }, {\\n    id: 3,\\n    title: 'A Hard Day\\\\'s Night',\\n    year: 1964\\n  }, {\\n    id: 2,\\n    title: 'With The Beatles',\\n    year: 1963\\n  }, {\\n    id: 1,\\n    title: 'Please Please Me',\\n    year: 1963\\n  }];\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\".bio { font-style: italic; }\\n\\n.panel {\\n  border: 1px solid #aaa;\\n  border-radius: 6px;\\n  margin-top: 20px;\\n  padding: 10px;\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"68\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åŠ è½½æ•°æ®çš„ç»„ä»¶ä¸å¿…æ˜¯ Suspense è¾¹ç•Œçš„ç›´æ¥å­ç»„ä»¶ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥å°† \",[\"$r\",\"code\",null,{\"children\":\"Biography\"}],\" å’Œ \",[\"$r\",\"code\",null,{\"children\":\"Albums\"}],\" ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°çš„ \",[\"$r\",\"code\",null,{\"children\":\"Details\"}],\" ç»„ä»¶ä¸­â€”â€”è¿™ä¸ä¼šæ”¹å˜å…¶è¡Œä¸ºã€‚\",[\"$r\",\"code\",null,{\"children\":\"Biography\"}],\" å’Œ \",[\"$r\",\"code\",null,{\"children\":\"Albums\"}],\" å…±äº«æœ€è¿‘çš„çˆ¶çº§ \",[\"$r\",\"code\",null,{\"children\":\"<Suspense>\"}],\" è¾¹ç•Œï¼Œå› æ­¤å®ƒä»¬æ˜¯åŒæ—¶æ˜¾ç¤ºçš„ã€‚\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{2,8-11}\",\"children\":\"<Suspense fallback={<Loading />}>\\n  <Details artistId={artist.id} />\\n</Suspense>\\n\\nfunction Details({ artistId }) {\\n  return (\\n    <>\\n      <Biography artistId={artistId} />\\n      <Panel>\\n        <Albums artistId={artistId} />\\n      </Panel>\\n    </>\\n  );\\n}\\n\"}]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"revealing-nested-content-as-it-loads\",\"children\":\"é€æ­¥åŠ è½½å†…å®¹ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å½“ä¸€ä¸ªç»„ä»¶è¢«æŒ‚èµ·æ—¶ï¼Œæœ€è¿‘çš„çˆ¶çº§ \",[\"$r\",\"code\",null,{\"children\":\"Suspense\"}],\" ç»„ä»¶ä¼šå±•ç¤ºåå¤‡æ–¹æ¡ˆã€‚è¿™å…è®¸ä½ åµŒå¥—å¤šä¸ª \",[\"$r\",\"code\",null,{\"children\":\"Suspense\"}],\" ç»„ä»¶åˆ›å»ºä¸€ä¸ªåŠ è½½åºåˆ—ã€‚æ¯ä¸ª \",[\"$r\",\"code\",null,{\"children\":\"Suspense\"}],\" è¾¹ç•Œçš„åå¤‡æ–¹æ¡ˆéƒ½ä¼šåœ¨ä¸‹ä¸€çº§å†…å®¹å¯ç”¨æ—¶å¡«å……ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ç»™ä¸“è¾‘åˆ—è¡¨è®¾ç½®è‡ªå·±çš„åå¤‡æ–¹æ¡ˆ\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{3,7}\",\"children\":\"<Suspense fallback={<BigSpinner />}>\\n  <Biography />\\n  <Suspense fallback={<AlbumsGlimmer />}>\\n    <Panel>\\n      <Albums />\\n    </Panel>\\n  </Suspense>\\n</Suspense>\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è°ƒæ•´ä¹‹åï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"Biography\"}],\" ä¸éœ€è¦â€œç­‰å¾…â€ \",[\"$r\",\"code\",null,{\"children\":\"Albums\"}],\" åŠ è½½å®Œæˆå°±å¯ä»¥å±•ç¤ºã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"åŠ è½½åºåˆ—å°†ä¼šæ˜¯ï¼š\"}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"å¦‚æœ \",[\"$r\",\"code\",null,{\"children\":\"Biography\"}],\" æ²¡æœ‰åŠ è½½å®Œæˆï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"BigSpinner\"}],\" ä¼šæ˜¾ç¤ºåœ¨æ•´ä¸ªå†…å®¹åŒºåŸŸçš„ä½ç½®ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"ä¸€æ—¦ \",[\"$r\",\"code\",null,{\"children\":\"Biography\"}],\" åŠ è½½å®Œæˆï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"BigSpinner\"}],\" ä¼šè¢«å†…å®¹æ›¿æ¢ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"å¦‚æœ \",[\"$r\",\"code\",null,{\"children\":\"Albums\"}],\" æ²¡æœ‰åŠ è½½å®Œæˆï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"AlbumsGlimmer\"}],\" ä¼šæ˜¾ç¤ºåœ¨ \",[\"$r\",\"code\",null,{\"children\":\"Albums\"}],\" å’Œå®ƒçš„çˆ¶çº§ \",[\"$r\",\"code\",null,{\"children\":\"Panel\"}],\" çš„ä½ç½®ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"æœ€åï¼Œä¸€æ—¦ \",[\"$r\",\"code\",null,{\"children\":\"Albums\"}],\" åŠ è½½å®Œæˆï¼Œå®ƒä¼šæ›¿æ¢ \",[\"$r\",\"code\",null,{\"children\":\"AlbumsGlimmer\"}],\"ã€‚\"]}],\"\\n\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\n  \\\"dependencies\\\": {\\n    \\\"react\\\": \\\"experimental\\\",\\n    \\\"react-dom\\\": \\\"experimental\\\"\\n  },\\n  \\\"scripts\\\": {\\n    \\\"start\\\": \\\"react-scripts start\\\",\\n    \\\"build\\\": \\\"react-scripts build\\\",\\n    \\\"test\\\": \\\"react-scripts test --env=jsdom\\\",\\n    \\\"eject\\\": \\\"react-scripts eject\\\"\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js hidden\",\"children\":\"import { useState } from 'react';\\nimport ArtistPage from './ArtistPage.js';\\n\\nexport default function App() {\\n  const [show, setShow] = useState(false);\\n  if (show) {\\n    return (\\n      <ArtistPage\\n        artist={{\\n          id: 'the-beatles',\\n          name: 'The Beatles',\\n        }}\\n      />\\n    );\\n  } else {\\n    return (\\n      <button onClick={() => setShow(true)}>\\n        Open The Beatles artist page\\n      </button>\\n    );\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ArtistPage.js active\",\"children\":\"import { Suspense } from 'react';\\nimport Albums from './Albums.js';\\nimport Biography from './Biography.js';\\nimport Panel from './Panel.js';\\n\\nexport default function ArtistPage({ artist }) {\\n  return (\\n    <>\\n      <h1>{artist.name}</h1>\\n      <Suspense fallback={<BigSpinner />}>\\n        <Biography artistId={artist.id} />\\n        <Suspense fallback={<AlbumsGlimmer />}>\\n          <Panel>\\n            <Albums artistId={artist.id} />\\n          </Panel>\\n        </Suspense>\\n      </Suspense>\\n    </>\\n  );\\n}\\n\\nfunction BigSpinner() {\\n  return <h2>ğŸŒ€ Loading...</h2>;\\n}\\n\\nfunction AlbumsGlimmer() {\\n  return (\\n    <div className=\\\"glimmer-panel\\\">\\n      <div className=\\\"glimmer-line\\\" />\\n      <div className=\\\"glimmer-line\\\" />\\n      <div className=\\\"glimmer-line\\\" />\\n    </div>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Panel.js\",\"children\":\"export default function Panel({ children }) {\\n  return (\\n    <section className=\\\"panel\\\">\\n      {children}\\n    </section>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Biography.js hidden\",\"children\":\"import { fetchData } from './data.js';\\n\\n// æ³¨æ„ï¼šè¿™ä¸ªç»„ä»¶ä½¿ç”¨äº†ä¸€ä¸ªå®éªŒæ€§çš„ API\\n// è¯¥ API å¹¶æœªåœ¨ React çš„ç¨³å®šç‰ˆæœ¬ä¸­å¯ç”¨\\n\\n// å¯¹äºä¸€ä¸ªç°å®çš„ä¾‹å­ï¼Œä½ å¯ä»¥å°è¯•ä¸€ä¸ª\\n// ä¸ Suspense é›†æˆçš„æ¡†æ¶ï¼Œä¾‹å¦‚ Relay æˆ– Next.jsã€‚\\n\\nexport default function Biography({ artistId }) {\\n  const bio = use(fetchData(`/${artistId}/bio`));\\n  return (\\n    <section>\\n      <p className=\\\"bio\\\">{bio}</p>\\n    </section>\\n  );\\n}\\n\\n// è¿™æ˜¯ä¸€ä¸ªè§£å†³ bug çš„ä¸´æ—¶æ–¹æ¡ˆï¼Œä»¥ä¾¿è®©æ¼”ç¤ºè¿è¡Œèµ·æ¥ã€‚\\n// TODOï¼šå½“ bug ä¿®å¤åï¼Œç”¨çœŸæ­£çš„å®ç°æ›¿æ¢ã€‚\\nfunction use(promise) {\\n  if (promise.status === 'fulfilled') {\\n    return promise.value;\\n  } else if (promise.status === 'rejected') {\\n    throw promise.reason;\\n  } else if (promise.status === 'pending') {\\n    throw promise;\\n  } else {\\n    promise.status = 'pending';\\n    promise.then(\\n      result => {\\n        promise.status = 'fulfilled';\\n        promise.value = result;\\n      },\\n      reason => {\\n        promise.status = 'rejected';\\n        promise.reason = reason;\\n      },      \\n    );\\n    throw promise;\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Albums.js hidden\",\"children\":\"import { fetchData } from './data.js';\\n\\n// æ³¨æ„ï¼šè¿™ä¸ªç»„ä»¶ä½¿ç”¨äº†ä¸€ä¸ªå®éªŒæ€§çš„ API\\n// è¯¥ API å¹¶æœªåœ¨ React çš„ç¨³å®šç‰ˆæœ¬ä¸­å¯ç”¨\\n\\n// å¯¹äºä¸€ä¸ªç°å®çš„ä¾‹å­ï¼Œä½ å¯ä»¥å°è¯•ä¸€ä¸ª\\n// ä¸ Suspense é›†æˆçš„æ¡†æ¶ï¼Œä¾‹å¦‚ Relay æˆ– Next.jsã€‚\\n\\nexport default function Albums({ artistId }) {\\n  const albums = use(fetchData(`/${artistId}/albums`));\\n  return (\\n    <ul>\\n      {albums.map(album => (\\n        <li key={album.id}>\\n          {album.title} ({album.year})\\n        </li>\\n      ))}\\n    </ul>\\n  );\\n}\\n\\n// è¿™æ˜¯ä¸€ä¸ªè§£å†³ bug çš„ä¸´æ—¶æ–¹æ¡ˆï¼Œä»¥ä¾¿è®©æ¼”ç¤ºè¿è¡Œèµ·æ¥ã€‚\\n// TODOï¼šå½“ bug ä¿®å¤åï¼Œç”¨çœŸæ­£çš„å®ç°æ›¿æ¢ã€‚\\nfunction use(promise) {\\n  if (promise.status === 'fulfilled') {\\n    return promise.value;\\n  } else if (promise.status === 'rejected') {\\n    throw promise.reason;\\n  } else if (promise.status === 'pending') {\\n    throw promise;\\n  } else {\\n    promise.status = 'pending';\\n    promise.then(\\n      result => {\\n        promise.status = 'fulfilled';\\n        promise.value = result;\\n      },\\n      reason => {\\n        promise.status = 'rejected';\\n        promise.reason = reason;\\n      },      \\n    );\\n    throw promise;\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/data.js hidden\",\"children\":\"// æ³¨æ„ï¼šä½ è¿›è¡Œæ•°æ®è·å–çš„æ–¹å¼å–å†³äº\\n// ä½ ä¸ Suspense é›†æˆçš„æ¡†æ¶ã€‚\\n// é€šå¸¸ï¼Œç¼“å­˜é€»è¾‘ä¼šåœ¨æ¡†æ¶å†…éƒ¨ã€‚\\n\\nlet cache = new Map();\\n\\nexport function fetchData(url) {\\n  if (!cache.has(url)) {\\n    cache.set(url, getData(url));\\n  }\\n  return cache.get(url);\\n}\\n\\nasync function getData(url) {\\n  if (url === '/the-beatles/albums') {\\n    return await getAlbums();\\n  } else if (url === '/the-beatles/bio') {\\n    return await getBio();\\n  } else {\\n    throw Error('Not implemented');\\n  }\\n}\\n\\nasync function getBio() {\\n  // æ·»åŠ ä¸€ä¸ªå‡çš„å»¶è¿Ÿï¼Œä»¥ä¾¿è®©ç­‰å¾…æ›´åŠ æ˜æ˜¾ã€‚\\n  await new Promise(resolve => {\\n    setTimeout(resolve, 500);\\n  });\\n\\n  return `The Beatles were an English rock band, \\n    formed in Liverpool in 1960, that comprised \\n    John Lennon, Paul McCartney, George Harrison \\n    and Ringo Starr.`;\\n}\\n\\nasync function getAlbums() {\\n  // æ·»åŠ ä¸€ä¸ªå‡çš„å»¶è¿Ÿï¼Œä»¥ä¾¿è®©ç­‰å¾…æ›´åŠ æ˜æ˜¾ã€‚\\n  await new Promise(resolve => {\\n    setTimeout(resolve, 3000);\\n  });\\n\\n  return [{\\n    id: 13,\\n    title: 'Let It Be',\\n    year: 1970\\n  }, {\\n    id: 12,\\n    title: 'Abbey Road',\\n    year: 1969\\n  }, {\\n    id: 11,\\n    title: 'Yellow Submarine',\\n    year: 1969\\n  }, {\\n    id: 10,\\n    title: 'The Beatles',\\n    year: 1968\\n  }, {\\n    id: 9,\\n    title: 'Magical Mystery Tour',\\n    year: 1967\\n  }, {\\n    id: 8,\\n    title: 'Sgt. Pepper\\\\'s Lonely Hearts Club Band',\\n    year: 1967\\n  }, {\\n    id: 7,\\n    title: 'Revolver',\\n    year: 1966\\n  }, {\\n    id: 6,\\n    title: 'Rubber Soul',\\n    year: 1965\\n  }, {\\n    id: 5,\\n    title: 'Help!',\\n    year: 1965\\n  }, {\\n    id: 4,\\n    title: 'Beatles For Sale',\\n    year: 1964\\n  }, {\\n    id: 3,\\n    title: 'A Hard Day\\\\'s Night',\\n    year: 1964\\n  }, {\\n    id: 2,\\n    title: 'With The Beatles',\\n    year: 1963\\n  }, {\\n    id: 1,\\n    title: 'Please Please Me',\\n    year: 1963\\n  }];\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\".bio { font-style: italic; }\\n\\n.panel {\\n  border: 1px solid #aaa;\\n  border-radius: 6px;\\n  margin-top: 20px;\\n  padding: 10px;\\n}\\n\\n.glimmer-panel {\\n  border: 1px dashed #aaa;\\n  background: linear-gradient(90deg, rgba(221,221,221,1) 0%, rgba(255,255,255,1) 100%);\\n  border-radius: 6px;\\n  margin-top: 20px;\\n  padding: 10px;\\n}\\n\\n.glimmer-line {\\n  display: block;\\n  width: 60%;\\n  height: 20px;\\n  margin: 10px;\\n  border-radius: 4px;\\n  background: #f0f0f0;\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"80\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":\"Suspense è¾¹ç•Œå…è®¸åè°ƒ UI çš„å“ªäº›éƒ¨åˆ†åº”è¯¥æ€»æ˜¯ä¸€èµ·â€œæµ®ç°â€ï¼Œä»¥åŠå“ªäº›éƒ¨åˆ†åº”è¯¥æŒ‰ç…§åŠ è½½çŠ¶æ€çš„åºåˆ—é€æ­¥æ˜¾ç¤ºæ›´å¤šå†…å®¹ã€‚ä½ å¯ä»¥åœ¨æ ‘çš„ä»»ä½•ä½ç½®æ·»åŠ ã€ç§»åŠ¨æˆ–åˆ é™¤ Suspense è¾¹ç•Œï¼Œè€Œä¸ä¼šå½±å“åº”ç”¨ç¨‹åºçš„å…¶ä½™çš„è¡Œä¸ºã€‚\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ä¸è¦åœ¨æ¯ä¸ªç»„ä»¶å‘¨å›´éƒ½æ”¾ç½® Suspense è¾¹ç•Œã€‚ä¸ºäº†æä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼ŒSuspense è¾¹ç•Œçš„ç²’åº¦åº”è¯¥ä¸æœŸæœ›çš„åŠ è½½ç²’åº¦ç›¸åŒ¹é…ã€‚å¦‚æœä½ ä¸è®¾è®¡å¸ˆåˆä½œï¼Œè¯·è¯¢é—®ä»–ä»¬åº”è¯¥æ”¾ç½®åŠ è½½çŠ¶æ€çš„ä½ç½®â€”â€”ä»–ä»¬å¾ˆå¯èƒ½å·²ç»åœ¨è®¾è®¡çº¿æ¡†å›¾ä¸­åŒ…å«äº†å®ƒä»¬ã€‚\"}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"showing-stale-content-while-fresh-content-is-loading\",\"children\":\"åœ¨æ–°å†…å®¹åŠ è½½æ—¶å±•ç¤ºè¿‡æ—¶å†…å®¹ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"SearchResults\"}],\" ç»„ä»¶åœ¨è·å–æœç´¢ç»“æœæ—¶è¢«æŒ‚èµ·ã€‚è¾“å…¥ \",[\"$r\",\"code\",null,{\"children\":\"\\\"a\\\"\"}],\"ï¼Œç­‰å¾…ç»“æœï¼Œç„¶åå°†å…¶ç¼–è¾‘ä¸º \",[\"$r\",\"code\",null,{\"children\":\"\\\"ab\\\"\"}],\"ã€‚\",[\"$r\",\"code\",null,{\"children\":\"\\\"a\\\"\"}],\" çš„ç»“æœå°†è¢«åŠ è½½ä¸­çš„åå¤‡æ–¹æ¡ˆæ›¿æ¢ã€‚\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\n  \\\"dependencies\\\": {\\n    \\\"react\\\": \\\"experimental\\\",\\n    \\\"react-dom\\\": \\\"experimental\\\"\\n  },\\n  \\\"scripts\\\": {\\n    \\\"start\\\": \\\"react-scripts start\\\",\\n    \\\"build\\\": \\\"react-scripts build\\\",\\n    \\\"test\\\": \\\"react-scripts test --env=jsdom\\\",\\n    \\\"eject\\\": \\\"react-scripts eject\\\"\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { Suspense, useState } from 'react';\\nimport SearchResults from './SearchResults.js';\\n\\nexport default function App() {\\n  const [query, setQuery] = useState('');\\n  return (\\n    <>\\n      <label>\\n        Search albums:\\n        <input value={query} onChange={e => setQuery(e.target.value)} />\\n      </label>\\n      <Suspense fallback={<h2>Loading...</h2>}>\\n        <SearchResults query={query} />\\n      </Suspense>\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/SearchResults.js hidden\",\"children\":\"import { fetchData } from './data.js';\\n\\n// æ³¨æ„ï¼šè¿™ä¸ªç»„ä»¶ä½¿ç”¨äº†ä¸€ä¸ªå®éªŒæ€§çš„ API\\n// è¯¥ API å¹¶æœªåœ¨ React ç¨³å®šç‰ˆæœ¬ä¸­å¯ç”¨\\n\\n// å¯¹äºä¸€ä¸ªç°å®çš„ä¾‹å­ï¼Œä½ å¯ä»¥å°è¯•ä¸€ä¸ª\\n// ä¸ Suspense é›†æˆçš„æ¡†æ¶ï¼Œä¾‹å¦‚ Relay æˆ– Next.jsã€‚\\n\\nexport default function SearchResults({ query }) {\\n  if (query === '') {\\n    return null;\\n  }\\n  const albums = use(fetchData(`/search?q=${query}`));\\n  if (albums.length === 0) {\\n    return <p>No matches for <i>\\\"{query}\\\"</i></p>;\\n  }\\n  return (\\n    <ul>\\n      {albums.map(album => (\\n        <li key={album.id}>\\n          {album.title} ({album.year})\\n        </li>\\n      ))}\\n    </ul>\\n  );\\n}\\n\\n// è¿™æ˜¯ä¸€ä¸ªè§£å†³ bug çš„ä¸´æ—¶æ–¹æ¡ˆï¼Œä»¥ä¾¿è®©æ¼”ç¤ºè¿è¡Œèµ·æ¥ã€‚\\n// TODOï¼šå½“ bug ä¿®å¤åï¼Œç”¨çœŸæ­£çš„å®ç°æ›¿æ¢ã€‚\\nfunction use(promise) {\\n  if (promise.status === 'fulfilled') {\\n    return promise.value;\\n  } else if (promise.status === 'rejected') {\\n    throw promise.reason;\\n  } else if (promise.status === 'pending') {\\n    throw promise;\\n  } else {\\n    promise.status = 'pending';\\n    promise.then(\\n      result => {\\n        promise.status = 'fulfilled';\\n        promise.value = result;\\n      },\\n      reason => {\\n        promise.status = 'rejected';\\n        promise.reason = reason;\\n      },      \\n    );\\n    throw promise;\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/data.js hidden\",\"children\":\"// æ³¨æ„ï¼šä½ è¿›è¡Œæ•°æ®è·å–çš„æ–¹å¼å–å†³äº\\n// ä½ ä¸ Suspense é›†æˆçš„æ¡†æ¶ã€‚\\n// é€šå¸¸ï¼Œç¼“å­˜é€»è¾‘ä¼šåœ¨æ¡†æ¶å†…éƒ¨ã€‚\\n\\nlet cache = new Map();\\n\\nexport function fetchData(url) {\\n  if (!cache.has(url)) {\\n    cache.set(url, getData(url));\\n  }\\n  return cache.get(url);\\n}\\n\\nasync function getData(url) {\\n  if (url.startsWith('/search?q=')) {\\n    return await getSearchResults(url.slice('/search?q='.length));\\n  } else {\\n    throw Error('Not implemented');\\n  }\\n}\\n\\nasync function getSearchResults(query) {\\n  // æ·»åŠ ä¸€ä¸ªå‡çš„å»¶è¿Ÿï¼Œä»¥ä¾¿è®©ç­‰å¾…æ›´åŠ æ˜æ˜¾ã€‚\\n  await new Promise(resolve => {\\n    setTimeout(resolve, 500);\\n  });\\n\\n  const allAlbums = [{\\n    id: 13,\\n    title: 'Let It Be',\\n    year: 1970\\n  }, {\\n    id: 12,\\n    title: 'Abbey Road',\\n    year: 1969\\n  }, {\\n    id: 11,\\n    title: 'Yellow Submarine',\\n    year: 1969\\n  }, {\\n    id: 10,\\n    title: 'The Beatles',\\n    year: 1968\\n  }, {\\n    id: 9,\\n    title: 'Magical Mystery Tour',\\n    year: 1967\\n  }, {\\n    id: 8,\\n    title: 'Sgt. Pepper\\\\'s Lonely Hearts Club Band',\\n    year: 1967\\n  }, {\\n    id: 7,\\n    title: 'Revolver',\\n    year: 1966\\n  }, {\\n    id: 6,\\n    title: 'Rubber Soul',\\n    year: 1965\\n  }, {\\n    id: 5,\\n    title: 'Help!',\\n    year: 1965\\n  }, {\\n    id: 4,\\n    title: 'Beatles For Sale',\\n    year: 1964\\n  }, {\\n    id: 3,\\n    title: 'A Hard Day\\\\'s Night',\\n    year: 1964\\n  }, {\\n    id: 2,\\n    title: 'With The Beatles',\\n    year: 1963\\n  }, {\\n    id: 1,\\n    title: 'Please Please Me',\\n    year: 1963\\n  }];\\n\\n  const lowerQuery = query.trim().toLowerCase();\\n  return allAlbums.filter(album => {\\n    const lowerTitle = album.title.toLowerCase();\\n    return (\\n      lowerTitle.startsWith(lowerQuery) ||\\n      lowerTitle.indexOf(' ' + lowerQuery) !== -1\\n    )\\n  });\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"input { margin: 10px; }\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"94\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä¸€ä¸ªå¸¸è§çš„æ›¿ä»£ UI æ¨¡å¼æ˜¯ \",[\"$r\",\"strong\",null,{\"children\":\"å»¶è¿Ÿ\"}],\" æ›´æ–°åˆ—è¡¨ï¼Œå¹¶åœ¨æ–°çš„ç»“æœå‡†å¤‡å¥½ä¹‹å‰ï¼Œæ€»æ˜¯æ˜¾ç¤ºä¹‹å‰çš„ç»“æœã€‚\",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useDeferredValue\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useDeferredValue\"}]}],\" Hook å…è®¸ä½ ä¼ é€’ä¸€ä¸ªå»¶è¿Ÿç‰ˆæœ¬çš„æŸ¥è¯¢ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{3,11}\",\"children\":\"export default function App() {\\n  const [query, setQuery] = useState('');\\n  const deferredQuery = useDeferredValue(query);\\n  return (\\n    <>\\n      <label>\\n        Search albums:\\n        <input value={query} onChange={e => setQuery(e.target.value)} />\\n      </label>\\n      <Suspense fallback={<h2>Loading...</h2>}>\\n        <SearchResults query={deferredQuery} />\\n      </Suspense>\\n    </>\\n  );\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"query\"}],\" å°†ç«‹å³æ›´æ–°ï¼Œæ‰€ä»¥è¾“å…¥æ¡†ä¼šæ˜¾ç¤ºæ–°çš„å€¼ã€‚ç„¶è€Œï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"deferredQuery\"}],\" å°†ä¿æŒå®ƒä¹‹å‰çš„å€¼ï¼Œç›´åˆ°æ•°æ®åŠ è½½å®Œæˆï¼Œæ‰€ä»¥ \",[\"$r\",\"code\",null,{\"children\":\"SearchResults\"}],\" ä¼šæ˜¾ç¤ºè¿‡æ—¶çš„ç»“æœä¸€ä¼šå„¿ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ä¸ºäº†è®©ç”¨æˆ·æ›´å®¹æ˜“ç†è§£ï¼Œå¯ä»¥åœ¨æ˜¾ç¤ºè¿‡æ—¶çš„ç»“æœåˆ—è¡¨æ—¶æ·»åŠ ä¸€ä¸ªè§†è§‰æŒ‡ç¤ºï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{2}\",\"children\":\"<div style={{\\n  opacity: query !== deferredQuery ? 0.5 : 1 \\n}}>\\n  <SearchResults query={deferredQuery} />\\n</div>\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œè¾“å…¥ \",[\"$r\",\"code\",null,{\"children\":\"\\\"a\\\"\"}],\"ï¼Œç­‰å¾…ç»“æœåŠ è½½ï¼Œç„¶åç¼–è¾‘è¾“å…¥ä¸º \",[\"$r\",\"code\",null,{\"children\":\"\\\"ab\\\"\"}],\"ã€‚æ³¨æ„ï¼Œä½ ç°åœ¨çœ‹åˆ°çš„ä¸æ˜¯ Suspense çš„åå¤‡æ–¹æ¡ˆï¼Œè€Œæ˜¯æš—æ·¡çš„è¿‡æ—¶ç»“æœåˆ—è¡¨ï¼Œç›´åˆ°æ–°çš„ç»“æœåŠ è½½å®Œæˆï¼š\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\n  \\\"dependencies\\\": {\\n    \\\"react\\\": \\\"experimental\\\",\\n    \\\"react-dom\\\": \\\"experimental\\\"\\n  },\\n  \\\"scripts\\\": {\\n    \\\"start\\\": \\\"react-scripts start\\\",\\n    \\\"build\\\": \\\"react-scripts build\\\",\\n    \\\"test\\\": \\\"react-scripts test --env=jsdom\\\",\\n    \\\"eject\\\": \\\"react-scripts eject\\\"\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { Suspense, useState, useDeferredValue } from 'react';\\nimport SearchResults from './SearchResults.js';\\n\\nexport default function App() {\\n  const [query, setQuery] = useState('');\\n  const deferredQuery = useDeferredValue(query);\\n  const isStale = query !== deferredQuery;\\n  return (\\n    <>\\n      <label>\\n        Search albums:\\n        <input value={query} onChange={e => setQuery(e.target.value)} />\\n      </label>\\n      <Suspense fallback={<h2>Loading...</h2>}>\\n        <div style={{ opacity: isStale ? 0.5 : 1 }}>\\n          <SearchResults query={deferredQuery} />\\n        </div>\\n      </Suspense>\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/SearchResults.js hidden\",\"children\":\"import { fetchData } from './data.js';\\n\\n// æ³¨æ„ï¼šè¿™ä¸ªç»„ä»¶ä½¿ç”¨äº†ä¸€ä¸ªå®éªŒæ€§çš„ API\\n// è¯¥ API å¹¶æœªåœ¨ React çš„ç¨³å®šç‰ˆæœ¬ä¸­å¯ç”¨\\n\\n// å¯¹äºä¸€ä¸ªç°å®çš„ä¾‹å­ï¼Œä½ å¯ä»¥å°è¯•ä¸€ä¸ª\\n// ä¸ Suspense é›†æˆçš„æ¡†æ¶ï¼Œä¾‹å¦‚ Relay æˆ– Next.jsã€‚\\n\\nexport default function SearchResults({ query }) {\\n  if (query === '') {\\n    return null;\\n  }\\n  const albums = use(fetchData(`/search?q=${query}`));\\n  if (albums.length === 0) {\\n    return <p>No matches for <i>\\\"{query}\\\"</i></p>;\\n  }\\n  return (\\n    <ul>\\n      {albums.map(album => (\\n        <li key={album.id}>\\n          {album.title} ({album.year})\\n        </li>\\n      ))}\\n    </ul>\\n  );\\n}\\n\\n// è¿™æ˜¯ä¸€ä¸ªè§£å†³ bug çš„ä¸´æ—¶æ–¹æ¡ˆï¼Œä»¥ä¾¿è®©æ¼”ç¤ºè¿è¡Œèµ·æ¥ã€‚\\n// TODOï¼šå½“ bug ä¿®å¤åï¼Œç”¨çœŸæ­£çš„å®ç°æ›¿æ¢ã€‚\\nfunction use(promise) {\\n  if (promise.status === 'fulfilled') {\\n    return promise.value;\\n  } else if (promise.status === 'rejected') {\\n    throw promise.reason;\\n  } else if (promise.status === 'pending') {\\n    throw promise;\\n  } else {\\n    promise.status = 'pending';\\n    promise.then(\\n      result => {\\n        promise.status = 'fulfilled';\\n        promise.value = result;\\n      },\\n      reason => {\\n        promise.status = 'rejected';\\n        promise.reason = reason;\\n      },      \\n    );\\n    throw promise;\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/data.js hidden\",\"children\":\"// æ³¨æ„ï¼šä½ è¿›è¡Œæ•°æ®è·å–çš„æ–¹å¼å–å†³äº\\n// ä½ ä¸ Suspense é›†æˆçš„æ¡†æ¶ã€‚\\n// é€šå¸¸ï¼Œç¼“å­˜é€»è¾‘ä¼šåœ¨æ¡†æ¶å†…éƒ¨ã€‚\\n\\nlet cache = new Map();\\n\\nexport function fetchData(url) {\\n  if (!cache.has(url)) {\\n    cache.set(url, getData(url));\\n  }\\n  return cache.get(url);\\n}\\n\\nasync function getData(url) {\\n  if (url.startsWith('/search?q=')) {\\n    return await getSearchResults(url.slice('/search?q='.length));\\n  } else {\\n    throw Error('Not implemented');\\n  }\\n}\\n\\nasync function getSearchResults(query) {\\n  // æ·»åŠ ä¸€ä¸ªå‡çš„å»¶è¿Ÿï¼Œä»¥ä¾¿è®©ç­‰å¾…æ›´åŠ æ˜æ˜¾ã€‚\\n  await new Promise(resolve => {\\n    setTimeout(resolve, 500);\\n  });\\n\\n  const allAlbums = [{\\n    id: 13,\\n    title: 'Let It Be',\\n    year: 1970\\n  }, {\\n    id: 12,\\n    title: 'Abbey Road',\\n    year: 1969\\n  }, {\\n    id: 11,\\n    title: 'Yellow Submarine',\\n    year: 1969\\n  }, {\\n    id: 10,\\n    title: 'The Beatles',\\n    year: 1968\\n  }, {\\n    id: 9,\\n    title: 'Magical Mystery Tour',\\n    year: 1967\\n  }, {\\n    id: 8,\\n    title: 'Sgt. Pepper\\\\'s Lonely Hearts Club Band',\\n    year: 1967\\n  }, {\\n    id: 7,\\n    title: 'Revolver',\\n    year: 1966\\n  }, {\\n    id: 6,\\n    title: 'Rubber Soul',\\n    year: 1965\\n  }, {\\n    id: 5,\\n    title: 'Help!',\\n    year: 1965\\n  }, {\\n    id: 4,\\n    title: 'Beatles For Sale',\\n    year: 1964\\n  }, {\\n    id: 3,\\n    title: 'A Hard Day\\\\'s Night',\\n    year: 1964\\n  }, {\\n    id: 2,\\n    title: 'With The Beatles',\\n    year: 1963\\n  }, {\\n    id: 1,\\n    title: 'Please Please Me',\\n    year: 1963\\n  }];\\n\\n  const lowerQuery = query.trim().toLowerCase();\\n  return allAlbums.filter(album => {\\n    const lowerTitle = album.title.toLowerCase();\\n    return (\\n      lowerTitle.startsWith(lowerQuery) ||\\n      lowerTitle.indexOf(' ' + lowerQuery) !== -1\\n    )\\n  });\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"input { margin: 10px; }\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"104\",{\"children\":[\"\\n\",[\"$r\",\"Note\",null,{\"children\":[\"$r\",\"p\",null,{\"children\":[\"å»¶è¿Ÿå€¼å’Œ \",[\"$r\",\"a\",null,{\"href\":\"#preventing-already-revealed-content-from-hiding\",\"children\":\"transition\"}],\" éƒ½å¯ä»¥è®©ä½ é¿å…æ˜¾ç¤º Suspense åå¤‡æ–¹æ¡ˆï¼Œè€Œæ˜¯ä½¿ç”¨å†…è”æŒ‡ç¤ºå™¨ã€‚transition å°†æ•´ä¸ªæ›´æ–°æ ‡è®°ä¸ºéç´§æ€¥çš„ï¼Œå› æ­¤å®ƒä»¬é€šå¸¸ç”±æ¡†æ¶å’Œè·¯ç”±åº“ç”¨äºå¯¼èˆªã€‚å¦ä¸€æ–¹é¢ï¼Œå»¶è¿Ÿå€¼åœ¨ä½ å¸Œæœ›å°† UI çš„ä¸€éƒ¨åˆ†æ ‡è®°ä¸ºéç´§æ€¥ï¼Œå¹¶è®©å®ƒâ€œè½åäºâ€ UI çš„å…¶ä½™éƒ¨åˆ†æ—¶éå¸¸æœ‰ç”¨ã€‚\"]}]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"preventing-already-revealed-content-from-hiding\",\"children\":\"é˜»æ­¢éšè—å·²ç»æ˜¾ç¤ºçš„å†…å®¹ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"å½“ä¸€ä¸ªç»„ä»¶è¢«æŒ‚èµ·æ—¶ï¼Œæœ€è¿‘çš„ Suspense è¾¹ç•Œä¼šåˆ‡æ¢åˆ°æ˜¾ç¤ºåå¤‡æ–¹æ¡ˆã€‚å¦‚æœå®ƒå·²ç»æ˜¾ç¤ºäº†ä¸€äº›å†…å®¹ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´ä»¤äººä¸å¿«çš„ç”¨æˆ·ä½“éªŒã€‚è¯•ç€æŒ‰ä¸‹è¿™ä¸ªæŒ‰é’®ï¼š\"}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\n  \\\"dependencies\\\": {\\n    \\\"react\\\": \\\"experimental\\\",\\n    \\\"react-dom\\\": \\\"experimental\\\"\\n  },\\n  \\\"scripts\\\": {\\n    \\\"start\\\": \\\"react-scripts start\\\",\\n    \\\"build\\\": \\\"react-scripts build\\\",\\n    \\\"test\\\": \\\"react-scripts test --env=jsdom\\\",\\n    \\\"eject\\\": \\\"react-scripts eject\\\"\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { Suspense, useState } from 'react';\\nimport IndexPage from './IndexPage.js';\\nimport ArtistPage from './ArtistPage.js';\\nimport Layout from './Layout.js';\\n\\nexport default function App() {\\n  return (\\n    <Suspense fallback={<BigSpinner />}>\\n      <Router />\\n    </Suspense>\\n  );\\n}\\n\\nfunction Router() {\\n  const [page, setPage] = useState('/');\\n\\n  function navigate(url) {\\n    setPage(url);\\n  }\\n\\n  let content;\\n  if (page === '/') {\\n    content = (\\n      <IndexPage navigate={navigate} />\\n    );\\n  } else if (page === '/the-beatles') {\\n    content = (\\n      <ArtistPage\\n        artist={{\\n          id: 'the-beatles',\\n          name: 'The Beatles',\\n        }}\\n      />\\n    );\\n  }\\n  return (\\n    <Layout>\\n      {content}\\n    </Layout>\\n  );\\n}\\n\\nfunction BigSpinner() {\\n  return <h2>ğŸŒ€ Loading...</h2>;\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Layout.js\",\"children\":\"export default function Layout({ children }) {\\n  return (\\n    <div className=\\\"layout\\\">\\n      <section className=\\\"header\\\">\\n        Music Browser\\n      </section>\\n      <main>\\n        {children}\\n      </main>\\n    </div>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/IndexPage.js\",\"children\":\"export default function IndexPage({ navigate }) {\\n  return (\\n    <button onClick={() => navigate('/the-beatles')}>\\n      Open The Beatles artist page\\n    </button>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ArtistPage.js\",\"children\":\"import { Suspense } from 'react';\\nimport Albums from './Albums.js';\\nimport Biography from './Biography.js';\\nimport Panel from './Panel.js';\\n\\nexport default function ArtistPage({ artist }) {\\n  return (\\n    <>\\n      <h1>{artist.name}</h1>\\n      <Biography artistId={artist.id} />\\n      <Suspense fallback={<AlbumsGlimmer />}>\\n        <Panel>\\n          <Albums artistId={artist.id} />\\n        </Panel>\\n      </Suspense>\\n    </>\\n  );\\n}\\n\\nfunction AlbumsGlimmer() {\\n  return (\\n    <div className=\\\"glimmer-panel\\\">\\n      <div className=\\\"glimmer-line\\\" />\\n      <div className=\\\"glimmer-line\\\" />\\n      <div className=\\\"glimmer-line\\\" />\\n    </div>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Albums.js hidden\",\"children\":\"import { fetchData } from './data.js';\\n\\n// æ³¨æ„ï¼šè¿™ä¸ªç»„ä»¶ä½¿ç”¨äº†ä¸€ä¸ªå®éªŒæ€§çš„ API\\n// è¯¥ API å¹¶æœªåœ¨ React çš„ç¨³å®šç‰ˆæœ¬ä¸­å¯ç”¨\\n\\n// å¯¹äºä¸€ä¸ªç°å®çš„ä¾‹å­ï¼Œä½ å¯ä»¥å°è¯•ä¸€ä¸ª\\n// ä¸ Suspense é›†æˆçš„æ¡†æ¶ï¼Œä¾‹å¦‚ Relay æˆ– Next.jsã€‚\\n\\nexport default function Albums({ artistId }) {\\n  const albums = use(fetchData(`/${artistId}/albums`));\\n  return (\\n    <ul>\\n      {albums.map(album => (\\n        <li key={album.id}>\\n          {album.title} ({album.year})\\n        </li>\\n      ))}\\n    </ul>\\n  );\\n}\\n\\n// è¿™æ˜¯ä¸€ä¸ªè§£å†³ bug çš„ä¸´æ—¶æ–¹æ¡ˆï¼Œä»¥ä¾¿è®©æ¼”ç¤ºè¿è¡Œèµ·æ¥ã€‚\\n// TODOï¼šå½“ bug ä¿®å¤åï¼Œç”¨çœŸæ­£çš„å®ç°æ›¿æ¢ã€‚\\nfunction use(promise) {\\n  if (promise.status === 'fulfilled') {\\n    return promise.value;\\n  } else if (promise.status === 'rejected') {\\n    throw promise.reason;\\n  } else if (promise.status === 'pending') {\\n    throw promise;\\n  } else {\\n    promise.status = 'pending';\\n    promise.then(\\n      result => {\\n        promise.status = 'fulfilled';\\n        promise.value = result;\\n      },\\n      reason => {\\n        promise.status = 'rejected';\\n        promise.reason = reason;\\n      },      \\n    );\\n    throw promise;\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Biography.js hidden\",\"children\":\"import { fetchData } from './data.js';\\n\\n// æ³¨æ„ï¼šè¿™ä¸ªç»„ä»¶ä½¿ç”¨äº†ä¸€ä¸ªå®éªŒæ€§çš„ API\\n// è¯¥ API å¹¶æœªåœ¨ React çš„ç¨³å®šç‰ˆæœ¬ä¸­å¯ç”¨\\n\\n// å¯¹äºä¸€ä¸ªç°å®çš„ä¾‹å­ï¼Œä½ å¯ä»¥å°è¯•ä¸€ä¸ª\\n// ä¸ Suspense é›†æˆçš„æ¡†æ¶ï¼Œä¾‹å¦‚ Relay æˆ– Next.jsã€‚\\n\\nexport default function Biography({ artistId }) {\\n  const bio = use(fetchData(`/${artistId}/bio`));\\n  return (\\n    <section>\\n      <p className=\\\"bio\\\">{bio}</p>\\n    </section>\\n  );\\n}\\n\\n// è¿™æ˜¯ä¸€ä¸ªè§£å†³ bug çš„ä¸´æ—¶æ–¹æ¡ˆï¼Œä»¥ä¾¿è®©æ¼”ç¤ºè¿è¡Œèµ·æ¥ã€‚\\n// TODOï¼šå½“ bug ä¿®å¤åï¼Œç”¨çœŸæ­£çš„å®ç°æ›¿æ¢ã€‚\\nfunction use(promise) {\\n  if (promise.status === 'fulfilled') {\\n    return promise.value;\\n  } else if (promise.status === 'rejected') {\\n    throw promise.reason;\\n  } else if (promise.status === 'pending') {\\n    throw promise;\\n  } else {\\n    promise.status = 'pending';\\n    promise.then(\\n      result => {\\n        promise.status = 'fulfilled';\\n        promise.value = result;\\n      },\\n      reason => {\\n        promise.status = 'rejected';\\n        promise.reason = reason;\\n      },      \\n    );\\n    throw promise;\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Panel.js hidden\",\"children\":\"export default function Panel({ children }) {\\n  return (\\n    <section className=\\\"panel\\\">\\n      {children}\\n    </section>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/data.js hidden\",\"children\":\"// æ³¨æ„ï¼šä½ è¿›è¡Œæ•°æ®è·å–çš„æ–¹å¼å–å†³äº\\n// ä½ ä¸ Suspense é›†æˆçš„æ¡†æ¶ã€‚\\n// é€šå¸¸ï¼Œç¼“å­˜é€»è¾‘ä¼šåœ¨æ¡†æ¶å†…éƒ¨ã€‚\\n\\nlet cache = new Map();\\n\\nexport function fetchData(url) {\\n  if (!cache.has(url)) {\\n    cache.set(url, getData(url));\\n  }\\n  return cache.get(url);\\n}\\n\\nasync function getData(url) {\\n  if (url === '/the-beatles/albums') {\\n    return await getAlbums();\\n  } else if (url === '/the-beatles/bio') {\\n    return await getBio();\\n  } else {\\n    throw Error('Not implemented');\\n  }\\n}\\n\\nasync function getBio() {\\n  // æ·»åŠ ä¸€ä¸ªå‡çš„å»¶è¿Ÿï¼Œä»¥ä¾¿è®©ç­‰å¾…æ›´åŠ æ˜æ˜¾ã€‚\\n  await new Promise(resolve => {\\n    setTimeout(resolve, 500);\\n  });\\n\\n  return `The Beatles were an English rock band, \\n    formed in Liverpool in 1960, that comprised \\n    John Lennon, Paul McCartney, George Harrison \\n    and Ringo Starr.`;\\n}\\n\\nasync function getAlbums() {\\n  // æ·»åŠ ä¸€ä¸ªå‡çš„å»¶è¿Ÿï¼Œä»¥ä¾¿è®©ç­‰å¾…æ›´åŠ æ˜æ˜¾ã€‚\\n  await new Promise(resolve => {\\n    setTimeout(resolve, 3000);\\n  });\\n\\n  return [{\\n    id: 13,\\n    title: 'Let It Be',\\n    year: 1970\\n  }, {\\n    id: 12,\\n    title: 'Abbey Road',\\n    year: 1969\\n  }, {\\n    id: 11,\\n    title: 'Yellow Submarine',\\n    year: 1969\\n  }, {\\n    id: 10,\\n    title: 'The Beatles',\\n    year: 1968\\n  }, {\\n    id: 9,\\n    title: 'Magical Mystery Tour',\\n    year: 1967\\n  }, {\\n    id: 8,\\n    title: 'Sgt. Pepper\\\\'s Lonely Hearts Club Band',\\n    year: 1967\\n  }, {\\n    id: 7,\\n    title: 'Revolver',\\n    year: 1966\\n  }, {\\n    id: 6,\\n    title: 'Rubber Soul',\\n    year: 1965\\n  }, {\\n    id: 5,\\n    title: 'Help!',\\n    year: 1965\\n  }, {\\n    id: 4,\\n    title: 'Beatles For Sale',\\n    year: 1964\\n  }, {\\n    id: 3,\\n    title: 'A Hard Day\\\\'s Night',\\n    year: 1964\\n  }, {\\n    id: 2,\\n    title: 'With The Beatles',\\n    year: 1963\\n  }, {\\n    id: 1,\\n    title: 'Please Please Me',\\n    year: 1963\\n  }];\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"main {\\n  min-height: 200px;\\n  padding: 10px;\\n}\\n\\n.layout {\\n  border: 1px solid black;\\n}\\n\\n.header {\\n  background: #222;\\n  padding: 10px;\\n  text-align: center;\\n  color: white;\\n}\\n\\n.bio { font-style: italic; }\\n\\n.panel {\\n  border: 1px solid #aaa;\\n  border-radius: 6px;\\n  margin-top: 20px;\\n  padding: 10px;\\n}\\n\\n.glimmer-panel {\\n  border: 1px dashed #aaa;\\n  background: linear-gradient(90deg, rgba(221,221,221,1) 0%, rgba(255,255,255,1) 100%);\\n  border-radius: 6px;\\n  margin-top: 20px;\\n  padding: 10px;\\n}\\n\\n.glimmer-line {\\n  display: block;\\n  width: 60%;\\n  height: 20px;\\n  margin: 10px;\\n  border-radius: 4px;\\n  background: #f0f0f0;\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"114\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å½“ä½ æŒ‰ä¸‹æŒ‰é’®æ—¶ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"Router\"}],\" ç»„ä»¶æ¸²æŸ“äº† \",[\"$r\",\"code\",null,{\"children\":\"ArtistPage\"}],\" è€Œä¸æ˜¯ \",[\"$r\",\"code\",null,{\"children\":\"IndexPage\"}],\"ã€‚å› ä¸º \",[\"$r\",\"code\",null,{\"children\":\"ArtistPage\"}],\" å†…éƒ¨çš„ä¸€ä¸ªç»„ä»¶è¢«æŒ‚èµ·ï¼Œæ‰€ä»¥æœ€è¿‘çš„ Suspense è¾¹ç•Œå¼€å§‹æ˜¾ç¤ºåå¤‡æ–¹æ¡ˆã€‚æœ€è¿‘çš„ Suspense è¾¹ç•Œåœ¨æ ¹é™„è¿‘ï¼Œæ‰€ä»¥æ•´ä¸ªç«™ç‚¹å¸ƒå±€è¢« \",[\"$r\",\"code\",null,{\"children\":\"BigSpinner\"}],\" æ›¿æ¢äº†ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä¸ºäº†é˜»æ­¢è¿™ç§æƒ…å†µï¼Œä½ å¯ä»¥ä½¿ç”¨ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/startTransition\",\"children\":[\"$r\",\"code\",null,{\"children\":\"startTransition\"}]}],\" å°†å¯¼èˆªçŠ¶æ€æ›´æ–°æ ‡è®°ä¸º \",[\"$r\",\"strong\",null,{\"children\":\"transition\"}],\"ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{5,7}\",\"children\":\"function Router() {\\n  const [page, setPage] = useState('/');\\n\\n  function navigate(url) {\\n    startTransition(() => {\\n      setPage(url);      \\n    });\\n  }\\n  // ...\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è¿™å‘Šè¯‰ React æ­¤ state transition æ˜¯ä¸ç´§æ€¥çš„ï¼Œæœ€å¥½ç»§ç»­æ˜¾ç¤ºä¸Šä¸€é¡µï¼Œè€Œä¸æ˜¯éšè—ä»»ä½•å·²ç»æ˜¾ç¤ºçš„å†…å®¹ã€‚ç°åœ¨ç‚¹å‡»æŒ‰é’®å¹¶ç­‰å¾… \",[\"$r\",\"code\",null,{\"children\":\"Biography\"}],\" åŠ è½½ï¼š\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\n  \\\"dependencies\\\": {\\n    \\\"react\\\": \\\"experimental\\\",\\n    \\\"react-dom\\\": \\\"experimental\\\"\\n  },\\n  \\\"scripts\\\": {\\n    \\\"start\\\": \\\"react-scripts start\\\",\\n    \\\"build\\\": \\\"react-scripts build\\\",\\n    \\\"test\\\": \\\"react-scripts test --env=jsdom\\\",\\n    \\\"eject\\\": \\\"react-scripts eject\\\"\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { Suspense, startTransition, useState } from 'react';\\nimport IndexPage from './IndexPage.js';\\nimport ArtistPage from './ArtistPage.js';\\nimport Layout from './Layout.js';\\n\\nexport default function App() {\\n  return (\\n    <Suspense fallback={<BigSpinner />}>\\n      <Router />\\n    </Suspense>\\n  );\\n}\\n\\nfunction Router() {\\n  const [page, setPage] = useState('/');\\n\\n  function navigate(url) {\\n    startTransition(() => {\\n      setPage(url);\\n    });\\n  }\\n\\n  let content;\\n  if (page === '/') {\\n    content = (\\n      <IndexPage navigate={navigate} />\\n    );\\n  } else if (page === '/the-beatles') {\\n    content = (\\n      <ArtistPage\\n        artist={{\\n          id: 'the-beatles',\\n          name: 'The Beatles',\\n        }}\\n      />\\n    );\\n  }\\n  return (\\n    <Layout>\\n      {content}\\n    </Layout>\\n  );\\n}\\n\\nfunction BigSpinner() {\\n  return <h2>ğŸŒ€ Loading...</h2>;\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Layout.js\",\"children\":\"export default function Layout({ children }) {\\n  return (\\n    <div className=\\\"layout\\\">\\n      <section className=\\\"header\\\">\\n        Music Browser\\n      </section>\\n      <main>\\n        {children}\\n      </main>\\n    </div>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/IndexPage.js\",\"children\":\"export default function IndexPage({ navigate }) {\\n  return (\\n    <button onClick={() => navigate('/the-beatles')}>\\n      Open The Beatles artist page\\n    </button>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ArtistPage.js\",\"children\":\"import { Suspense } from 'react';\\nimport Albums from './Albums.js';\\nimport Biography from './Biography.js';\\nimport Panel from './Panel.js';\\n\\nexport default function ArtistPage({ artist }) {\\n  return (\\n    <>\\n      <h1>{artist.name}</h1>\\n      <Biography artistId={artist.id} />\\n      <Suspense fallback={<AlbumsGlimmer />}>\\n        <Panel>\\n          <Albums artistId={artist.id} />\\n        </Panel>\\n      </Suspense>\\n    </>\\n  );\\n}\\n\\nfunction AlbumsGlimmer() {\\n  return (\\n    <div className=\\\"glimmer-panel\\\">\\n      <div className=\\\"glimmer-line\\\" />\\n      <div className=\\\"glimmer-line\\\" />\\n      <div className=\\\"glimmer-line\\\" />\\n    </div>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Albums.js hidden\",\"children\":\"import { fetchData } from './data.js';\\n\\n// æ³¨æ„ï¼šè¿™ä¸ªç»„ä»¶ä½¿ç”¨äº†ä¸€ä¸ªå®éªŒæ€§çš„ API\\n// è¯¥ API å¹¶æœªåœ¨ React çš„ç¨³å®šç‰ˆæœ¬ä¸­å¯ç”¨\\n\\n// å¯¹äºä¸€ä¸ªç°å®çš„ä¾‹å­ï¼Œä½ å¯ä»¥å°è¯•ä¸€ä¸ª\\n// ä¸ Suspense é›†æˆçš„æ¡†æ¶ï¼Œä¾‹å¦‚ Relay æˆ– Next.jsã€‚\\n\\nexport default function Albums({ artistId }) {\\n  const albums = use(fetchData(`/${artistId}/albums`));\\n  return (\\n    <ul>\\n      {albums.map(album => (\\n        <li key={album.id}>\\n          {album.title} ({album.year})\\n        </li>\\n      ))}\\n    </ul>\\n  );\\n}\\n\\n// è¿™æ˜¯ä¸€ä¸ªè§£å†³ bug çš„ä¸´æ—¶æ–¹æ¡ˆï¼Œä»¥ä¾¿è®©æ¼”ç¤ºè¿è¡Œèµ·æ¥ã€‚\\n// TODOï¼šå½“ bug ä¿®å¤åï¼Œç”¨çœŸæ­£çš„å®ç°æ›¿æ¢ã€‚\\nfunction use(promise) {\\n  if (promise.status === 'fulfilled') {\\n    return promise.value;\\n  } else if (promise.status === 'rejected') {\\n    throw promise.reason;\\n  } else if (promise.status === 'pending') {\\n    throw promise;\\n  } else {\\n    promise.status = 'pending';\\n    promise.then(\\n      result => {\\n        promise.status = 'fulfilled';\\n        promise.value = result;\\n      },\\n      reason => {\\n        promise.status = 'rejected';\\n        promise.reason = reason;\\n      },      \\n    );\\n    throw promise;\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Biography.js hidden\",\"children\":\"import { fetchData } from './data.js';\\n\\n// æ³¨æ„ï¼šè¿™ä¸ªç»„ä»¶ä½¿ç”¨äº†ä¸€ä¸ªå®éªŒæ€§çš„ API\\n// è¯¥ API å¹¶æœªåœ¨ React çš„ç¨³å®šç‰ˆæœ¬ä¸­å¯ç”¨\\n\\n// å¯¹äºä¸€ä¸ªç°å®çš„ä¾‹å­ï¼Œä½ å¯ä»¥å°è¯•ä¸€ä¸ª\\n// ä¸ Suspense é›†æˆçš„æ¡†æ¶ï¼Œä¾‹å¦‚ Relay æˆ– Next.jsã€‚\\n\\nexport default function Biography({ artistId }) {\\n  const bio = use(fetchData(`/${artistId}/bio`));\\n  return (\\n    <section>\\n      <p className=\\\"bio\\\">{bio}</p>\\n    </section>\\n  );\\n}\\n\\n// è¿™æ˜¯ä¸€ä¸ªè§£å†³ bug çš„ä¸´æ—¶æ–¹æ¡ˆï¼Œä»¥ä¾¿è®©æ¼”ç¤ºè¿è¡Œèµ·æ¥ã€‚\\n// TODOï¼šå½“ bug ä¿®å¤åï¼Œç”¨çœŸæ­£çš„å®ç°æ›¿æ¢ã€‚\\nfunction use(promise) {\\n  if (promise.status === 'fulfilled') {\\n    return promise.value;\\n  } else if (promise.status === 'rejected') {\\n    throw promise.reason;\\n  } else if (promise.status === 'pending') {\\n    throw promise;\\n  } else {\\n    promise.status = 'pending';\\n    promise.then(\\n      result => {\\n        promise.status = 'fulfilled';\\n        promise.value = result;\\n      },\\n      reason => {\\n        promise.status = 'rejected';\\n        promise.reason = reason;\\n      },      \\n    );\\n    throw promise;\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Panel.js hidden\",\"children\":\"export default function Panel({ children }) {\\n  return (\\n    <section className=\\\"panel\\\">\\n      {children}\\n    </section>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/data.js hidden\",\"children\":\"// æ³¨æ„ï¼šä½ è¿›è¡Œæ•°æ®è·å–çš„æ–¹å¼å–å†³äº\\n// ä½ ä¸ Suspense é›†æˆçš„æ¡†æ¶ã€‚\\n// é€šå¸¸ï¼Œç¼“å­˜é€»è¾‘ä¼šåœ¨æ¡†æ¶å†…éƒ¨ã€‚\\n\\nlet cache = new Map();\\n\\nexport function fetchData(url) {\\n  if (!cache.has(url)) {\\n    cache.set(url, getData(url));\\n  }\\n  return cache.get(url);\\n}\\n\\nasync function getData(url) {\\n  if (url === '/the-beatles/albums') {\\n    return await getAlbums();\\n  } else if (url === '/the-beatles/bio') {\\n    return await getBio();\\n  } else {\\n    throw Error('Not implemented');\\n  }\\n}\\n\\nasync function getBio() {\\n  // æ·»åŠ ä¸€ä¸ªå‡çš„å»¶è¿Ÿï¼Œä»¥ä¾¿è®©ç­‰å¾…æ›´åŠ æ˜æ˜¾ã€‚\\n  await new Promise(resolve => {\\n    setTimeout(resolve, 500);\\n  });\\n\\n  return `The Beatles were an English rock band, \\n    formed in Liverpool in 1960, that comprised \\n    John Lennon, Paul McCartney, George Harrison \\n    and Ringo Starr.`;\\n}\\n\\nasync function getAlbums() {\\n  // æ·»åŠ ä¸€ä¸ªå‡çš„å»¶è¿Ÿï¼Œä»¥ä¾¿è®©ç­‰å¾…æ›´åŠ æ˜æ˜¾ã€‚\\n  await new Promise(resolve => {\\n    setTimeout(resolve, 3000);\\n  });\\n\\n  return [{\\n    id: 13,\\n    title: 'Let It Be',\\n    year: 1970\\n  }, {\\n    id: 12,\\n    title: 'Abbey Road',\\n    year: 1969\\n  }, {\\n    id: 11,\\n    title: 'Yellow Submarine',\\n    year: 1969\\n  }, {\\n    id: 10,\\n    title: 'The Beatles',\\n    year: 1968\\n  }, {\\n    id: 9,\\n    title: 'Magical Mystery Tour',\\n    year: 1967\\n  }, {\\n    id: 8,\\n    title: 'Sgt. Pepper\\\\'s Lonely Hearts Club Band',\\n    year: 1967\\n  }, {\\n    id: 7,\\n    title: 'Revolver',\\n    year: 1966\\n  }, {\\n    id: 6,\\n    title: 'Rubber Soul',\\n    year: 1965\\n  }, {\\n    id: 5,\\n    title: 'Help!',\\n    year: 1965\\n  }, {\\n    id: 4,\\n    title: 'Beatles For Sale',\\n    year: 1964\\n  }, {\\n    id: 3,\\n    title: 'A Hard Day\\\\'s Night',\\n    year: 1964\\n  }, {\\n    id: 2,\\n    title: 'With The Beatles',\\n    year: 1963\\n  }, {\\n    id: 1,\\n    title: 'Please Please Me',\\n    year: 1963\\n  }];\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"main {\\n  min-height: 200px;\\n  padding: 10px;\\n}\\n\\n.layout {\\n  border: 1px solid black;\\n}\\n\\n.header {\\n  background: #222;\\n  padding: 10px;\\n  text-align: center;\\n  color: white;\\n}\\n\\n.bio { font-style: italic; }\\n\\n.panel {\\n  border: 1px solid #aaa;\\n  border-radius: 6px;\\n  margin-top: 20px;\\n  padding: 10px;\\n}\\n\\n.glimmer-panel {\\n  border: 1px dashed #aaa;\\n  background: linear-gradient(90deg, rgba(221,221,221,1) 0%, rgba(255,255,255,1) 100%);\\n  border-radius: 6px;\\n  margin-top: 20px;\\n  padding: 10px;\\n}\\n\\n.glimmer-line {\\n  display: block;\\n  width: 60%;\\n  height: 20px;\\n  margin: 10px;\\n  border-radius: 4px;\\n  background: #f0f0f0;\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"126\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"transition å¹¶ä¸ä¼šç­‰å¾… \",[\"$r\",\"strong\",null,{\"children\":\"æ‰€æœ‰\"}],\" å†…å®¹åŠ è½½å®Œæˆã€‚å®ƒåªä¼šç­‰å¾…è¶³å¤Ÿé•¿çš„æ—¶é—´ï¼Œä»¥é¿å…éšè—å·²ç»æ˜¾ç¤ºçš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œç½‘ç«™ \",[\"$r\",\"code\",null,{\"children\":\"Layout\"}],\" å·²ç»æ˜¾ç¤ºï¼Œæ‰€ä»¥å°†å…¶éšè—åœ¨åŠ è½½ä¸­æŒ‡ç¤ºå™¨åé¢æ˜¯ä¸å¥½çš„ã€‚ç„¶è€Œï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"Albums\"}],\" å‘¨å›´çš„åµŒå¥— \",[\"$r\",\"code\",null,{\"children\":\"Suspense\"}],\" è¾¹ç•Œæ˜¯æ–°å‡ºç°çš„ï¼Œæ‰€ä»¥ transition ä¸ä¼šç­‰å¾…å®ƒã€‚\"]}],\"\\n\",[\"$r\",\"Note\",null,{\"children\":[\"$r\",\"p\",null,{\"children\":\"å¯ç”¨äº† Suspense çš„è·¯ç”±åœ¨é»˜è®¤æƒ…å†µä¸‹ä¼šå°†å¯¼èˆªæ›´æ–°åŒ…è£…è‡³ transition ä¸­ã€‚\"}]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"indicating-that-a-transition-is-happening\",\"children\":\"è¡¨æ˜ transition æ­£åœ¨å‘ç”Ÿ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå½“ä½ ç‚¹å‡»æŒ‰é’®ï¼Œæ²¡æœ‰ä»»ä½•è§†è§‰æŒ‡ç¤ºè¡¨æ˜å¯¼èˆªæ­£åœ¨è¿›è¡Œã€‚ä¸ºäº†æ·»åŠ æŒ‡ç¤ºå™¨ï¼Œä½ å¯ä»¥ç”¨ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useTransition\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useTransition\"}]}],\" æ›¿æ¢ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/startTransition\",\"children\":[\"$r\",\"code\",null,{\"children\":\"startTransition\"}]}],\"ï¼Œå®ƒä¼šç»™ä½ ä¸€ä¸ªå¸ƒå°”å€¼ \",[\"$r\",\"code\",null,{\"children\":\"isPending\"}],\"ã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå®ƒè¢«ç”¨äºå½“ transition å‘ç”Ÿæ—¶æ”¹å˜ç½‘ç«™å¤´éƒ¨çš„æ ·å¼ï¼š\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\n  \\\"dependencies\\\": {\\n    \\\"react\\\": \\\"experimental\\\",\\n    \\\"react-dom\\\": \\\"experimental\\\"\\n  },\\n  \\\"scripts\\\": {\\n    \\\"start\\\": \\\"react-scripts start\\\",\\n    \\\"build\\\": \\\"react-scripts build\\\",\\n    \\\"test\\\": \\\"react-scripts test --env=jsdom\\\",\\n    \\\"eject\\\": \\\"react-scripts eject\\\"\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { Suspense, useState, useTransition } from 'react';\\nimport IndexPage from './IndexPage.js';\\nimport ArtistPage from './ArtistPage.js';\\nimport Layout from './Layout.js';\\n\\nexport default function App() {\\n  return (\\n    <Suspense fallback={<BigSpinner />}>\\n      <Router />\\n    </Suspense>\\n  );\\n}\\n\\nfunction Router() {\\n  const [page, setPage] = useState('/');\\n  const [isPending, startTransition] = useTransition();\\n\\n  function navigate(url) {\\n    startTransition(() => {\\n      setPage(url);\\n    });\\n  }\\n\\n  let content;\\n  if (page === '/') {\\n    content = (\\n      <IndexPage navigate={navigate} />\\n    );\\n  } else if (page === '/the-beatles') {\\n    content = (\\n      <ArtistPage\\n        artist={{\\n          id: 'the-beatles',\\n          name: 'The Beatles',\\n        }}\\n      />\\n    );\\n  }\\n  return (\\n    <Layout isPending={isPending}>\\n      {content}\\n    </Layout>\\n  );\\n}\\n\\nfunction BigSpinner() {\\n  return <h2>ğŸŒ€ Loading...</h2>;\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Layout.js\",\"children\":\"export default function Layout({ children, isPending }) {\\n  return (\\n    <div className=\\\"layout\\\">\\n      <section className=\\\"header\\\" style={{\\n        opacity: isPending ? 0.7 : 1\\n      }}>\\n        Music Browser\\n      </section>\\n      <main>\\n        {children}\\n      </main>\\n    </div>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/IndexPage.js\",\"children\":\"export default function IndexPage({ navigate }) {\\n  return (\\n    <button onClick={() => navigate('/the-beatles')}>\\n      Open The Beatles artist page\\n    </button>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/ArtistPage.js\",\"children\":\"import { Suspense } from 'react';\\nimport Albums from './Albums.js';\\nimport Biography from './Biography.js';\\nimport Panel from './Panel.js';\\n\\nexport default function ArtistPage({ artist }) {\\n  return (\\n    <>\\n      <h1>{artist.name}</h1>\\n      <Biography artistId={artist.id} />\\n      <Suspense fallback={<AlbumsGlimmer />}>\\n        <Panel>\\n          <Albums artistId={artist.id} />\\n        </Panel>\\n      </Suspense>\\n    </>\\n  );\\n}\\n\\nfunction AlbumsGlimmer() {\\n  return (\\n    <div className=\\\"glimmer-panel\\\">\\n      <div className=\\\"glimmer-line\\\" />\\n      <div className=\\\"glimmer-line\\\" />\\n      <div className=\\\"glimmer-line\\\" />\\n    </div>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Albums.js hidden\",\"children\":\"import { fetchData } from './data.js';\\n\\n// æ³¨æ„ï¼šè¿™ä¸ªç»„ä»¶ä½¿ç”¨äº†ä¸€ä¸ªå®éªŒæ€§çš„ API\\n// è¯¥ API å¹¶æœªåœ¨ React çš„ç¨³å®šç‰ˆæœ¬ä¸­å¯ç”¨\\n\\n// å¯¹äºä¸€ä¸ªç°å®çš„ä¾‹å­ï¼Œä½ å¯ä»¥å°è¯•ä¸€ä¸ª\\n// ä¸ Suspense é›†æˆçš„æ¡†æ¶ï¼Œä¾‹å¦‚ Relay æˆ– Next.jsã€‚\\n\\nexport default function Albums({ artistId }) {\\n  const albums = use(fetchData(`/${artistId}/albums`));\\n  return (\\n    <ul>\\n      {albums.map(album => (\\n        <li key={album.id}>\\n          {album.title} ({album.year})\\n        </li>\\n      ))}\\n    </ul>\\n  );\\n}\\n\\n// è¿™æ˜¯ä¸€ä¸ªè§£å†³ bug çš„ä¸´æ—¶æ–¹æ¡ˆï¼Œä»¥ä¾¿è®©æ¼”ç¤ºè¿è¡Œèµ·æ¥ã€‚\\n// TODOï¼šå½“ bug ä¿®å¤åï¼Œç”¨çœŸæ­£çš„å®ç°æ›¿æ¢ã€‚\\nfunction use(promise) {\\n  if (promise.status === 'fulfilled') {\\n    return promise.value;\\n  } else if (promise.status === 'rejected') {\\n    throw promise.reason;\\n  } else if (promise.status === 'pending') {\\n    throw promise;\\n  } else {\\n    promise.status = 'pending';\\n    promise.then(\\n      result => {\\n        promise.status = 'fulfilled';\\n        promise.value = result;\\n      },\\n      reason => {\\n        promise.status = 'rejected';\\n        promise.reason = reason;\\n      },      \\n    );\\n    throw promise;\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Biography.js hidden\",\"children\":\"import { fetchData } from './data.js';\\n\\n// æ³¨æ„ï¼šè¿™ä¸ªç»„ä»¶ä½¿ç”¨äº†ä¸€ä¸ªå®éªŒæ€§çš„ API\\n// è¯¥ API å¹¶æœªåœ¨ React çš„ç¨³å®šç‰ˆæœ¬ä¸­å¯ç”¨\\n\\n// å¯¹äºä¸€ä¸ªç°å®çš„ä¾‹å­ï¼Œä½ å¯ä»¥å°è¯•ä¸€ä¸ª\\n// ä¸ Suspense é›†æˆçš„æ¡†æ¶ï¼Œä¾‹å¦‚ Relay æˆ– Next.jsã€‚\\n\\nexport default function Biography({ artistId }) {\\n  const bio = use(fetchData(`/${artistId}/bio`));\\n  return (\\n    <section>\\n      <p className=\\\"bio\\\">{bio}</p>\\n    </section>\\n  );\\n}\\n\\n// è¿™æ˜¯ä¸€ä¸ªè§£å†³ bug çš„ä¸´æ—¶æ–¹æ¡ˆï¼Œä»¥ä¾¿è®©æ¼”ç¤ºè¿è¡Œèµ·æ¥ã€‚\\n// TODOï¼šå½“ bug ä¿®å¤åï¼Œç”¨çœŸæ­£çš„å®ç°æ›¿æ¢ã€‚\\nfunction use(promise) {\\n  if (promise.status === 'fulfilled') {\\n    return promise.value;\\n  } else if (promise.status === 'rejected') {\\n    throw promise.reason;\\n  } else if (promise.status === 'pending') {\\n    throw promise;\\n  } else {\\n    promise.status = 'pending';\\n    promise.then(\\n      result => {\\n        promise.status = 'fulfilled';\\n        promise.value = result;\\n      },\\n      reason => {\\n        promise.status = 'rejected';\\n        promise.reason = reason;\\n      },      \\n    );\\n    throw promise;\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Panel.js hidden\",\"children\":\"export default function Panel({ children }) {\\n  return (\\n    <section className=\\\"panel\\\">\\n      {children}\\n    </section>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/data.js hidden\",\"children\":\"// æ³¨æ„ï¼šä½ è¿›è¡Œæ•°æ®è·å–çš„æ–¹å¼å–å†³äº\\n// ä½ ä¸ Suspense é›†æˆçš„æ¡†æ¶ã€‚\\n// é€šå¸¸ï¼Œç¼“å­˜é€»è¾‘ä¼šåœ¨æ¡†æ¶å†…éƒ¨ã€‚\\n\\nlet cache = new Map();\\n\\nexport function fetchData(url) {\\n  if (!cache.has(url)) {\\n    cache.set(url, getData(url));\\n  }\\n  return cache.get(url);\\n}\\n\\nasync function getData(url) {\\n  if (url === '/the-beatles/albums') {\\n    return await getAlbums();\\n  } else if (url === '/the-beatles/bio') {\\n    return await getBio();\\n  } else {\\n    throw Error('Not implemented');\\n  }\\n}\\n\\nasync function getBio() {\\n  // æ·»åŠ ä¸€ä¸ªå‡çš„å»¶è¿Ÿï¼Œä»¥ä¾¿è®©ç­‰å¾…æ›´åŠ æ˜æ˜¾ã€‚\\n  await new Promise(resolve => {\\n    setTimeout(resolve, 500);\\n  });\\n\\n  return `The Beatles were an English rock band, \\n    formed in Liverpool in 1960, that comprised \\n    John Lennon, Paul McCartney, George Harrison \\n    and Ringo Starr.`;\\n}\\n\\nasync function getAlbums() {\\n  // æ·»åŠ ä¸€ä¸ªå‡çš„å»¶è¿Ÿï¼Œä»¥ä¾¿è®©ç­‰å¾…æ›´åŠ æ˜æ˜¾ã€‚\\n  await new Promise(resolve => {\\n    setTimeout(resolve, 3000);\\n  });\\n\\n  return [{\\n    id: 13,\\n    title: 'Let It Be',\\n    year: 1970\\n  }, {\\n    id: 12,\\n    title: 'Abbey Road',\\n    year: 1969\\n  }, {\\n    id: 11,\\n    title: 'Yellow Submarine',\\n    year: 1969\\n  }, {\\n    id: 10,\\n    title: 'The Beatles',\\n    year: 1968\\n  }, {\\n    id: 9,\\n    title: 'Magical Mystery Tour',\\n    year: 1967\\n  }, {\\n    id: 8,\\n    title: 'Sgt. Pepper\\\\'s Lonely Hearts Club Band',\\n    year: 1967\\n  }, {\\n    id: 7,\\n    title: 'Revolver',\\n    year: 1966\\n  }, {\\n    id: 6,\\n    title: 'Rubber Soul',\\n    year: 1965\\n  }, {\\n    id: 5,\\n    title: 'Help!',\\n    year: 1965\\n  }, {\\n    id: 4,\\n    title: 'Beatles For Sale',\\n    year: 1964\\n  }, {\\n    id: 3,\\n    title: 'A Hard Day\\\\'s Night',\\n    year: 1964\\n  }, {\\n    id: 2,\\n    title: 'With The Beatles',\\n    year: 1963\\n  }, {\\n    id: 1,\\n    title: 'Please Please Me',\\n    year: 1963\\n  }];\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"main {\\n  min-height: 200px;\\n  padding: 10px;\\n}\\n\\n.layout {\\n  border: 1px solid black;\\n}\\n\\n.header {\\n  background: #222;\\n  padding: 10px;\\n  text-align: center;\\n  color: white;\\n}\\n\\n.bio { font-style: italic; }\\n\\n.panel {\\n  border: 1px solid #aaa;\\n  border-radius: 6px;\\n  margin-top: 20px;\\n  padding: 10px;\\n}\\n\\n.glimmer-panel {\\n  border: 1px dashed #aaa;\\n  background: linear-gradient(90deg, rgba(221,221,221,1) 0%, rgba(255,255,255,1) 100%);\\n  border-radius: 6px;\\n  margin-top: 20px;\\n  padding: 10px;\\n}\\n\\n.glimmer-line {\\n  display: block;\\n  width: 60%;\\n  height: 20px;\\n  margin: 10px;\\n  border-radius: 4px;\\n  background: #f0f0f0;\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"last\",{\"children\":[\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"resetting-suspense-boundaries-on-navigation\",\"children\":\"åœ¨å¯¼èˆªæ—¶é‡ç½® Suspense è¾¹ç•Œ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨ transition å‘ç”Ÿæ—¶ï¼ŒReact å°†é¿å…éšè—å·²ç»æ˜¾ç¤ºçš„å†…å®¹ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ å¯¼èˆªåˆ°å…·æœ‰ä¸åŒå‚æ•°çš„è·¯ç”±ï¼Œä½ å¯èƒ½æƒ³å‘Šè¯‰ React å®ƒæ˜¯ \",[\"$r\",\"strong\",null,{\"children\":\"ä¸åŒ\"}],\" çš„å†…å®¹ã€‚ä½ å¯ä»¥ç”¨ \",[\"$r\",\"code\",null,{\"children\":\"key\"}],\" è¡¨ç¤ºè¿™ä¸€ç‚¹ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"<ProfilePage key={queryParams.id} />\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"æƒ³æƒ³åœ¨ç”¨æˆ·çš„ä¸ªäººèµ„æ–™é¡µé¢ä¸­å¯¼èˆªï¼Œç„¶åæš‚åœäº†ã€‚å¦‚æœæ›´æ–°è¢«åŒ…è£…åœ¨ transition ä¸­ï¼Œå®ƒå°†ä¸ä¼šè§¦å‘å·²ç»å¯è§å†…å®¹çš„åå¤‡æ–¹æ¡ˆã€‚è¿™æ˜¯é¢„æœŸçš„è¡Œä¸ºã€‚\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ç„¶è€Œï¼Œç°åœ¨æƒ³è±¡ä¸€ä¸‹ä½ åœ¨ä¸¤ä¸ªä¸åŒçš„ç”¨æˆ·èµ„æ–™ä¹‹é—´å¯¼èˆªã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ˜¾ç¤ºåå¤‡æ–¹æ¡ˆæ˜¯æœ‰æ„ä¹‰çš„ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªç”¨æˆ·çš„æ—¶é—´çº¿æ˜¯ä¸å¦ä¸€ä¸ªç”¨æˆ·çš„æ—¶é—´çº¿æ˜¯ \",[\"$r\",\"strong\",null,{\"children\":\"ä¸åŒçš„å†…å®¹\"}],\"ã€‚é€šè¿‡æŒ‡å®šä¸€ä¸ª \",[\"$r\",\"code\",null,{\"children\":\"key\"}],\"ï¼Œä½ å¯ä»¥ç¡®ä¿ React å°†ä¸åŒç”¨æˆ·çš„ä¸ªäººèµ„æ–™è§†ä¸ºä¸åŒçš„ç»„ä»¶ï¼Œå¹¶åœ¨å¯¼èˆªæœŸé—´é‡ç½® Suspense è¾¹ç•Œã€‚é›†æˆ Suspense çš„è·¯ç”±åº”è¯¥è‡ªåŠ¨æ‰§è¡Œæ­¤æ“ä½œã€‚\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"providing-a-fallback-for-server-errors-and-client-only-content\",\"children\":\"ä¸ºæœåŠ¡å™¨é”™è¯¯å’Œå®¢æˆ·ç«¯å†…å®¹æä¾›åå¤‡æ–¹æ¡ˆ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœä½ ä½¿ç”¨è¿‡ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react-dom/server\",\"children\":\"æµå¼æœåŠ¡å™¨æ¸²æŸ“ API\"}],\"ï¼ˆæˆ–ä¾èµ–å®ƒä»¬çš„æ¡†æ¶ï¼‰ï¼ŒReact ä¹Ÿä¼šä½¿ç”¨ä½ çš„ \",[\"$r\",\"code\",null,{\"children\":\"<Suspense>\"}],\" è¾¹ç•Œæ¥å¤„ç†æœåŠ¡å™¨ä¸Šçš„é”™è¯¯ã€‚å¦‚æœç»„ä»¶åœ¨æœåŠ¡å™¨ä¸ŠæŠ›å‡ºé”™è¯¯ï¼ŒReact å°†ä¸ä¼šä¸­æ­¢æœåŠ¡å™¨æ¸²æŸ“ã€‚ç›¸åï¼Œå®ƒå°†æ‰¾åˆ°æœ€æ¥è¿‘çš„ \",[\"$r\",\"code\",null,{\"children\":\"<Suspense>\"}],\" ç»„ä»¶å¹¶å°†å…¶åå¤‡æ–¹æ¡ˆï¼ˆä¾‹å¦‚ä¸€ä¸ªåŠ è½½ä¸­æŒ‡ç¤ºå™¨ï¼‰åŒ…å«åˆ°ç”Ÿæˆçš„æœåŠ¡ç«¯ HTML ä¸­ã€‚ç”¨æˆ·å°†é¦–å…ˆçœ‹åˆ°ä¸€ä¸ªåŠ è½½ä¸­æŒ‡ç¤ºå™¨ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨å®¢æˆ·ç«¯ï¼ŒReact å°†å°è¯•å†æ¬¡æ¸²æŸ“ç›¸åŒçš„ç»„ä»¶ã€‚å¦‚æœå®ƒåœ¨å®¢æˆ·ç«¯ä¹Ÿå‡ºé”™ï¼ŒReact å°†æŠ›å‡ºé”™è¯¯å¹¶æ˜¾ç¤ºæœ€æ¥è¿‘çš„ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/Component#static-getderivedstatefromerror\",\"children\":\"é”™è¯¯è¾¹ç•Œ\"}],\"ã€‚ç„¶è€Œï¼Œå¦‚æœå®ƒåœ¨å®¢æˆ·ç«¯æ²¡æœ‰é”™è¯¯ï¼ŒReact å°†ä¸ä¼šå‘ç”¨æˆ·æ˜¾ç¤ºé”™è¯¯ï¼Œå› ä¸ºå†…å®¹æœ€ç»ˆæˆåŠŸæ˜¾ç¤ºäº†ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ¥é˜²æ­¢ä¸€äº›ç»„ä»¶åœ¨æœåŠ¡ç«¯æ¸²æŸ“ã€‚ä¸ºæ­¤ï¼Œä½ åº”è¯¥åœ¨æœåŠ¡å™¨ç¯å¢ƒä¸­æŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œç„¶åå°†å…¶åŒ…è£…åœ¨ä¸€ä¸ª \",[\"$r\",\"code\",null,{\"children\":\"<Suspense>\"}],\" è¾¹ç•Œä¸­ï¼Œä»è€Œä½¿ç”¨åå¤‡æ–¹æ¡ˆæ›¿æ¢å®ƒä»¬çš„ HTMLï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"<Suspense fallback={<Loading />}>\\n  <Chat />\\n</Suspense>\\n\\nfunction Chat() {\\n  if (typeof window === 'undefined') {\\n    throw Error('Chat should only render on the client.');\\n  }\\n  // â€¦â€¦\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"æœåŠ¡ç«¯ HTML å°†åŒ…å«åŠ è½½ä¸­æŒ‡ç¤ºå™¨ã€‚å®ƒå°†è¢«å®¢æˆ·ç«¯ä¸Šçš„ \",[\"$r\",\"code\",null,{\"children\":\"Chat\"}],\" ç»„ä»¶æ›¿æ¢ã€‚\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"troubleshooting\",\"children\":\"æ•…éšœæ’é™¤ \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"preventing-unwanted-fallbacks\",\"children\":\"å¦‚ä½•é˜»æ­¢ UI åœ¨æ›´æ–°æœŸé—´è¢«åå¤‡æ–¹æ¡ˆæ›¿æ¢ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ä½¿ç”¨åå¤‡æ–¹æ¡ˆæ›¿æ¢ä¸€ä¸ªå¯è§çš„ UI ä¼šå¸¦æ¥ä»¤äººä¸å¿«çš„ç”¨æˆ·ä½“éªŒã€‚å½“ä¸€ä¸ªæ›´æ–°å¯¼è‡´ä¸€ä¸ªç»„ä»¶è¢«æŒ‚èµ·æ—¶ï¼Œè€Œæœ€è¿‘çš„ Suspense è¾¹ç•Œå·²ç»å‘ç”¨æˆ·æ˜¾ç¤ºäº†å†…å®¹æ—¶ï¼Œè¿™ç§æƒ…å†µå¯èƒ½å‘ç”Ÿã€‚\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä¸ºäº†é˜²æ­¢è¿™ç§æƒ…å†µå‘ç”Ÿï¼Œ\",[\"$r\",\"a\",null,{\"href\":\"#preventing-already-revealed-content-from-hiding\",\"children\":[\"ä½¿ç”¨ \",[\"$r\",\"code\",null,{\"children\":\"startTransition\"}],\" å°†æ›´æ–°æ ‡è®°ä¸ºéç´§æ€¥çš„\"]}],\"ã€‚åœ¨ transition æœŸé—´ï¼ŒReact å°†ç­‰å¾…è¶³å¤Ÿçš„æ•°æ®åŠ è½½ï¼Œä»¥é˜²æ­¢ä¸éœ€è¦çš„åå¤‡æ–¹æ¡ˆå‡ºç°ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{2-3,5}\",\"children\":\"function handleNextPageClick() {\\n  // å¦‚æœæ­¤æ›´æ–°è¢«æŒ‚èµ·ï¼Œä¸ä¼šéšè—å·²ç»å±•ç¤ºçš„å†…å®¹\\n  startTransition(() => {\\n    setCurrentPage(currentPage + 1);\\n  });\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è¿™å°†é¿å…éšè—ç°æœ‰å†…å®¹ã€‚ç„¶è€Œï¼Œä»»ä½•æ–°æ¸²æŸ“çš„ \",[\"$r\",\"code\",null,{\"children\":\"Suspense\"}],\" è¾¹ç•Œä»ç„¶ä¼šç«‹å³æ˜¾ç¤ºåå¤‡æ–¹æ¡ˆï¼Œä»¥é¿å…é˜»å¡ UI å¹¶è®©ç”¨æˆ·åœ¨å†…å®¹å¯ç”¨æ—¶çœ‹åˆ°å†…å®¹ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"React åªä¼šåœ¨éç´§æ€¥æ›´æ–°æœŸé—´é˜»æ­¢ä¸å¿…è¦çš„åå¤‡æ–¹æ¡ˆ\"}],\"ã€‚è¿™æ„å‘³ç€å®ƒä¸ä¼šé˜»æ­¢ç´§æ€¥æ›´æ–°çš„ fallbackã€‚ä½ å¿…é¡»ä½¿ç”¨ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/startTransition\",\"children\":[\"$r\",\"code\",null,{\"children\":\"startTransition\"}]}],\" æˆ– \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useDeferredValue\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useDeferredValue\"}]}],\" è¿™æ ·çš„ API æ¥é€‰æ‹©æ€§çš„ä¼˜åŒ–ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœä½ çš„è·¯ç”±é›†æˆäº† Suspenseï¼Œå®ƒå°†ä¼šè‡ªåŠ¨å°†æ›´æ–°åŒ…è£…åˆ° \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/startTransition\",\"children\":[\"$r\",\"code\",null,{\"children\":\"startTransition\"}]}],\" ä¸­ã€‚\"]}]]}]]","meta":{"title":"<Suspense>"}},"__N_SSG":true}