{"pageProps":{"toc":"[{\"url\":\"#\",\"text\":\"æ¦‚è§ˆ\",\"depth\":2},{\"url\":\"#reference\",\"depth\":2,\"text\":\"å‚è€ƒ \"},{\"url\":\"#cache\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"cache(fn)\"}],\" \"]},{\"url\":\"#usage\",\"depth\":2,\"text\":\"ç”¨æ³• \"},{\"url\":\"#cache-expensive-computation\",\"depth\":3,\"text\":\"ç¼“å­˜ä»£ä»·æ˜‚è´µçš„è®¡ç®— \"},{\"url\":\"#take-and-share-snapshot-of-data\",\"depth\":3,\"text\":\"å…±äº«æ•°æ®å¿«ç…§ \"},{\"url\":\"#preload-data\",\"depth\":3,\"text\":\"é¢„åŠ è½½æ•°æ® \"},{\"url\":\"#troubleshooting\",\"depth\":2,\"text\":\"ç–‘éš¾è§£ç­” \"},{\"url\":\"#memoized-function-still-runs\",\"depth\":3,\"text\":\"å°½ç®¡ä¼ é€’çš„æ˜¯ç›¸åŒå‚æ•°ï¼Œæˆ‘çš„è®°å¿†åŒ–å‡½æ•°ä»åœ¨é‡æ–°è¿è¡Œ \"}]","content":"[[\"$r\",\"MaxWidth\",\"last\",{\"children\":[[\"$r\",\"Canary\",null,{\"children\":[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"cache\"}],\" ä»…ä¾›ä¸ \",[\"$r\",\"a\",null,{\"href\":\"/blog/2023/03/22/react-labs-what-we-have-been-working-on-march-2023#react-server-components\",\"children\":\"React æœåŠ¡å™¨ç»„ä»¶\"}],\" ä¸€èµ·ä½¿ç”¨ã€‚è¯·å‚é˜…æ”¯æŒ React æœåŠ¡å™¨ç»„ä»¶çš„ \",[\"$r\",\"a\",null,{\"href\":\"/learn/start-a-new-react-project#bleeding-edge-react-frameworks\",\"children\":\"æ¡†æ¶\"}],\"ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"cache\"}],\" ä»…åœ¨ React çš„ \",[\"$r\",\"a\",null,{\"href\":\"/community/versioning-policy#canary-channel\",\"children\":\"Canary\"}],\" å’Œ \",[\"$r\",\"a\",null,{\"href\":\"/community/versioning-policy#experimental-channel\",\"children\":\"experimental\"}],\" æ¸ é“ä¸­å¯ç”¨ã€‚åœ¨å°† \",[\"$r\",\"code\",null,{\"children\":\"cache\"}],\" ç”¨äºç”Ÿäº§ç¯å¢ƒä¹‹å‰ï¼Œè¯·ç¡®ä¿äº†è§£å…¶é™åˆ¶ã€‚æŸ¥çœ‹æ­¤å¤„äº†è§£æœ‰å…³ \",[\"$r\",\"a\",null,{\"href\":\"/community/versioning-policy#all-release-channels\",\"children\":\"React å‘å¸ƒæ¸ é“çš„æ›´å¤šä¿¡æ¯\"}],\"ã€‚\"]}],\"\\n\"]}],\"\\n\"]}]}],\"\\n\",[\"$r\",\"Intro\",null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"cache\"}],\" å…è®¸ç¼“å­˜æ•°æ®è·å–æˆ–è®¡ç®—çš„ç»“æœã€‚\"]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"const cachedFn = cache(fn);\\n\"}]}]]}],\"\\n\",[\"$r\",\"InlineToc\",null,{}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"reference\",\"children\":\"å‚è€ƒ \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"cache\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"cache(fn)\"}],\" \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨ä»»ä½•ç»„ä»¶ä¹‹å¤–è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"cache\"}],\" ä»¥åˆ›å»ºå¸¦æœ‰ç¼“å­˜çš„å‡½æ•°ç‰ˆæœ¬ã€‚\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{4,7}\",\"children\":\"import {cache} from 'react';\\nimport calculateMetrics from 'lib/metrics';\\n\\nconst getMetrics = cache(calculateMetrics);\\n\\nfunction Chart({data}) {\\n  const report = getMetrics(data);\\n  // ...\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å½“é¦–æ¬¡ä½¿ç”¨ \",[\"$r\",\"code\",null,{\"children\":\"data\"}],\" è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"getMetrics\"}],\" æ—¶ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"getMetrics\"}],\" å°†è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"calculateMetrics(data)\"}],\" å¹¶å°†ç»“æœå­˜å‚¨åœ¨ç¼“å­˜ä¸­ã€‚å¦‚æœå†æ¬¡ä½¿ç”¨ç›¸åŒçš„ \",[\"$r\",\"code\",null,{\"children\":\"data\"}],\" è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"getMetrics\"}],\"ï¼Œå®ƒå°†è¿”å›ç¼“å­˜çš„ç»“æœï¼Œè€Œä¸ä¼šå†æ¬¡è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"calculateMetrics(data)\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"#usage\",\"children\":\"å‚è§ä¸‹æ–¹æ›´å¤šç¤ºä¾‹\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"parameters\",\"children\":\"å‚æ•° \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"fn\"}],\"ï¼šè¦å¯¹å…¶ç»“æœè¿›è¡Œç¼“å­˜çš„å‡½æ•°ã€‚\",[\"$r\",\"code\",null,{\"children\":\"fn\"}],\" å¯ä»¥æ¥å—ä»»ä½•å‚æ•°å¹¶è¿”å›ä»»ä½•å€¼ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"returns\",\"children\":\"è¿”å›å€¼ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"cache\"}],\" è¿”å›ä¸€ä¸ªä¸ \",[\"$r\",\"code\",null,{\"children\":\"fn\"}],\" å…·æœ‰ç›¸åŒç±»å‹ç­¾åçš„å·²ç¼“å­˜ç‰ˆæœ¬ã€‚åœ¨æ­¤è¿‡ç¨‹ä¸­ï¼Œå®ƒä¸ä¼šè°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"fn\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨ä½¿ç”¨ç»™å®šçš„å‚æ•°è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"cachedFn\"}],\" æ—¶ï¼Œå®ƒé¦–å…ˆæ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨ç¼“å­˜çš„ç»“æœã€‚å¦‚æœå­˜åœ¨ç¼“å­˜çš„ç»“æœï¼Œå®ƒå°†è¿”å›è¯¥ç»“æœã€‚å¦‚æœæ²¡æœ‰ï¼Œå®ƒå°†ä½¿ç”¨å‚æ•°è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"fn\"}],\"ï¼Œå°†ç»“æœå­˜å‚¨åœ¨ç¼“å­˜ä¸­ï¼Œå¹¶è¿”å›è¯¥ç»“æœã€‚åªæœ‰åœ¨ç¼“å­˜æœªå‘½ä¸­æ—¶æ‰ä¼šè°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"fn\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"Note\",null,{\"children\":[\"$r\",\"p\",null,{\"children\":[\"åŸºäºè¾“å…¥è¿›è¡Œè¿”å›å€¼ç¼“å­˜çš„ä¼˜åŒ–ç§°ä¸º \",[\"$r\",\"a\",null,{\"href\":\"https://en.wikipedia.org/wiki/Memoization\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"è®°å¿†åŒ–\"}],\"ã€‚æˆ‘ä»¬å°†ä» \",[\"$r\",\"code\",null,{\"children\":\"cache\"}],\" è¿”å›çš„å‡½æ•°ç§°ä¸ºä¸€ä¸ªè®°å¿†åŒ–å‡½æ•°ã€‚\"]}]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"caveats\",\"children\":\"æ³¨æ„ \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":\"React å°†åœ¨æ¯æ¬¡æœåŠ¡å™¨è¯·æ±‚æ—¶ä½¿æ‰€æœ‰è®°å¿†åŒ–å‡½æ•°çš„ç¼“å­˜å¤±æ•ˆã€‚\"}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"æ¯æ¬¡è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"cache\"}],\" éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°å‡½æ•°ã€‚è¿™æ„å‘³ç€å¤šæ¬¡ä½¿ç”¨ç›¸åŒçš„å‡½æ•°è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"cache\"}],\" å°†è¿”å›ä¸å…±äº«ç›¸åŒç¼“å­˜çš„ä¸åŒè®°å¿†åŒ–å‡½æ•°ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"cachedFn\"}],\" è¿˜ä¼šç¼“å­˜é”™è¯¯ã€‚å¦‚æœå¯¹äºæŸäº›å‚æ•° \",[\"$r\",\"code\",null,{\"children\":\"fn\"}],\" æŠ›å‡ºé”™è¯¯ï¼Œé”™è¯¯å°†è¢«ç¼“å­˜ï¼Œå½“ä½¿ç”¨ç›¸åŒå‚æ•°è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"cachedFn\"}],\" æ—¶ï¼Œç›¸åŒçš„é”™è¯¯å°†è¢«é‡æ–°æŠ›å‡ºã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"cache\"}],\" ä»…ä¾›åœ¨ \",[\"$r\",\"a\",null,{\"href\":\"/blog/2023/03/22/react-labs-what-we-have-been-working-on-march-2023#react-server-components\",\"children\":\"æœåŠ¡å™¨ç»„ä»¶\"}],\" ä¸­ä½¿ç”¨ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"usage\",\"children\":\"ç”¨æ³• \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"cache-expensive-computation\",\"children\":\"ç¼“å­˜ä»£ä»·æ˜‚è´µçš„è®¡ç®— \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä½¿ç”¨ \",[\"$r\",\"code\",null,{\"children\":\"cache\"}],\" è·³è¿‡é‡å¤å·¥ä½œã€‚\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[1, 7, \\\"getUserMetrics(user)\\\"],[2, 13, \\\"getUserMetrics(user)\\\"]]\",\"children\":\"import {cache} from 'react';\\nimport calculateUserMetrics from 'lib/user';\\n\\nconst getUserMetrics = cache(calculateUserMetrics);\\n\\nfunction Profile({user}) {\\n  const metrics = getUserMetrics(user);\\n  // ...\\n}\\n\\nfunction TeamReport({users}) {\\n  for (let user in users) {\\n    const metrics = getUserMetrics(user);\\n    // ...\\n  }\\n  // ...\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœç›¸åŒçš„ \",[\"$r\",\"code\",null,{\"children\":\"user\"}],\" å¯¹è±¡åœ¨ \",[\"$r\",\"code\",null,{\"children\":\"Profile\"}],\" å’Œ \",[\"$r\",\"code\",null,{\"children\":\"TeamReport\"}],\" ä¸­éƒ½è¢«æ¸²æŸ“ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªç»„ä»¶å¯ä»¥å…±äº«å·¥ä½œï¼Œå¹¶ä¸”åªä¸ºè¯¥ \",[\"$r\",\"code\",null,{\"children\":\"user\"}],\" è°ƒç”¨ä¸€æ¬¡ \",[\"$r\",\"code\",null,{\"children\":\"calculateUserMetrics\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å‡è®¾é¦–å…ˆæ¸²æŸ“äº† \",[\"$r\",\"code\",null,{\"children\":\"Profile\"}],\"ã€‚å®ƒå°†è°ƒç”¨ \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":[\"$r\",\"code\",null,{\"children\":\"getUserMetrics\"}]}],\"ï¼Œå¹¶æ£€æŸ¥æ˜¯å¦æœ‰ç¼“å­˜çš„ç»“æœã€‚ç”±äºè¿™æ˜¯ç¬¬ä¸€æ¬¡ä»¥è¯¥ \",[\"$r\",\"code\",null,{\"children\":\"user\"}],\" è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"getUserMetrics\"}],\"ï¼Œæ‰€ä»¥ç¼“å­˜æœªå‘½ä¸­ã€‚äºæ˜¯ \",[\"$r\",\"code\",null,{\"children\":\"getUserMetrics\"}],\" å°†ä¼šä½¿ç”¨ \",[\"$r\",\"code\",null,{\"children\":\"user\"}],\" è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"calculateUserMetrics\"}],\" å¹¶å°†ç»“æœå†™å…¥ç¼“å­˜ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å½“ \",[\"$r\",\"code\",null,{\"children\":\"TeamReport\"}],\" ä½¿ç”¨ç›¸åŒçš„ \",[\"$r\",\"code\",null,{\"children\":\"user\"}],\" å¯¹è±¡æ¥æ¸²æŸ“ \",[\"$r\",\"code\",null,{\"children\":\"users\"}],\" åˆ—è¡¨æ—¶ï¼Œå®ƒå°†è°ƒç”¨ \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":[\"$r\",\"code\",null,{\"children\":\"getUserMetrics\"}]}],\" å¹¶ä»ç¼“å­˜ä¸­è¯»å–ç»“æœã€‚\"]}],\"\\n\",[\"$r\",\"Pitfall\",null,{\"children\":[[\"$r\",\"h5\",null,{\"id\":\"pitfall-different-memoized-functions\",\"children\":\"è°ƒç”¨ä¸åŒçš„è®°å¿†åŒ–å‡½æ•°å°†ä»ä¸åŒçš„ç¼“å­˜ä¸­è¯»å–æ•°æ® \"}],[\"$r\",\"p\",null,{\"children\":\"è¦è®¿é—®ç›¸åŒçš„ç¼“å­˜ï¼Œç»„ä»¶å¿…é¡»è°ƒç”¨åŒä¸€ä¸ªè®°å¿†åŒ–å‡½æ•°ã€‚\"}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[1, 7, \\\"getWeekReport\\\"], [1, 7, \\\"cache(calculateWeekReport)\\\"], [1, 8, \\\"getWeekReport\\\"]]\",\"children\":\"// Temperature.js\\nimport {cache} from 'react';\\nimport {calculateWeekReport} from './report';\\n\\nexport function Temperature({cityData}) {\\n  // ğŸš© é”™è¯¯ç¤ºä¾‹ï¼šåœ¨ç»„ä»¶ä¸­è°ƒç”¨ `cache` ä¼šä¸ºæ¯æ¬¡æ¸²æŸ“åˆ›å»ºæ–°çš„ `getWeekReport`ã€‚\\n  const getWeekReport = cache(calculateWeekReport);\\n  const report = getWeekReport(cityData);\\n  // ...\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[2, 6, \\\"getWeekReport\\\"], [2, 6, \\\"cache(calculateWeekReport)\\\"], [2, 9, \\\"getWeekReport\\\"]]\",\"children\":\"// Precipitation.js\\nimport {cache} from 'react';\\nimport {calculateWeekReport} from './report';\\n\\n// ğŸš© é”™è¯¯ç¤ºä¾‹ï¼š`getWeekReport` ä»…ä¾› `Precipitation` ç»„ä»¶è®¿é—®ã€‚\\nconst getWeekReport = cache(calculateWeekReport);\\n\\nexport function Precipitation({cityData}) {\\n  const report = getWeekReport(cityData);\\n  // ...\\n}\\n\"}]}],[\"$r\",\"p\",null,{\"children\":[\"åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œ\",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":[\"$r\",\"code\",null,{\"children\":\"Precipitation\"}]}],\" å’Œ \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":[\"$r\",\"code\",null,{\"children\":\"Temperature\"}]}],\" éƒ½å°†è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"cache\"}],\" åˆ›å»ºæ–°çš„è®°å¿†åŒ–å‡½æ•°ï¼Œå¹¶ä½¿ç”¨è‡ªå·±çš„ç¼“å­˜æŸ¥æ‰¾ã€‚å¦‚æœä¸¤ä¸ªç»„ä»¶éƒ½ä½¿ç”¨ç›¸åŒçš„ \",[\"$r\",\"code\",null,{\"children\":\"cityData\"}],\" è¿›è¡Œæ¸²æŸ“ï¼Œå®ƒä»¬å°†é‡å¤è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"calculateWeekReport\"}],\"ï¼Œè¿›è¡Œé‡å¤çš„å·¥ä½œã€‚\"]}],[\"$r\",\"p\",null,{\"children\":[\"æ­¤å¤–ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"Temperature\"}],\" æ¯æ¬¡ç»„ä»¶æ¸²æŸ“æ—¶éƒ½åˆ›å»ºä¸€ä¸ª \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":\"æ–°çš„è®°å¿†åŒ–å‡½æ•°\"}],\"ï¼Œè¿™ä¸å…è®¸ä»»ä½•ç¼“å­˜å…±äº«ã€‚\"]}],[\"$r\",\"p\",null,{\"children\":[\"ä¸ºäº†æœ€å¤§åŒ–ç¼“å­˜å‘½ä¸­ç‡å¹¶å‡å°‘å·¥ä½œé‡ï¼Œè¿™ä¸¤ä¸ªç»„ä»¶åº”è¯¥è°ƒç”¨ç›¸åŒçš„è®°å¿†åŒ–å‡½æ•°ä»¥è®¿é—®ç›¸åŒçš„ç¼“å­˜ã€‚å› æ­¤åº”è¯¥åœ¨ä¸“ç”¨æ¨¡å—ä¸­å®šä¹‰è®°å¿†åŒ–å‡½æ•°ï¼Œä»¥åœ¨ä¸åŒç»„ä»¶ä¹‹é—´ä½¿ç”¨ \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/import\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"import\"}],\"-ed\"]}],\" è¿›è¡Œå…±äº«ã€‚\"]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[3, 5, \\\"export default cache(calculateWeekReport)\\\"]]\",\"children\":\"// getWeekReport.js\\nimport {cache} from 'react';\\nimport {calculateWeekReport} from './report';\\n\\nexport default cache(calculateWeekReport);\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[3, 2, \\\"getWeekReport\\\", 0], [3, 5, \\\"getWeekReport\\\"]]\",\"children\":\"// Temperature.js\\nimport getWeekReport from './getWeekReport';\\n\\nexport default function Temperature({cityData}) {\\n\\tconst report = getWeekReport(cityData);\\n  // ...\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[3, 2, \\\"getWeekReport\\\", 0], [3, 5, \\\"getWeekReport\\\"]]\",\"children\":\"// Precipitation.js\\nimport getWeekReport from './getWeekReport';\\n\\nexport default function Precipitation({cityData}) {\\n  const report = getWeekReport(cityData);\\n  // ...\\n}\\n\"}]}],[\"$r\",\"p\",null,{\"children\":[\"åœ¨è¿™é‡Œï¼Œä¸¤ä¸ªç»„ä»¶éƒ½è°ƒç”¨ä» \",[\"$r\",\"code\",null,{\"children\":\"./getWeekReport.js\"}],\" å¯¼å‡ºçš„ \",[\"$r\",\"CodeStep\",null,{\"step\":3,\"children\":\"ç›¸åŒçš„è®°å¿†åŒ–å‡½æ•°\"}],\" æ¥è¯»å–å’Œå†™å…¥ç›¸åŒçš„ç¼“å­˜ã€‚\"]}]]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"take-and-share-snapshot-of-data\",\"children\":\"å…±äº«æ•°æ®å¿«ç…§ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è¦åœ¨ç»„ä»¶ä¹‹é—´å…±äº«æ•°æ®å¿«ç…§ï¼Œè¯·ä½¿ç”¨ç±»ä¼¼ \",[\"$r\",\"code\",null,{\"children\":\"fetch\"}],\" çš„æ•°æ®è·å–å‡½æ•°è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"cache\"}],\"ã€‚å½“å¤šä¸ªç»„ä»¶è¿›è¡Œç›¸åŒçš„æ•°æ®è·å–æ—¶ï¼Œåªä¼šå‘å‡ºä¸€ä¸ªè¯·æ±‚ï¼Œå¹¶ä¸”è¿”å›çš„æ•°æ®ä¼šè¢«ç¼“å­˜å¹¶åœ¨å„ä¸ªç»„ä»¶ä¹‹é—´å…±äº«ã€‚æ‰€æœ‰ç»„ä»¶åœ¨æœåŠ¡å™¨æ¸²æŸ“æœŸé—´éƒ½å¼•ç”¨ç›¸åŒçš„æ•°æ®å¿«ç…§ã€‚\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[1, 4, \\\"city\\\"], [1, 5, \\\"fetchTemperature(city)\\\"], [2, 4, \\\"getTemperature\\\"], [2, 9, \\\"getTemperature\\\"], [1, 9, \\\"city\\\"], [2, 14, \\\"getTemperature\\\"], [1, 14, \\\"city\\\"]]\",\"children\":\"import {cache} from 'react';\\nimport {fetchTemperature} from './api.js';\\n\\nconst getTemperature = cache(async (city) => {\\n\\treturn await fetchTemperature(city);\\n});\\n\\nasync function AnimatedWeatherCard({city}) {\\n\\tconst temperature = await getTemperature(city);\\n\\t// ...\\n}\\n\\nasync function MinimalWeatherCard({city}) {\\n\\tconst temperature = await getTemperature(city);\\n\\t// ...\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœ \",[\"$r\",\"code\",null,{\"children\":\"AnimatedWeatherCard\"}],\" å’Œ \",[\"$r\",\"code\",null,{\"children\":\"MinimalWeatherCard\"}],\" éƒ½ä¸ºç›¸åŒçš„ \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":[\"$r\",\"code\",null,{\"children\":\"city\"}]}],\" è¿›è¡Œæ¸²æŸ“ï¼Œå®ƒä»¬å°†ä» \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":\"è®°å¿†åŒ–å‡½æ•°\"}],\" æ¥æ”¶ç›¸åŒçš„æ•°æ®å¿«ç…§ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœ \",[\"$r\",\"code\",null,{\"children\":\"AnimatedWeatherCard\"}],\" å’Œ \",[\"$r\",\"code\",null,{\"children\":\"MinimalWeatherCard\"}],\" å‘ \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":[\"$r\",\"code\",null,{\"children\":\"getTemperature\"}]}],\" æä¾›ä¸åŒçš„ \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":[\"$r\",\"code\",null,{\"children\":\"city\"}]}],\" å‚æ•°ï¼Œé‚£ä¹ˆå°†è°ƒç”¨ä¸¤æ¬¡ \",[\"$r\",\"code\",null,{\"children\":\"fetchTemperature\"}],\"ï¼Œå¹¶ä¸”æ¯ä¸ªè°ƒç”¨ç«™ç‚¹å°†æ¥æ”¶ä¸åŒçš„æ•°æ®ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":[\"$r\",\"code\",null,{\"children\":\"city\"}]}],\" åœ¨å…¶ä¸­å……å½“ç¼“å­˜é”®ã€‚\"]}],\"\\n\",[\"$r\",\"Note\",null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"CodeStep\",null,{\"step\":3,\"children\":\"å¼‚æ­¥æ¸²æŸ“\"}],\" åªåœ¨æœåŠ¡å™¨ç»„ä»¶ä¸­æ”¯æŒã€‚\"]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[3, 1, \\\"async\\\"], [3, 2, \\\"await\\\"]]\",\"children\":\"async function AnimatedWeatherCard({city}) {\\n\\tconst temperature = await getTemperature(city);\\n\\t// ...\\n}\\n\"}]}]]}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"preload-data\",\"children\":\"é¢„åŠ è½½æ•°æ® \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"é€šè¿‡ç¼“å­˜é•¿æ—¶é—´è¿è¡Œçš„æ•°æ®è·å–ï¼Œä½ å¯ä»¥åœ¨æ¸²æŸ“ç»„ä»¶ä¹‹å‰å¼€å§‹å¼‚æ­¥å·¥ä½œã€‚\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-jsx\",\"meta\":\"[[2, 6, \\\"await getUser(id)\\\"], [1, 17, \\\"getUser(id)\\\"]]\",\"children\":\"const getUser = cache(async (id) => {\\n  return await db.user.query(id);\\n}\\n\\nasync function Profile({id}) {\\n  const user = await getUser(id);\\n  return (\\n    <section>\\n      <img src={user.profilePic} />\\n      <h2>{user.name}</h2>\\n    </section>\\n  );\\n}\\n\\nfunction Page({id}) {\\n  // âœ… æ­£ç¡®ç¤ºä¾‹ï¼šå¼€å§‹è·å–ç”¨æˆ·æ•°æ®ã€‚\\n  getUser(id);\\n  // â€¦â€¦ä¸€äº›è®¡ç®—å·¥ä½œ\\n  return (\\n    <>\\n      <Profile id={id} />\\n    </>\\n  );\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨æ¸²æŸ“ \",[\"$r\",\"code\",null,{\"children\":\"Page\"}],\" æ—¶ï¼Œç»„ä»¶è°ƒç”¨ \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":[\"$r\",\"code\",null,{\"children\":\"getUser\"}]}],\"ï¼Œä½†è¯·æ³¨æ„å®ƒå¹¶ä¸ä½¿ç”¨è¿”å›çš„æ•°æ®ã€‚è¿™ä¸ªæ—©æœŸçš„ \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":[\"$r\",\"code\",null,{\"children\":\"getUser\"}]}],\" è°ƒç”¨ä¼šå¯åŠ¨å¼‚æ­¥æ•°æ®åº“æŸ¥è¯¢ï¼Œè€Œåœ¨ \",[\"$r\",\"code\",null,{\"children\":\"Page\"}],\" æ‰§è¡Œå…¶ä»–è®¡ç®—å·¥ä½œå¹¶æ¸²æŸ“å­ç»„ä»¶æ—¶è¿›è¡Œã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨æ¸²æŸ“ \",[\"$r\",\"code\",null,{\"children\":\"Profile\"}],\" æ—¶ï¼Œæˆ‘ä»¬å†æ¬¡è°ƒç”¨ \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":[\"$r\",\"code\",null,{\"children\":\"getUser\"}]}],\"ã€‚å¦‚æœåˆå§‹ \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":[\"$r\",\"code\",null,{\"children\":\"getUser\"}]}],\" è°ƒç”¨å·²ç»è¿”å›å¹¶ç¼“å­˜äº†ç”¨æˆ·æ•°æ®ï¼Œé‚£ä¹ˆå½“ \",[\"$r\",\"code\",null,{\"children\":\"Profile\"}],\" åœ¨ \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":\"è¯·æ±‚å¹¶ç­‰å¾…è¿™äº›æ•°æ®\"}],\" æ—¶ï¼Œå®ƒå¯ä»¥ç®€å•åœ°ä»ç¼“å­˜ä¸­è¯»å–ï¼Œè€Œæ— éœ€è¿›è¡Œå¦ä¸€ä¸ªè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ã€‚å¦‚æœåˆå§‹ \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":[\"$r\",\"code\",null,{\"children\":\"fetchData\"}]}],\" è¿˜æ²¡æœ‰å®Œæˆï¼Œé‚£ä¹ˆåœ¨è¿™ç§æ¨¡å¼ä¸‹é¢„åŠ è½½æ•°æ®å¯ä»¥å‡å°‘æ•°æ®è·å–çš„å»¶è¿Ÿã€‚\"]}],\"\\n\",[\"$r\",\"DeepDive\",null,{\"children\":[[\"$r\",\"h4\",null,{\"id\":\"caching-asynchronous-work\",\"children\":\"ç¼“å­˜å¼‚æ­¥å·¥ä½œ \"}],[\"$r\",\"p\",null,{\"children\":[\"åœ¨è¯„ä¼° \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/async_function\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"å¼‚æ­¥å‡½æ•°\"}],\" æ—¶ï¼Œä½ å°†æ”¶åˆ°ä¸€ä¸ª \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"Promise\"}],\"ï¼Œè¯¥ Promise åŒ…å«äº†è¯¥å·¥ä½œçš„çŠ¶æ€ï¼ˆpendingï¼Œfulfilledï¼Œfailedï¼‰å’Œæœ€ç»ˆçš„å®Œæˆç»“æœã€‚\"]}],[\"$r\",\"p\",null,{\"children\":[\"åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œå¼‚æ­¥å‡½æ•° \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":[\"$r\",\"code\",null,{\"children\":\"fetchData\"}]}],\" è¿”å›ä¸€ä¸ªç­‰å¾… \",[\"$r\",\"code\",null,{\"children\":\"fetch\"}],\" çš„ promiseã€‚\"]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[1, 1, \\\"fetchData()\\\"], [2, 8, \\\"getData()\\\"], [3, 10, \\\"getData()\\\"]]\",\"children\":\"async function fetchData() {\\n  return await fetch(`https://...`);\\n}\\n\\nconst getData = cache(fetchData);\\n\\nasync function MyComponent() {\\n  getData();\\n  // â€¦â€¦ä¸€äº›è®¡ç®—å·¥ä½œ\\n  await getData();\\n  // â€¦â€¦\\n}\\n\"}]}],[\"$r\",\"p\",null,{\"children\":[\"åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨ \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":[\"$r\",\"code\",null,{\"children\":\"getData\"}]}],\" æ—¶ï¼Œä» \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":[\"$r\",\"code\",null,{\"children\":\"fetchData\"}]}],\" è¿”å›çš„ promise å°†è¢«ç¼“å­˜ã€‚éšåçš„æŸ¥æ‰¾å°†è¿”å›ç›¸åŒçš„ promiseã€‚\"]}],[\"$r\",\"p\",null,{\"children\":[\"è¯·æ³¨æ„ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨ \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":[\"$r\",\"code\",null,{\"children\":\"getData\"}]}],\" ä¸ä½¿ç”¨ \",[\"$r\",\"code\",null,{\"children\":\"await\"}],\"ï¼Œè€Œ \",[\"$r\",\"CodeStep\",null,{\"step\":3,\"children\":\"ç¬¬äºŒæ¬¡\"}],\" è°ƒç”¨ä¼šä½¿ç”¨ã€‚\",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/await\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":[\"$r\",\"code\",null,{\"children\":\"await\"}]}],\" æ˜¯ JavaScript ä¸­çš„ä¸€ä¸ªæ“ä½œç¬¦ï¼Œå®ƒä¼šç­‰å¾…å¹¶è¿”å› promise çš„å·²è§£å†³ç»“æœã€‚ç¬¬ä¸€æ¬¡è°ƒç”¨ \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":[\"$r\",\"code\",null,{\"children\":\"getData\"}]}],\" ä»…å¯åŠ¨ \",[\"$r\",\"code\",null,{\"children\":\"fetch\"}],\" ä»¥ç¼“å­˜ promiseï¼Œä»¥ä¾› \",[\"$r\",\"CodeStep\",null,{\"step\":3,\"children\":\"ç¬¬äºŒæ¬¡\"}],\" æŸ¥æ‰¾ã€‚\"]}],[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœåœ¨ \",[\"$r\",\"CodeStep\",null,{\"step\":3,\"children\":\"ç¬¬äºŒæ¬¡\"}],\" è°ƒç”¨æ—¶ï¼Œpromise ä»å¤„äº pending çŠ¶æ€ï¼Œé‚£ä¹ˆ \",[\"$r\",\"code\",null,{\"children\":\"await\"}],\" ä¼šç­‰å¾…ç»“æœã€‚ä¼˜åŒ–ä¹‹å¤„åœ¨äºï¼Œåœ¨ç­‰å¾… \",[\"$r\",\"code\",null,{\"children\":\"fetch\"}],\" çš„åŒæ—¶ï¼ŒReact å¯ä»¥ç»§ç»­è¿›è¡Œè®¡ç®—å·¥ä½œï¼Œä»è€Œå‡å°‘äº†ç¬¬äºŒæ¬¡è°ƒç”¨çš„ç­‰å¾…æ—¶é—´ã€‚\"]}],[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœ promise å·²ç»è§£å†³ï¼Œæ— è®ºæ˜¯å¾—åˆ°é”™è¯¯è¿˜æ˜¯ fulfilled çš„ç»“æœï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"await\"}],\" éƒ½ä¼šç«‹å³è¿”å›è¯¥å€¼ã€‚åœ¨è¿™ä¸¤ç§ç»“æœä¸­ï¼Œéƒ½å­˜åœ¨æ€§èƒ½ä¼˜åŠ¿ã€‚\"]}]]}],\"\\n\",[\"$r\",\"Pitfall\",null,{\"children\":[[\"$r\",\"h5\",null,{\"id\":\"pitfall-memoized-call-outside-component\",\"children\":\"åœ¨ç»„ä»¶å¤–éƒ¨è°ƒç”¨è®°å¿†åŒ–å‡½æ•°å°†ä¸ä½¿ç”¨ç¼“å­˜ \"}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-jsx\",\"meta\":\"[[1, 3, \\\"getUser\\\"]]\",\"children\":\"import {cache} from 'react';\\n\\nconst getUser = cache(async (userId) => {\\n  return await db.user.query(userId);\\n});\\n\\n// ğŸš© é”™è¯¯ç¤ºä¾‹ï¼šåœ¨ç»„ä»¶å¤–éƒ¨è°ƒç”¨è®°å¿†åŒ–å‡½æ•°å°†ä¸è¿›è¡Œè®°å¿†åŒ–ã€‚\\ngetUser('demo-id');\\n\\nasync function DemoProfile() {\\n  // âœ… æ­£ç¡®ç¤ºä¾‹ï¼š`getUser` å°†è¿›è¡Œè®°å¿†åŒ–ã€‚\\n  const user = await getUser('demo-id');\\n  return <Profile user={user} />;\\n}\\n\"}]}],[\"$r\",\"p\",null,{\"children\":[\"React åªå…è®¸åœ¨ç»„ä»¶å†…è®¿é—®è®°å¿†åŒ–å‡½æ•°çš„ç¼“å­˜ã€‚åœ¨ç»„ä»¶å¤–éƒ¨è°ƒç”¨ \",[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":[\"$r\",\"code\",null,{\"children\":\"getUser\"}]}],\" æ—¶ï¼Œå®ƒä»ä¼šè¯„ä¼°å‡½æ•°ï¼Œä½†ä¸ä¼šè¯»å–æˆ–æ›´æ–°ç¼“å­˜ã€‚\"]}],[\"$r\",\"p\",null,{\"children\":[\"è¿™æ˜¯å› ä¸ºç¼“å­˜è®¿é—®æ˜¯é€šè¿‡ \",[\"$r\",\"a\",null,{\"href\":\"/learn/passing-data-deeply-with-context\",\"children\":\"ä¸Šä¸‹æ–‡ï¼ˆcontextï¼‰\"}],\" æä¾›çš„ï¼Œè€Œä¸Šä¸‹æ–‡åªèƒ½ä»ç»„ä»¶ä¸­è®¿é—®ã€‚\"]}]]}],\"\\n\",[\"$r\",\"DeepDive\",null,{\"children\":[[\"$r\",\"h4\",null,{\"id\":\"cache-memo-usememo\",\"children\":[\"åº”è¯¥ä½•æ—¶ä½¿ç”¨ \",[\"$r\",\"code\",null,{\"children\":\"cache\"}],\"ã€\",[\"$r\",\"a\",null,{\"href\":\"/reference/react/memo\",\"children\":[\"$r\",\"code\",null,{\"children\":\"memo\"}]}],\" å’Œ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useMemo\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useMemo\"}]}],\"ï¼Ÿ \"]}],[\"$r\",\"p\",null,{\"children\":\"æ‰€æœ‰æåˆ°çš„ API éƒ½æä¾›äº†è®°å¿†åŒ–åŠŸèƒ½ï¼Œå®ƒä»¬çš„åŒºåˆ«åœ¨äºè®°å¿†åŒ–ä»€ä¹ˆã€è°å¯ä»¥è®¿é—®ç¼“å­˜ä»¥åŠä½•æ—¶ç¼“å­˜ä¼šå¤±æ•ˆã€‚\"}],[\"$r\",\"h4\",null,{\"id\":\"deep-dive-use-memo\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"useMemo\"}],\" \"]}],[\"$r\",\"p\",null,{\"children\":[\"ä¸€èˆ¬æ¥è¯´ï¼Œ\",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useMemo\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useMemo\"}]}],\" ç”¨äºåœ¨å®¢æˆ·ç«¯ç»„ä»¶è·¨æ¸²æŸ“æ—¶ç¼“å­˜æ˜‚è´µçš„è®¡ç®—ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥ç”¨å®ƒæ¥è®°å¿†åŒ–ç»„ä»¶å†…éƒ¨æ•°æ®çš„è½¬æ¢ã€‚\"]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-jsx\",\"meta\":\"{4}\",\"children\":\"'use client';\\n\\nfunction WeatherReport({record}) {\\n  const avgTemp = useMemo(() => calculateAvg(record)), record);\\n  // ...\\n}\\n\\nfunction App() {\\n  const record = getRecord();\\n  return (\\n    <>\\n      <WeatherReport record={record} />\\n      <WeatherReport record={record} />\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"p\",null,{\"children\":[\"åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"App\"}],\" æ¸²æŸ“äº†ä¸¤ä¸ªå…·æœ‰ç›¸åŒè®°å½•çš„ \",[\"$r\",\"code\",null,{\"children\":\"WeatherReport\"}],\"ã€‚å°½ç®¡è¿™ä¸¤ä¸ªç»„ä»¶éƒ½æ‰§è¡Œç›¸åŒçš„å·¥ä½œï¼Œä½†å®ƒä»¬æ— æ³•å…±äº«å·¥ä½œã€‚\",[\"$r\",\"code\",null,{\"children\":\"useMemo\"}],\" çš„ç¼“å­˜ä»…åœ¨ç»„ä»¶å†…éƒ¨å¯ç”¨ã€‚\"]}],[\"$r\",\"p\",null,{\"children\":[\"ä½†æ˜¯ \",[\"$r\",\"code\",null,{\"children\":\"useMemo\"}],\" èƒ½å¤Ÿç¡®ä¿å¦‚æœ \",[\"$r\",\"code\",null,{\"children\":\"App\"}],\" é‡æ–°æ¸²æŸ“å¹¶ä¸” \",[\"$r\",\"code\",null,{\"children\":\"record\"}],\" å¯¹è±¡æ²¡æœ‰æ›´æ”¹ï¼Œæ¯ä¸ªç»„ä»¶å®ä¾‹éƒ½å°†è·³è¿‡å·¥ä½œå¹¶ä½¿ç”¨ \",[\"$r\",\"code\",null,{\"children\":\"avgTemp\"}],\" çš„è®°å¿†åŒ–å€¼ã€‚\",[\"$r\",\"code\",null,{\"children\":\"useMemo\"}],\" ä»…ä¼šç¼“å­˜å…·æœ‰ç»™å®šä¾èµ–é¡¹çš„ \",[\"$r\",\"code\",null,{\"children\":\"avgTemp\"}],\" çš„æœ€åä¸€æ¬¡è®¡ç®—ç»“æœã€‚\"]}],[\"$r\",\"h4\",null,{\"id\":\"deep-dive-cache\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"cache\"}],\" \"]}],[\"$r\",\"p\",null,{\"children\":[\"ä¸€èˆ¬æ¥è¯´ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"cache\"}],\" åº”ç”¨äºæœåŠ¡å™¨ç»„ä»¶ä»¥è®°å¿†åŒ–å¯ä»¥è·¨ç»„ä»¶å…±äº«çš„å·¥ä½œã€‚\"]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[1, 12, \\\"<WeatherReport city={city} />\\\"], [3, 13, \\\"<WeatherReport city={city} />\\\"], [2, 1, \\\"cache(fetchReport)\\\"]]\",\"children\":\"const cachedFetchReport = cache(fetchReport);\\n\\nfunction WeatherReport({city}) {\\n  const report = cachedFetchReport(city);\\n  // ...\\n}\\n\\nfunction App() {\\n  const city = \\\"Los Angeles\\\";\\n  return (\\n    <>\\n      <WeatherReport city={city} />\\n      <WeatherReport city={city} />\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"p\",null,{\"children\":[\"ä½¿ç”¨ \",[\"$r\",\"code\",null,{\"children\":\"cache\"}],\" é‡æ–°ç¼–å†™å‰é¢çš„ç¤ºä¾‹ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ\",[\"$r\",\"CodeStep\",null,{\"step\":3,\"children\":[[\"$r\",\"code\",null,{\"children\":\"WeatherReport\"}],\" çš„ç¬¬äºŒä¸ªå®ä¾‹\"]}],\" å°†èƒ½å¤Ÿè·³è¿‡é‡å¤çš„å·¥ä½œå¹¶ä»ä¸ç¬¬ä¸€ä¸ª \",[\"$r\",\"code\",null,{\"children\":\"WeatherReport\"}],\" ç›¸åŒçš„ç¼“å­˜ä¸­è¯»å–ã€‚ä¸å‰é¢çš„ç¤ºä¾‹ä¸åŒçš„å¦ä¸€ä¸ªåœ°æ–¹æ˜¯ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"cache\"}],\" ä¹Ÿæ¨èç”¨äº \",[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":\"è®°å¿†åŒ–æ•°æ®è·å–\"}],\"ï¼Œè€Œ \",[\"$r\",\"code\",null,{\"children\":\"useMemo\"}],\" åªåº”ç”¨äºè®¡ç®—ã€‚\"]}],[\"$r\",\"p\",null,{\"children\":[\"ç›®å‰ \",[\"$r\",\"code\",null,{\"children\":\"cache\"}],\" åº”è¯¥ä»…åœ¨æœåŠ¡å™¨ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œå¹¶ä¸”ç¼“å­˜ä¼šåœ¨æœåŠ¡å™¨è¯·æ±‚ä¹‹é—´å¤±æ•ˆã€‚\"]}],[\"$r\",\"h4\",null,{\"id\":\"deep-dive-memo\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"memo\"}],\" \"]}],[\"$r\",\"p\",null,{\"children\":[\"ä½ åº”è¯¥ä½¿ç”¨ \",[\"$r\",\"a\",null,{\"href\":\"reference/react/memo\",\"children\":[\"$r\",\"code\",null,{\"children\":\"memo\"}]}],\" é˜²æ­¢ç»„ä»¶åœ¨å…¶ \",[\"$r\",\"code\",null,{\"children\":\"props\"}],\" æœªæ›´æ”¹æ—¶é‡æ–°æ¸²æŸ“ã€‚\"]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"'use client';\\n\\nfunction WeatherReport({record}) {\\n  const avgTemp = calculateAvg(record); \\n  // ...\\n}\\n\\nconst MemoWeatherReport = memo(WeatherReport);\\n\\nfunction App() {\\n  const record = getRecord();\\n  return (\\n    <>\\n      <MemoWeatherReport record={record} />\\n      <MemoWeatherReport record={record} />\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"p\",null,{\"children\":[\"åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œä¸¤ä¸ª \",[\"$r\",\"code\",null,{\"children\":\"MemoWeatherReport\"}],\" ç»„ä»¶åœ¨é¦–æ¬¡æ¸²æŸ“æ—¶éƒ½ä¼šè°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"calculateAvg\"}],\"ã€‚ç„¶è€Œï¼Œå¦‚æœ \",[\"$r\",\"code\",null,{\"children\":\"App\"}],\" é‡æ–°æ¸²æŸ“ï¼Œä½†æ²¡æœ‰æ›´æ”¹ \",[\"$r\",\"code\",null,{\"children\":\"record\"}],\"ï¼Œåˆ™æ²¡æœ‰ props å‘ç”Ÿæ›´æ”¹ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"MemoWeatherReport\"}],\" å°†ä¸ä¼šé‡æ–°æ¸²æŸ“ã€‚\"]}],[\"$r\",\"p\",null,{\"children\":[\"ä¸ \",[\"$r\",\"code\",null,{\"children\":\"useMemo\"}],\" ç›¸æ¯”ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"memo\"}],\" æ ¹æ® props è€Œä¸æ˜¯ç‰¹å®šè®¡ç®—æ¥è®°å¿†åŒ–ç»„ä»¶æ¸²æŸ“ã€‚ä¸ \",[\"$r\",\"code\",null,{\"children\":\"useMemo\"}],\" ç±»ä¼¼ï¼Œè®°å¿†åŒ–çš„ç»„ä»¶åªç¼“å­˜äº†å…·æœ‰æœ€åä¸€ç»„ prop å€¼çš„æœ€åä¸€æ¬¡æ¸²æŸ“ã€‚ä¸€æ—¦ props æ›´æ”¹ï¼Œç¼“å­˜å°†å¤±æ•ˆï¼Œç»„ä»¶å°†é‡æ–°æ¸²æŸ“ã€‚\"]}]]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"troubleshooting\",\"children\":\"ç–‘éš¾è§£ç­” \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"memoized-function-still-runs\",\"children\":\"å°½ç®¡ä¼ é€’çš„æ˜¯ç›¸åŒå‚æ•°ï¼Œæˆ‘çš„è®°å¿†åŒ–å‡½æ•°ä»åœ¨é‡æ–°è¿è¡Œ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"è¯·æŸ¥çœ‹ä¹‹å‰æåˆ°çš„å¸¸è§é—®é¢˜ï¼š\"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"#pitfall-different-memoized-functions\",\"children\":\"è°ƒç”¨ä¸åŒçš„è®°å¿†åŒ–å‡½æ•°å°†ä»ä¸åŒçš„ç¼“å­˜ä¸­è¯»å–\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"#pitfall-memoized-call-outside-component\",\"children\":\"åœ¨ç»„ä»¶å¤–éƒ¨è°ƒç”¨è®°å¿†åŒ–å‡½æ•°å°†ä¸ä½¿ç”¨ç¼“å­˜\"}],\"ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"å¦‚æœä»¥ä¸Šé—®é¢˜éƒ½ä¸é€‚ç”¨ï¼Œé‚£ä¹ˆå¯èƒ½æ˜¯ä¸ React æ£€æŸ¥ç¼“å­˜ä¸­æ˜¯å¦å­˜åœ¨å†…å®¹çš„æ–¹å¼æœ‰å…³ã€‚\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœå‚æ•°ä¸æ˜¯åŸå§‹æ•°æ®ç±»å‹(\",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Glossary/Primitive)%EF%BC%88%E4%BE%8B%E5%A6%82%E5%AF%B9%E8%B1%A1%E3%80%81%E5%87%BD%E6%95%B0%E3%80%81%E6%95%B0%E7%BB%84%EF%BC%89%EF%BC%8C%E8%AF%B7%E7%A1%AE%E4%BF%9D%E4%BC%A0%E9%80%92%E7%9A%84%E6%98%AF%E7%9B%B8%E5%90%8C%E7%9A%84%E5%AF%B9%E8%B1%A1%E5%BC%95%E7%94%A8%E3%80%82\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"https://developer.mozilla.org/zh-CN/docs/Glossary/Primitive)ï¼ˆä¾‹å¦‚å¯¹è±¡ã€å‡½æ•°ã€æ•°ç»„ï¼‰ï¼Œè¯·ç¡®ä¿ä¼ é€’çš„æ˜¯ç›¸åŒçš„å¯¹è±¡å¼•ç”¨ã€‚\"}]]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"åœ¨è°ƒç”¨è®°å¿†åŒ–å‡½æ•°æ—¶ï¼ŒReact å°†æŸ¥æ‰¾è¾“å…¥å‚æ•°ï¼Œä»¥æŸ¥çœ‹æ˜¯å¦å·²ç»ç¼“å­˜äº†ç»“æœã€‚React å°†ä½¿ç”¨æµ…ç›¸ç­‰ç¡®å®šæ˜¯å¦å­˜åœ¨ç¼“å­˜ã€‚\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import {cache} from 'react';\\n\\nconst calculateNorm = cache((vector) => {\\n  // ...\\n});\\n\\nfunction MapMarker(props) {\\n  // ğŸš© é”™è¯¯ç¤ºä¾‹ï¼šprops æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ¯æ¬¡æ¸²æŸ“æ—¶éƒ½ä¼šæ›´æ”¹\\n  const length = calculateNorm(props);\\n  // ...\\n}\\n\\nfunction App() {\\n  return (\\n    <>\\n      <MapMarker x={10} y={10} z={10} />\\n      <MapMarker x={10} y={10} z={10} />\\n    </>\\n  );\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸¤ä¸ª \",[\"$r\",\"code\",null,{\"children\":\"MapMarker\"}],\" çœ‹èµ·æ¥æ‰§è¡Œç›¸åŒçš„å·¥ä½œï¼Œå¹¶ä½¿ç”¨ç›¸åŒçš„å€¼ \",[\"$r\",\"code\",null,{\"children\":\"{x: 10, y: 10, z: 10}\"}],\" è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"calculateNorm\"}],\"ã€‚å°½ç®¡è¿™äº›å¯¹è±¡åŒ…å«ç›¸åŒçš„å€¼ï¼Œä½†å®ƒä»¬ä¸æ˜¯ç›¸åŒçš„å¯¹è±¡å¼•ç”¨ï¼Œå› ä¸ºæ¯ä¸ªç»„ä»¶éƒ½åˆ›å»ºäº†è‡ªå·±çš„ props å¯¹è±¡ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"React å°†è°ƒç”¨ \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/is\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"Object.is\"}],\" æ¥éªŒè¯æ˜¯å¦å­˜åœ¨ç¼“å­˜å‘½ä¸­ã€‚\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{3,9}\",\"children\":\"import {cache} from 'react';\\n\\nconst calculateNorm = cache((x, y, z) => {\\n  // ...\\n});\\n\\nfunction MapMarker(props) {\\n  // âœ… æ­£ç¡®ç¤ºä¾‹ï¼šä¼ é€’åŸå§‹ç±»å‹ç»™è®°å¿†åŒ–å‡½æ•°\\n  const length = calculateNorm(props.x, props.y, props.z);\\n  // ...\\n}\\n\\nfunction App() {\\n  return (\\n    <>\\n      <MapMarker x={10} y={10} z={10} />\\n      <MapMarker x={10} y={10} z={10} />\\n    </>\\n  );\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ç§æ–¹æ³•æ˜¯å°†å‘é‡çš„ç»´åº¦ä¼ é€’ç»™ \",[\"$r\",\"code\",null,{\"children\":\"calculateNorm\"}],\"ã€‚è¿™ä¸ªæ–¹æ³•æœ‰æ•ˆï¼Œå› ä¸ºç»´åº¦æœ¬èº«æ˜¯åŸå§‹æ•°æ®ç±»å‹ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"å¦ä¸€ç§è§£å†³æ–¹æ¡ˆå¯èƒ½æ˜¯å°†å‘é‡å¯¹è±¡æœ¬èº«ä½œä¸ºä¸€ä¸ª prop ä¼ é€’ç»™ç»„ä»¶ã€‚æˆ‘ä»¬éœ€è¦å°†ç›¸åŒçš„å¯¹è±¡ä¼ é€’ç»™ä¸¤ä¸ªç»„ä»¶å®ä¾‹ã€‚\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{3,9,14}\",\"children\":\"import {cache} from 'react';\\n\\nconst calculateNorm = cache((vector) => {\\n  // ...\\n});\\n\\nfunction MapMarker(props) {\\n  // âœ… æ­£ç¡®ç¤ºä¾‹ï¼šä¼ é€’ç›¸åŒçš„ `vector` å¯¹è±¡ã€‚\\n  const length = calculateNorm(props.vector);\\n  // ...\\n}\\n\\nfunction App() {\\n  const vector = [10, 10, 10];\\n  return (\\n    <>\\n      <MapMarker vector={vector} />\\n      <MapMarker vector={vector} />\\n    </>\\n  );\\n}\\n\"}]}]]}]]","meta":{"title":"cache","canary":true}},"__N_SSG":true}