{"pageProps":{"toc":"[{\"url\":\"#\",\"text\":\"æ¦‚è§ˆ\",\"depth\":2},{\"url\":\"#reference\",\"depth\":2,\"text\":\"å‚è€ƒ \"},{\"url\":\"#usesyncexternalstore\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot?)\"}],\" \"]},{\"url\":\"#usage\",\"depth\":2,\"text\":\"ä½¿ç”¨ \"},{\"url\":\"#subscribing-to-an-external-store\",\"depth\":3,\"text\":\"è®¢é˜…å¤–éƒ¨ store \"},{\"url\":\"#subscribing-to-a-browser-api\",\"depth\":3,\"text\":\"è®¢é˜…æµè§ˆå™¨ API \"},{\"url\":\"#extracting-the-logic-to-a-custom-hook\",\"depth\":3,\"text\":\"æŠŠé€»è¾‘æŠ½å–åˆ°è‡ªå®šä¹‰ Hook \"},{\"url\":\"#adding-support-for-server-rendering\",\"depth\":3,\"text\":\"æ·»åŠ æœåŠ¡ç«¯æ¸²æŸ“æ”¯æŒ \"},{\"url\":\"#troubleshooting\",\"depth\":2,\"text\":\"ç–‘éš¾è§£ç­” \"},{\"url\":\"#im-getting-an-error-the-result-of-getsnapshot-should-be-cached\",\"depth\":3,\"text\":[\"é‡åˆ°ä¸€ä¸ªé”™è¯¯ï¼šâ€œThe result of \",[\"$r\",\"code\",null,{\"children\":\"getSnapshot\"}],\" should be cachedâ€ \"]},{\"url\":\"#my-subscribe-function-gets-called-after-every-re-render\",\"depth\":3,\"text\":[\"æˆ‘çš„ \",[\"$r\",\"code\",null,{\"children\":\"subscribe\"}],\" å‡½æ•°æ¯æ¬¡é‡æ–°æ¸²æŸ“éƒ½è¢«è°ƒç”¨ \"]}]","content":"[[\"$r\",\"MaxWidth\",\"54\",{\"children\":[[\"$r\",\"Intro\",null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"useSyncExternalStore\"}],\" æ˜¯ä¸€ä¸ªè®©ä½ è®¢é˜…å¤–éƒ¨ store çš„ React Hookã€‚\"]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"const snapshot = useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot?)\\n\"}]}]]}],\"\\n\",[\"$r\",\"InlineToc\",null,{}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"reference\",\"children\":\"å‚è€ƒ \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"usesyncexternalstore\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot?)\"}],\" \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨ç»„ä»¶é¡¶å±‚è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"useSyncExternalStore\"}],\" ä»¥ä»å¤–éƒ¨ store è¯»å–å€¼ã€‚\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useSyncExternalStore } from 'react';\\nimport { todosStore } from './todoStore.js';\\n\\nfunction TodosApp() {\\n  const todos = useSyncExternalStore(todosStore.subscribe, todosStore.getSnapshot);\\n  // ...\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"å®ƒè¿”å› store ä¸­æ•°æ®çš„å¿«ç…§ã€‚ä½ éœ€è¦ä¼ ä¸¤ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼š\"}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"subscribe\"}],\" å‡½æ•°åº”å½“è®¢é˜…è¯¥ store å¹¶è¿”å›ä¸€ä¸ªå–æ¶ˆè®¢é˜…çš„å‡½æ•°ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"getSnapshot\"}],\" å‡½æ•°åº”å½“ä»è¯¥ store è¯»å–æ•°æ®çš„å¿«ç…§ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"#usage\",\"children\":\"è¯·æŸ¥çœ‹ä¸‹é¢æ›´å¤šçš„ä¾‹å­\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"parameters\",\"children\":\"å‚æ•° \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"subscribe\"}],\"ï¼šä¸€ä¸ªå‡½æ•°ï¼Œæ¥æ”¶ä¸€ä¸ªå•ç‹¬çš„ \",[\"$r\",\"code\",null,{\"children\":\"callback\"}],\" å‚æ•°å¹¶æŠŠå®ƒè®¢é˜…åˆ° store ä¸Šã€‚å½“ store å‘ç”Ÿæ”¹å˜ï¼Œå®ƒåº”å½“è°ƒç”¨è¢«æä¾›çš„ \",[\"$r\",\"code\",null,{\"children\":\"callback\"}],\"ã€‚è¿™ä¼šå¯¼è‡´ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚\",[\"$r\",\"code\",null,{\"children\":\"subscribe\"}],\" å‡½æ•°ä¼šè¿”å›æ¸…é™¤è®¢é˜…çš„å‡½æ•°ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"getSnapshot\"}],\"ï¼šä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›ç»„ä»¶éœ€è¦çš„ store ä¸­çš„æ•°æ®å¿«ç…§ã€‚åœ¨ store ä¸å˜çš„æƒ…å†µä¸‹ï¼Œé‡å¤è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"getSnapshot\"}],\" å¿…é¡»è¿”å›åŒä¸€ä¸ªå€¼ã€‚å¦‚æœ store æ”¹å˜ï¼Œå¹¶ä¸”è¿”å›å€¼ä¹Ÿä¸åŒäº†ï¼ˆç”¨ \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/is\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":[\"$r\",\"code\",null,{\"children\":\"Object.is\"}]}],\" æ¯”è¾ƒï¼‰ï¼ŒReact å°±ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"strong\",null,{\"children\":\"å¯é€‰\"}],\" \",[\"$r\",\"code\",null,{\"children\":\"getServerSnapshot\"}],\"ï¼šä¸€ä¸ªå‡½æ•°ï¼Œè¿”å› store ä¸­æ•°æ®çš„åˆå§‹å¿«ç…§ã€‚å®ƒåªä¼šåœ¨æœåŠ¡ç«¯æ¸²æŸ“æ—¶ï¼Œä»¥åŠåœ¨å®¢æˆ·ç«¯è¿›è¡ŒæœåŠ¡ç«¯æ¸²æŸ“å†…å®¹çš„ hydration æ—¶è¢«ç”¨åˆ°ã€‚å¿«ç…§åœ¨æœåŠ¡ç«¯ä¸å®¢æˆ·ç«¯ä¹‹é—´å¿…é¡»ç›¸åŒï¼Œå®ƒé€šå¸¸æ˜¯ä»æœåŠ¡ç«¯åºåˆ—åŒ–å¹¶ä¼ åˆ°å®¢æˆ·ç«¯çš„ã€‚å¦‚æœä½ å¿½ç•¥æ­¤å‚æ•°ï¼Œåœ¨æœåŠ¡ç«¯æ¸²æŸ“è¿™ä¸ªç»„ä»¶ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"returns\",\"children\":\"è¿”å›å€¼ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"è¯¥ store çš„å½“å‰å¿«ç…§ï¼Œå¯ä»¥åœ¨ä½ çš„æ¸²æŸ“é€»è¾‘ä¸­ä½¿ç”¨ã€‚\"}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"caveats\",\"children\":\"è­¦å‘Š \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"getSnapshot\"}],\" è¿”å›çš„ store å¿«ç…§å¿…é¡»æ˜¯ä¸å¯å˜çš„ã€‚å¦‚æœåº•å±‚ store æœ‰å¯å˜æ•°æ®ï¼Œè¦åœ¨æ•°æ®æ”¹å˜æ—¶è¿”å›ä¸€ä¸ªæ–°çš„ä¸å¯å˜å¿«ç…§ã€‚å¦åˆ™ï¼Œè¿”å›ä¸Šæ¬¡ç¼“å­˜çš„å¿«ç…§ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœåœ¨é‡æ–°æ¸²æŸ“æ—¶ä¼ å…¥ä¸€ä¸ªä¸åŒçš„ \",[\"$r\",\"code\",null,{\"children\":\"subscribe\"}],\" å‡½æ•°ï¼ŒReact ä¼šç”¨æ–°ä¼ å…¥çš„ \",[\"$r\",\"code\",null,{\"children\":\"subscribe\"}],\" å‡½æ•°é‡æ–°è®¢é˜…è¯¥ storeã€‚ä½ å¯ä»¥é€šè¿‡åœ¨ç»„ä»¶å¤–å£°æ˜ \",[\"$r\",\"code\",null,{\"children\":\"subscribe\"}],\" æ¥é¿å…ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœåœ¨ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useTransition\",\"children\":\"éé˜»å¡ transition æ›´æ–°\"}],\" è¿‡ç¨‹ä¸­æ›´æ”¹äº† storeï¼ŒReact å°†ä¼šå›é€€å¹¶å°†è¯¥æ›´æ–°è§†ä¸ºé˜»å¡æ›´æ–°ã€‚å…·ä½“æ¥è¯´ï¼Œåœ¨æ¯æ¬¡ transition æ›´æ–°æ—¶ï¼ŒReact å°†åœ¨å°†æ›´æ”¹åº”ç”¨åˆ° DOM ä¹‹å‰ç¬¬äºŒæ¬¡è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"getSnapshot\"}],\"ã€‚å¦‚æœå®ƒè¿”å›çš„å€¼ä¸æœ€åˆè°ƒç”¨æ—¶ä¸åŒï¼ŒReact å°†é‡æ–°ä»å¤´å¼€å§‹è¿›è¡Œæ›´æ–°ï¼Œè¿™æ¬¡å°†å…¶ä½œä¸ºé˜»å¡æ›´æ–°åº”ç”¨ï¼Œä»¥ç¡®ä¿å±å¹•ä¸Šçš„æ¯ä¸ªç»„ä»¶éƒ½åæ˜  store çš„ç›¸åŒç‰ˆæœ¬ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä¸å»ºè®®æ ¹æ® \",[\"$r\",\"code\",null,{\"children\":\"useSyncExternalStore\"}],\" è¿”å›çš„ store å€¼æš‚åœæ¸²æŸ“ã€‚åŸå› æ˜¯å¯¹å¤–éƒ¨ store çš„å˜æ›´æ— æ³• \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useTransition\",\"children\":\"è¢«æ ‡è®°ä¸ºéé˜»å¡ transition æ›´æ–°\"}],\"ï¼Œå› æ­¤å®ƒä»¬ä¼šè§¦å‘æœ€è¿‘çš„ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/Suspense\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"Suspense\"}],\" åå¤‡æ–¹æ¡ˆ\"]}],\"ï¼Œç”¨åŠ è½½æ—‹è½¬å™¨æ›¿æ¢å·²ç»å‘ˆç°åœ¨å±å¹•ä¸Šçš„å†…å®¹ï¼Œé€šå¸¸ä¼šå¯¼è‡´è¾ƒå·®çš„ç”¨æˆ·ä½“éªŒã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ä¾‹å¦‚ï¼Œä»¥ä¸‹æ“ä½œæ˜¯ä¸å»ºè®®çš„ï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"const LazyProductDetailPage = lazy(() => import('./ProductDetailPage.js'));\\n\\nfunction ShoppingApp() {\\n  const selectedProductId = useSyncExternalStore(...);\\n\\n  // âŒ Calling `use` with a Promise dependent on `selectedProductId`\\n  const data = use(fetchItem(selectedProductId))\\n\\n  // âŒ Conditionally rendering a lazy component based on `selectedProductId`\\n  return selectedProductId != null ? <LazyProductDetailPage /> : <FeaturedProducts />;\\n}\\n\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"usage\",\"children\":\"ä½¿ç”¨ \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"subscribing-to-an-external-store\",\"children\":\"è®¢é˜…å¤–éƒ¨ store \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä½ çš„å¤šæ•°ç»„ä»¶åªä¼šä»å®ƒä»¬çš„ \",[\"$r\",\"a\",null,{\"href\":\"/learn/passing-props-to-a-component\",\"children\":\"props\"}],\"ï¼Œ\",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useState\",\"children\":\"state\"}],\"ï¼Œä»¥åŠ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useContext\",\"children\":\"context\"}],\" è¯»å–æ•°æ®ã€‚ç„¶è€Œï¼Œæœ‰æ—¶ä¸€ä¸ªç»„ä»¶éœ€è¦ä»ä¸€äº› React ä¹‹å¤–çš„ store è¯»å–ä¸€äº›éšæ—¶é—´å˜åŒ–çš„æ•°æ®ã€‚è¿™åŒ…æ‹¬ï¼š\"]}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":\"åœ¨ React ä¹‹å¤–æŒæœ‰çŠ¶æ€çš„ç¬¬ä¸‰æ–¹çŠ¶æ€ç®¡ç†åº“\"}],\"\\n\",[\"$r\",\"li\",null,{\"children\":\"æš´éœ²å‡ºä¸€ä¸ªå¯å˜å€¼åŠè®¢é˜…å…¶æ”¹å˜äº‹ä»¶çš„æµè§ˆå™¨ API\"}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨ç»„ä»¶é¡¶å±‚è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"useSyncExternalStore\"}],\" ä»¥ä»å¤–éƒ¨ store è¯»å–å€¼ã€‚\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"[[1, 5, \\\"todosStore.subscribe\\\"], [2, 5, \\\"todosStore.getSnapshot\\\"], [3, 5, \\\"todos\\\", 0]]\",\"children\":\"import { useSyncExternalStore } from 'react';\\nimport { todosStore } from './todoStore.js';\\n\\nfunction TodosApp() {\\n  const todos = useSyncExternalStore(todosStore.subscribe, todosStore.getSnapshot);\\n  // ...\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å®ƒè¿”å› store ä¸­æ•°æ®çš„ \",[\"$r\",\"CodeStep\",null,{\"step\":3,\"children\":\"å¿«ç…§\"}],\"ã€‚ä½ éœ€è¦ä¼ ä¸¤ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼š\"]}],\"\\n\",[\"$r\",\"ol\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"CodeStep\",null,{\"step\":1,\"children\":[[\"$r\",\"code\",null,{\"children\":\"subscribe\"}],\" å‡½æ•°\"]}],\"åº”å½“è®¢é˜… store å¹¶è¿”å›ä¸€ä¸ªå–æ¶ˆè®¢é˜…å‡½æ•°ã€‚\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"CodeStep\",null,{\"step\":2,\"children\":[[\"$r\",\"code\",null,{\"children\":\"getSnapshot\"}],\" å‡½æ•°\"]}],\"åº”å½“ä» store ä¸­è¯»å–æ•°æ®çš„å¿«ç…§ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"React ä¼šç”¨è¿™äº›å‡½æ•°æ¥ä¿æŒä½ çš„ç»„ä»¶è®¢é˜…åˆ° store å¹¶åœ¨å®ƒæ”¹å˜æ—¶é‡æ–°æ¸²æŸ“ã€‚\"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä¾‹å¦‚ï¼Œåœ¨ä¸‹é¢çš„æ²™ç›’ä¸­ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"todosStore\"}],\" è¢«å®ç°ä¸ºä¸€ä¸ªä¿å­˜ React ä¹‹å¤–æ•°æ®çš„å¤–éƒ¨ storeã€‚\",[\"$r\",\"code\",null,{\"children\":\"TodosApp\"}],\" ç»„ä»¶é€šè¿‡ \",[\"$r\",\"code\",null,{\"children\":\"useSyncExternalStore\"}],\" Hook è¿æ¥åˆ°å¤–éƒ¨ storeã€‚\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useSyncExternalStore } from 'react';\\nimport { todosStore } from './todoStore.js';\\n\\nexport default function TodosApp() {\\n  const todos = useSyncExternalStore(todosStore.subscribe, todosStore.getSnapshot);\\n  return (\\n    <>\\n      <button onClick={() => todosStore.addTodo()}>Add todo</button>\\n      <hr />\\n      <ul>\\n        {todos.map(todo => (\\n          <li key={todo.id}>{todo.text}</li>\\n        ))}\\n      </ul>\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/todoStore.js\",\"children\":\"// è¿™æ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹ store çš„ä¾‹å­ï¼Œ\\n// ä½ å¯èƒ½éœ€è¦æŠŠå®ƒä¸ React é›†æˆã€‚\\n\\n// å¦‚æœä½ çš„åº”ç”¨å®Œå…¨ç”± React æ„å»ºï¼Œ\\n// æˆ‘ä»¬æ¨èä½¿ç”¨ React state æ›¿ä»£ã€‚\\n\\nlet nextId = 0;\\nlet todos = [{ id: nextId++, text: 'Todo #1' }];\\nlet listeners = [];\\n\\nexport const todosStore = {\\n  addTodo() {\\n    todos = [...todos, { id: nextId++, text: 'Todo #' + nextId }]\\n    emitChange();\\n  },\\n  subscribe(listener) {\\n    listeners = [...listeners, listener];\\n    return () => {\\n      listeners = listeners.filter(l => l !== listener);\\n    };\\n  },\\n  getSnapshot() {\\n    return todos;\\n  }\\n};\\n\\nfunction emitChange() {\\n  for (let listener of listeners) {\\n    listener();\\n  }\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"78\",{\"children\":[\"\\n\",[\"$r\",\"Note\",null,{\"children\":[\"$r\",\"p\",null,{\"children\":[\"å½“å¯èƒ½çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ¨èé€šè¿‡ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useState\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useState\"}]}],\" å’Œ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useReducer\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useReducer\"}]}],\" ä½¿ç”¨å†…å»ºçš„ React state ä»£æ›¿ã€‚å¦‚æœä½ éœ€è¦å»é›†æˆå·²æœ‰çš„é React ä»£ç ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"useSyncExternalStore\"}],\" API æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚\"]}]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"subscribing-to-a-browser-api\",\"children\":\"è®¢é˜…æµè§ˆå™¨ API \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"æ·»åŠ  \",[\"$r\",\"code\",null,{\"children\":\"useSyncExternalStore\"}],\" çš„å¦ä¸€ä¸ªåœºæ™¯æ˜¯å½“ä½ æƒ³è®¢é˜…ä¸€äº›ç”±æµè§ˆå™¨æš´éœ²çš„å¹¶éšæ—¶é—´å˜åŒ–çš„å€¼æ—¶ã€‚ä¾‹å¦‚ï¼Œå‡è®¾ä½ æƒ³è¦ç»„ä»¶å±•ç¤ºç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸ã€‚æµè§ˆå™¨é€šè¿‡ä¸€ä¸ªå«åš \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/API/Navigator/onLine\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":[\"$r\",\"code\",null,{\"children\":\"navigator.onLine\"}]}],\" çš„å±æ€§æš´éœ²å‡ºè¿™ä¸€ä¿¡æ¯ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è¿™ä¸ªå€¼å¯èƒ½åœ¨ React ä¸çŸ¥é“çš„æƒ…å†µä¸‹æ”¹å˜ï¼Œæ‰€ä»¥ä½ åº”å½“é€šè¿‡ \",[\"$r\",\"code\",null,{\"children\":\"useSyncExternalStore\"}],\" æ¥è¯»å–å®ƒã€‚\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useSyncExternalStore } from 'react';\\n\\nfunction ChatIndicator() {\\n  const isOnline = useSyncExternalStore(subscribe, getSnapshot);\\n  // ...\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä»æµè§ˆå™¨ API è¯»å–å½“å‰å€¼ï¼Œæ¥å®ç° \",[\"$r\",\"code\",null,{\"children\":\"getSnapshot\"}],\" å‡½æ•°ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"function getSnapshot() {\\n  return navigator.onLine;\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"æ¥ä¸‹æ¥ï¼Œä½ éœ€è¦å®ç° \",[\"$r\",\"code\",null,{\"children\":\"subscribe\"}],\" å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œå½“ \",[\"$r\",\"code\",null,{\"children\":\"navigator.onLine\"}],\" æ”¹å˜ï¼Œæµè§ˆå™¨è§¦å‘ \",[\"$r\",\"code\",null,{\"children\":\"window\"}],\" å¯¹è±¡çš„ \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/online_event\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":[\"$r\",\"code\",null,{\"children\":\"online\"}]}],\" å’Œ \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/API/Window/offline_event\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":[\"$r\",\"code\",null,{\"children\":\"offline\"}]}],\" äº‹ä»¶ï¼Œç„¶åè¿”å›ä¸€ä¸ªæ¸…é™¤è®¢é˜…çš„å‡½æ•°ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"function subscribe(callback) {\\n  window.addEventListener('online', callback);\\n  window.addEventListener('offline', callback);\\n  return () => {\\n    window.removeEventListener('online', callback);\\n    window.removeEventListener('offline', callback);\\n  };\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ç°åœ¨ React çŸ¥é“å¦‚ä½•ä»å¤–éƒ¨çš„ \",[\"$r\",\"code\",null,{\"children\":\"navigator.onLine\"}],\" API è¯»åˆ°è¿™ä¸ªå€¼ï¼Œä»¥åŠå¦‚ä½•è®¢é˜…å…¶æ”¹å˜ã€‚æ–­å¼€ä½ çš„è®¾å¤‡çš„ç½‘ç»œï¼Œå°±å¯ä»¥è§‚å¯Ÿåˆ°ç»„ä»¶é‡æ–°æ¸²æŸ“äº†ï¼š\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useSyncExternalStore } from 'react';\\n\\nexport default function ChatIndicator() {\\n  const isOnline = useSyncExternalStore(subscribe, getSnapshot);\\n  return <h1>{isOnline ? 'âœ… Online' : 'âŒ Disconnected'}</h1>;\\n}\\n\\nfunction getSnapshot() {\\n  return navigator.onLine;\\n}\\n\\nfunction subscribe(callback) {\\n  window.addEventListener('online', callback);\\n  window.addEventListener('offline', callback);\\n  return () => {\\n    window.removeEventListener('online', callback);\\n    window.removeEventListener('offline', callback);\\n  };\\n}\\n\"}]}]}],[\"$r\",\"MaxWidth\",\"92\",{\"children\":[\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"extracting-the-logic-to-a-custom-hook\",\"children\":\"æŠŠé€»è¾‘æŠ½å–åˆ°è‡ªå®šä¹‰ Hook \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"é€šå¸¸ä¸ä¼šåœ¨ç»„ä»¶é‡Œç›´æ¥ç”¨ \",[\"$r\",\"code\",null,{\"children\":\"useSyncExternalStore\"}],\"ï¼Œè€Œæ˜¯åœ¨è‡ªå®šä¹‰ Hook é‡Œè°ƒç”¨å®ƒã€‚è¿™ä½¿å¾—ä½ å¯ä»¥åœ¨ä¸åŒç»„ä»¶é‡Œä½¿ç”¨ç›¸åŒçš„å¤–éƒ¨ storeã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä¾‹å¦‚ï¼šè¿™é‡Œè‡ªå®šä¹‰çš„ \",[\"$r\",\"code\",null,{\"children\":\"useOnlineStatus\"}],\" Hook è¿½è¸ªç½‘ç»œæ˜¯å¦åœ¨çº¿ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{3,6}\",\"children\":\"import { useSyncExternalStore } from 'react';\\n\\nexport function useOnlineStatus() {\\n  const isOnline = useSyncExternalStore(subscribe, getSnapshot);\\n  return isOnline;\\n}\\n\\nfunction getSnapshot() {\\n  // ...\\n}\\n\\nfunction subscribe(callback) {\\n  // ...\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ç°åœ¨ä¸åŒçš„ç»„ä»¶éƒ½å¯ä»¥è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"useOnlineStatus\"}],\"ï¼Œè€Œä¸å¿…é‡å¤åº•å±‚å®ç°ï¼š\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { useOnlineStatus } from './useOnlineStatus.js';\\n\\nfunction StatusBar() {\\n  const isOnline = useOnlineStatus();\\n  return <h1>{isOnline ? 'âœ… Online' : 'âŒ Disconnected'}</h1>;\\n}\\n\\nfunction SaveButton() {\\n  const isOnline = useOnlineStatus();\\n\\n  function handleSaveClick() {\\n    console.log('âœ… Progress saved');\\n  }\\n\\n  return (\\n    <button disabled={!isOnline} onClick={handleSaveClick}>\\n      {isOnline ? 'Save progress' : 'Reconnecting...'}\\n    </button>\\n  );\\n}\\n\\nexport default function App() {\\n  return (\\n    <>\\n      <SaveButton />\\n      <StatusBar />\\n    </>\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/useOnlineStatus.js\",\"children\":\"import { useSyncExternalStore } from 'react';\\n\\nexport function useOnlineStatus() {\\n  const isOnline = useSyncExternalStore(subscribe, getSnapshot);\\n  return isOnline;\\n}\\n\\nfunction getSnapshot() {\\n  return navigator.onLine;\\n}\\n\\nfunction subscribe(callback) {\\n  window.addEventListener('online', callback);\\n  window.addEventListener('offline', callback);\\n  return () => {\\n    window.removeEventListener('online', callback);\\n    window.removeEventListener('offline', callback);\\n  };\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"last\",{\"children\":[\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"adding-support-for-server-rendering\",\"children\":\"æ·»åŠ æœåŠ¡ç«¯æ¸²æŸ“æ”¯æŒ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœä½ çš„ React åº”ç”¨ä½¿ç”¨ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react-dom/server\",\"children\":\"æœåŠ¡ç«¯æ¸²æŸ“\"}],\"ï¼Œä½ çš„ React ç»„ä»¶ä¹Ÿä¼šè¿è¡Œåœ¨æµè§ˆå™¨ç¯å¢ƒä¹‹å¤–æ¥ç”Ÿæˆåˆå§‹ HTMLã€‚è¿™ç»™è¿æ¥åˆ°å¤–éƒ¨ store é€ æˆäº†ä¸€äº›æŒ‘æˆ˜ï¼š\"]}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":\"å¦‚æœä½ è¿æ¥åˆ°ä¸€ä¸ªæµè§ˆå™¨ç‰¹æœ‰çš„ APIï¼Œå› ä¸ºå®ƒåœ¨æœåŠ¡ç«¯ä¸å­˜åœ¨ï¼Œæ‰€ä»¥æ˜¯ä¸å¯è¡Œçš„ã€‚\"}],\"\\n\",[\"$r\",\"li\",null,{\"children\":\"å¦‚æœä½ è¿æ¥åˆ°ä¸€ä¸ªç¬¬ä¸‰æ–¹ storeï¼Œæ•°æ®è¦åœ¨æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯ä¹‹é—´ç›¸åŒ¹é…ã€‚\"}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä¸ºäº†è§£å†³è¿™äº›é—®é¢˜ï¼Œè¦ä¼ ä¸€ä¸ª \",[\"$r\",\"code\",null,{\"children\":\"getServerSnapshot\"}],\" å‡½æ•°ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ç»™ \",[\"$r\",\"code\",null,{\"children\":\"useSyncExternalStore\"}],\"ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{4,12-14}\",\"children\":\"import { useSyncExternalStore } from 'react';\\n\\nexport function useOnlineStatus() {\\n  const isOnline = useSyncExternalStore(subscribe, getSnapshot, getServerSnapshot);\\n  return isOnline;\\n}\\n\\nfunction getSnapshot() {\\n  return navigator.onLine;\\n}\\n\\nfunction getServerSnapshot() {\\n  return true; // æœåŠ¡ç«¯ç”Ÿæˆçš„ HTML æ€»æ˜¯æ˜¾ç¤ºâ€œåœ¨çº¿â€\\n}\\n\\nfunction subscribe(callback) {\\n  // ...\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"getServerSnapshot\"}],\" å‡½æ•°ä¸ \",[\"$r\",\"code\",null,{\"children\":\"getSnapshot\"}],\" ç›¸ä¼¼ï¼Œä½†å®ƒåªåœ¨ä¸¤ç§æƒ…å†µä¸‹æ‰è¿è¡Œï¼š\"]}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":\"åœ¨æœåŠ¡ç«¯ç”Ÿæˆ HTML æ—¶ã€‚\"}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"åœ¨å®¢æˆ·ç«¯ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react-dom/client/hydrateRoot\",\"children\":\"hydration\"}],\" æ—¶ï¼Œå³ï¼šå½“ React æ‹¿åˆ°æœåŠ¡ç«¯çš„ HTML å¹¶ä½¿å…¶å¯äº¤äº’ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"This lets you provide the initial snapshot value which will be used before the app becomes interactive. If there is no meaningful initial value for the server rendering, omit this argument to \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/Suspense#providing-a-fallback-for-server-errors-and-client-only-content\",\"children\":\"force rendering on the client.\"}]]}],\"\\n\",[\"$r\",\"Note\",null,{\"children\":[\"$r\",\"p\",null,{\"children\":[\"ç¡®ä¿å®¢æˆ·ç«¯åˆå§‹æ¸²æŸ“ä¸æœåŠ¡ç«¯æ¸²æŸ“æ—¶ \",[\"$r\",\"code\",null,{\"children\":\"getServerSnapshot\"}],\" è¿”å›å®Œå…¨ç›¸åŒçš„æ•°æ®ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåœ¨æœåŠ¡ç«¯ \",[\"$r\",\"code\",null,{\"children\":\"getServerSnapshot\"}],\" è¿”å›ä¸€äº›é¢„å…ˆè½½å…¥çš„ store å†…å®¹ï¼Œä½ å°±éœ€è¦æŠŠè¿™äº›å†…å®¹ä¹Ÿä¼ ç»™å®¢æˆ·ç«¯ã€‚ä¸€ç§æ–¹æ³•æ˜¯åœ¨æœåŠ¡ç«¯æ¸²æŸ“æ—¶ï¼Œç”Ÿæˆ \",[\"$r\",\"code\",null,{\"children\":\"<script>\"}],\" æ ‡ç­¾æ¥è®¾ç½®åƒ \",[\"$r\",\"code\",null,{\"children\":\"window.MY_STORE_DATA\"}],\" è¿™æ ·çš„å…¨å±€å˜é‡ï¼Œå¹¶åœ¨å®¢æˆ·ç«¯ \",[\"$r\",\"code\",null,{\"children\":\"getServerSnapshot\"}],\" å†…è¯»å–æ­¤å…¨å±€å˜é‡ã€‚ä½ çš„å¤–éƒ¨ store åº”å½“æä¾›å¦‚ä½•è¿™æ ·åšçš„è¯´æ˜ã€‚\"]}]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"troubleshooting\",\"children\":\"ç–‘éš¾è§£ç­” \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"im-getting-an-error-the-result-of-getsnapshot-should-be-cached\",\"children\":[\"é‡åˆ°ä¸€ä¸ªé”™è¯¯ï¼šâ€œThe result of \",[\"$r\",\"code\",null,{\"children\":\"getSnapshot\"}],\" should be cachedâ€ \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è¿™ä¸ªé”™è¯¯æ„å‘³ç€ä½ çš„ \",[\"$r\",\"code\",null,{\"children\":\"getSnapshot\"}],\" å‡½æ•°æ¯æ¬¡è°ƒç”¨éƒ½è¿”å›äº†ä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä¾‹å¦‚ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{2-5}\",\"children\":\"function getSnapshot() {\\n  // ğŸ”´ getSnapshot ä¸è¦æ€»æ˜¯è¿”å›ä¸åŒçš„å¯¹è±¡\\n  return {\\n    todos: myStore.todos\\n  };\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœ \",[\"$r\",\"code\",null,{\"children\":\"getSnapshot\"}],\" è¿”å›å€¼ä¸åŒäºä¸Šä¸€æ¬¡ï¼ŒReact ä¼šé‡æ–°æ¸²æŸ“ç»„ä»¶ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆï¼Œå¦‚æœæ€»æ˜¯è¿”å›ä¸€ä¸ªä¸åŒçš„å€¼ï¼Œä¼šè¿›å…¥åˆ°ä¸€ä¸ªæ— é™å¾ªç¯ï¼Œå¹¶äº§ç”Ÿè¿™ä¸ªæŠ¥é”™ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åªæœ‰å½“ç¡®å®æœ‰ä¸œè¥¿æ”¹å˜äº†ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"getSnapshot\"}],\" æ‰åº”è¯¥è¿”å›ä¸€ä¸ªä¸åŒçš„å¯¹è±¡ã€‚å¦‚æœä½ çš„ store åŒ…å«ä¸å¯å˜æ•°æ®ï¼Œå¯ä»¥ç›´æ¥è¿”å›æ­¤æ•°æ®ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{2-3}\",\"children\":\"function getSnapshot() {\\n  // âœ… ä½ å¯ä»¥è¿”å›ä¸å¯å˜æ•°æ®\\n  return myStore.todos;\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœä½ çš„ store æ•°æ®æ˜¯å¯å˜çš„ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"getSnapshot\"}],\" å‡½æ•°åº”å½“è¿”å›ä¸€ä¸ªå®ƒçš„ä¸å¯å˜å¿«ç…§ã€‚è¿™æ„å‘³ç€ \",[\"$r\",\"strong\",null,{\"children\":\"ç¡®å®\"}],\" éœ€è¦åˆ›å»ºæ–°å¯¹è±¡ï¼Œä½†ä¸æ˜¯æ¯æ¬¡è°ƒç”¨éƒ½å¦‚æ­¤ã€‚è€Œæ˜¯åº”å½“ä¿å­˜æœ€åä¸€æ¬¡è®¡ç®—å¾—åˆ°çš„å¿«ç…§ï¼Œå¹¶ä¸”åœ¨ store ä¸­çš„æ•°æ®ä¸å˜çš„æƒ…å†µä¸‹ï¼Œè¿”å›ä¸ä¸Šä¸€æ¬¡ç›¸åŒçš„å¿«ç…§ã€‚å¦‚ä½•å†³å®šå¯å˜æ•°æ®å‘ç”Ÿäº†æ”¹å˜åˆ™å–å†³äºä½ çš„å¯å˜ storeã€‚\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"my-subscribe-function-gets-called-after-every-re-render\",\"children\":[\"æˆ‘çš„ \",[\"$r\",\"code\",null,{\"children\":\"subscribe\"}],\" å‡½æ•°æ¯æ¬¡é‡æ–°æ¸²æŸ“éƒ½è¢«è°ƒç”¨ \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è¿™é‡Œçš„ \",[\"$r\",\"code\",null,{\"children\":\"subscribe\"}],\" å‡½æ•°æ˜¯åœ¨ç»„ä»¶ \",[\"$r\",\"strong\",null,{\"children\":\"å†…éƒ¨\"}],\" å®šä¹‰çš„ï¼Œæ‰€ä»¥å®ƒæ¯æ¬¡æ¸²æŸ“éƒ½ä¸åŒï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{4-7}\",\"children\":\"function ChatIndicator() {\\n  const isOnline = useSyncExternalStore(subscribe, getSnapshot);\\n  \\n  // ğŸš© æ€»æ˜¯ä¸åŒçš„å‡½æ•°ï¼Œæ‰€ä»¥ React æ¯æ¬¡é‡æ–°æ¸²æŸ“éƒ½ä¼šé‡æ–°è®¢é˜…\\n  function subscribe() {\\n    // ...\\n  }\\n\\n  // ...\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"å¦‚æœé‡æ–°æ¸²æŸ“æ—¶ä½ ä¼ ä¸€ä¸ªä¸åŒçš„ \",[\"$r\",\"code\",null,{\"children\":\"subscribe\"}],\" å‡½æ•°ï¼ŒReact ä¼šé‡æ–°è®¢é˜…ä½ çš„ storeã€‚å¦‚æœè¿™é€ æˆäº†æ€§èƒ½é—®é¢˜ï¼Œå› è€Œä½ æƒ³é¿å…é‡æ–°è®¢é˜…ï¼Œå°±æŠŠ \",[\"$r\",\"code\",null,{\"children\":\"subscribe\"}],\" å‡½æ•°ç§»åˆ°å¤–é¢ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{6-9}\",\"children\":\"function ChatIndicator() {\\n  const isOnline = useSyncExternalStore(subscribe, getSnapshot);\\n  // ...\\n}\\n\\n// âœ… æ€»æ˜¯ç›¸åŒçš„å‡½æ•°ï¼Œæ‰€ä»¥ React ä¸éœ€è¦é‡æ–°è®¢é˜…\\nfunction subscribe() {\\n  // ...\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"æˆ–è€…ï¼ŒæŠŠ \",[\"$r\",\"code\",null,{\"children\":\"subscribe\"}],\" åŒ…åœ¨ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/useCallback\",\"children\":[\"$r\",\"code\",null,{\"children\":\"useCallback\"}]}],\" é‡Œé¢ä»¥ä¾¿åªåœ¨æŸäº›å‚æ•°æ”¹å˜æ—¶é‡æ–°è®¢é˜…ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{4-8}\",\"children\":\"function ChatIndicator({ userId }) {\\n  const isOnline = useSyncExternalStore(subscribe, getSnapshot);\\n  \\n  // âœ… åªè¦ userId ä¸å˜ï¼Œéƒ½æ˜¯åŒä¸€ä¸ªå‡½æ•°\\n  const subscribe = useCallback(() => {\\n    // ...\\n  }, [userId]);\\n\\n  // ...\\n}\\n\"}]}]]}]]","meta":{"title":"useSyncExternalStore"}},"__N_SSG":true}