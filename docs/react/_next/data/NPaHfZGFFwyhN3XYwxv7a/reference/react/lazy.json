{"pageProps":{"toc":"[{\"url\":\"#\",\"text\":\"æ¦‚è§ˆ\",\"depth\":2},{\"url\":\"#reference\",\"depth\":2,\"text\":\"å‚è€ƒ \"},{\"url\":\"#lazy\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"lazy(load)\"}],\" \"]},{\"url\":\"#load\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"load\"}],\" å‡½æ•° \"]},{\"url\":\"#usage\",\"depth\":2,\"text\":\"ä½¿ç”¨æ–¹æ³• \"},{\"url\":\"#suspense-for-code-splitting\",\"depth\":3,\"text\":\"ä½¿ç”¨ Suspense å®ç°æ‡’åŠ è½½ç»„ä»¶ \"},{\"url\":\"#troubleshooting\",\"depth\":2,\"text\":\"ç–‘éš¾è§£ç­” \"},{\"url\":\"#my-lazy-components-state-gets-reset-unexpectedly\",\"depth\":3,\"text\":[\"æˆ‘çš„ \",[\"$r\",\"code\",null,{\"children\":\"lazy\"}],\" ç»„ä»¶çŠ¶æ€æ„å¤–é‡ç½® \"]}]","content":"[[\"$r\",\"MaxWidth\",\"58\",{\"children\":[[\"$r\",\"Intro\",null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"lazy\"}],\" èƒ½å¤Ÿè®©ä½ åœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡è¢«æ¸²æŸ“ä¹‹å‰å»¶è¿ŸåŠ è½½ç»„ä»¶çš„ä»£ç ã€‚\"]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"const SomeComponent = lazy(load)\\n\"}]}]]}],\"\\n\",[\"$r\",\"InlineToc\",null,{}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"reference\",\"children\":\"å‚è€ƒ \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"lazy\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"lazy(load)\"}],\" \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨ç»„ä»¶å¤–éƒ¨è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"lazy\"}],\"ï¼Œä»¥å£°æ˜ä¸€ä¸ªæ‡’åŠ è½½çš„ React ç»„ä»¶:\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { lazy } from 'react';\\n\\nconst MarkdownPreview = lazy(() => import('./MarkdownPreview.js'));\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"#usage\",\"children\":\"è¯·çœ‹ä¸‹é¢çš„æ›´å¤šä¾‹å­\"}],\"ã€‚\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"parameters\",\"children\":\"å‚æ•° \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"load\"}],\": ä¸€ä¸ªè¿”å› \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"Promise\"}],\" æˆ–å¦ä¸€ä¸ª \",[\"$r\",\"strong\",null,{\"children\":\"thenable\"}],\"ï¼ˆå…·æœ‰ \",[\"$r\",\"code\",null,{\"children\":\"then\"}],\" æ–¹æ³•çš„ç±» Promise å¯¹è±¡ï¼‰çš„å‡½æ•°ã€‚React ä¸ä¼šåœ¨ä½ å°è¯•é¦–æ¬¡æ¸²æŸ“è¿”å›çš„ç»„ä»¶ä¹‹å‰è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"load\"}],\" å‡½æ•°ã€‚åœ¨ React é¦–æ¬¡è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"load\"}],\" åï¼Œå®ƒå°†ç­‰å¾…å…¶è§£æï¼Œç„¶åå°†è§£æå€¼çš„ \",[\"$r\",\"code\",null,{\"children\":\".default\"}],\" æ¸²æŸ“ä¸º React ç»„ä»¶ã€‚è¿”å›çš„ Promise å’Œ Promise çš„è§£æå€¼éƒ½å°†è¢«ç¼“å­˜ï¼Œå› æ­¤ React ä¸ä¼šå¤šæ¬¡è°ƒç”¨ \",[\"$r\",\"code\",null,{\"children\":\"load\"}],\" å‡½æ•°ã€‚å¦‚æœ Promise è¢«æ‹’ç»ï¼Œåˆ™ React å°†æŠ›å‡ºæ‹’ç»åŸå› ç»™æœ€è¿‘çš„é”™è¯¯è¾¹ç•Œå¤„ç†ã€‚\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"returns\",\"children\":\"è¿”å›å€¼ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"lazy\"}],\" è¿”å›ä¸€ä¸ª React ç»„ä»¶ï¼Œä½ å¯ä»¥åœ¨ fiber æ ‘ä¸­æ¸²æŸ“ã€‚å½“æ‡’åŠ è½½ç»„ä»¶çš„ä»£ç ä»åœ¨åŠ è½½æ—¶ï¼Œå°è¯•æ¸²æŸ“å®ƒå°†ä¼šå¤„äº \",[\"$r\",\"em\",null,{\"children\":\"æš‚åœ\"}],\" çŠ¶æ€ã€‚ä½¿ç”¨ \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/Suspense\",\"children\":[\"$r\",\"code\",null,{\"children\":\"<Suspense>\"}]}],\" å¯ä»¥åœ¨å…¶åŠ è½½æ—¶æ˜¾ç¤ºä¸€ä¸ªæ­£åœ¨åŠ è½½çš„æç¤ºã€‚\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"load\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"load\"}],\" å‡½æ•° \"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"load-parameters\",\"children\":\"å‚æ•° \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"load\"}],\" ä¸æ¥æ”¶ä»»ä½•å‚æ•°ã€‚\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"load-returns\",\"children\":\"è¿”å›å€¼ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä½ éœ€è¦è¿”å›ä¸€ä¸ª \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"Promise\"}],\" æˆ–å…¶ä»– \",[\"$r\",\"strong\",null,{\"children\":\"thenable\"}],\"ï¼ˆå…·æœ‰ \",[\"$r\",\"code\",null,{\"children\":\"then\"}],\" æ–¹æ³•çš„ç±» Promise å¯¹è±¡ï¼‰ã€‚å®ƒæœ€ç»ˆéœ€è¦è§£æä¸ºæœ‰æ•ˆçš„ React ç»„ä»¶ç±»å‹ï¼Œä¾‹å¦‚å‡½æ•°ã€\",[\"$r\",\"a\",null,{\"href\":\"/reference/react/memo\",\"children\":[\"$r\",\"code\",null,{\"children\":\"memo\"}]}],\" æˆ– \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/forwardRef\",\"children\":[\"$r\",\"code\",null,{\"children\":\"forwardRef\"}]}],\" ç»„ä»¶ã€‚\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"usage\",\"children\":\"ä½¿ç”¨æ–¹æ³• \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"suspense-for-code-splitting\",\"children\":\"ä½¿ç”¨ Suspense å®ç°æ‡’åŠ è½½ç»„ä»¶ \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"é€šå¸¸ï¼Œä½ å¯ä»¥ä½¿ç”¨é™æ€ \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/import\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":[\"$r\",\"code\",null,{\"children\":\"import\"}]}],\" å£°æ˜æ¥å¯¼å…¥ç»„ä»¶ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import MarkdownPreview from './MarkdownPreview.js';\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"å¦‚æœæƒ³åœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“å‰å»¶è¿ŸåŠ è½½è¿™ä¸ªç»„ä»¶çš„ä»£ç ï¼Œè¯·æ›¿æ¢æˆä»¥ä¸‹å¯¼å…¥æ–¹å¼ï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { lazy } from 'react';\\n\\nconst MarkdownPreview = lazy(() => import('./MarkdownPreview.js'));\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"æ­¤ä»£ç ä¾èµ–äº \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/import\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":[\"åŠ¨æ€ \",[\"$r\",\"code\",null,{\"children\":\"import()\"}]]}],\"ï¼Œå› æ­¤å¯èƒ½éœ€è¦ä½ çš„æ‰“åŒ…å·¥å…·æˆ–æ¡†æ¶æä¾›æ”¯æŒã€‚ä½¿ç”¨è¿™ç§æ¨¡å¼è¦æ±‚å¯¼å…¥çš„æ‡’åŠ è½½ç»„ä»¶å¿…é¡»ä½œä¸º \",[\"$r\",\"code\",null,{\"children\":\"default\"}],\" å¯¼å‡ºã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ç°åœ¨ä½ çš„ç»„ä»¶ä»£ç å¯ä»¥æŒ‰éœ€åŠ è½½ï¼ŒåŒæ—¶ä½ éœ€è¦æŒ‡å®šåœ¨å®ƒæ­£åœ¨åŠ è½½æ—¶åº”è¯¥æ˜¾ç¤ºä»€ä¹ˆã€‚ä½ å¯ä»¥é€šè¿‡å°†æ‡’åŠ è½½ç»„ä»¶æˆ–å…¶ä»»ä½•çˆ¶çº§åŒ…è£…åˆ° \",[\"$r\",\"a\",null,{\"href\":\"/reference/react/Suspense\",\"children\":[\"$r\",\"code\",null,{\"children\":\"<Suspense>\"}]}],\" è¾¹ç•Œä¸­æ¥å®ç°ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{1,4}\",\"children\":\"<Suspense fallback={<Loading />}>\\n  <h2>Preview</h2>\\n  <MarkdownPreview />\\n </Suspense>\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"MarkdownPreview\"}],\" çš„ä»£ç åªæœ‰åœ¨ä½ å°è¯•æ¸²æŸ“å®ƒæ—¶æ‰ä¼šè¢«åŠ è½½ã€‚å¦‚æœ \",[\"$r\",\"code\",null,{\"children\":\"MarkdownPreview\"}],\" è¿˜æ²¡æœ‰åŠ è½½å®Œæˆï¼Œå°†æ˜¾ç¤º \",[\"$r\",\"code\",null,{\"children\":\"Loading\"}],\"ã€‚è¯·å°è¯•å‹¾é€‰å¤é€‰æ¡†ï¼š\"]}],\"\\n\"]}],[\"$r\",\"Sandpack\",null,{\"children\":[[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/App.js\",\"children\":\"import { useState, Suspense, lazy } from 'react';\\nimport Loading from './Loading.js';\\n\\nconst MarkdownPreview = lazy(() => delayForDemo(import('./MarkdownPreview.js')));\\n\\nexport default function MarkdownEditor() {\\n  const [showPreview, setShowPreview] = useState(false);\\n  const [markdown, setMarkdown] = useState('Hello, **world**!');\\n  return (\\n    <>\\n      <textarea value={markdown} onChange={e => setMarkdown(e.target.value)} />\\n      <label>\\n        <input type=\\\"checkbox\\\" checked={showPreview} onChange={e => setShowPreview(e.target.checked)} />\\n        Show preview\\n      </label>\\n      <hr />\\n      {showPreview && (\\n        <Suspense fallback={<Loading />}>\\n          <h2>Preview</h2>\\n          <MarkdownPreview markdown={markdown} />\\n        </Suspense>\\n      )}\\n    </>\\n  );\\n}\\n\\n// æ·»åŠ ä¸€ä¸ªå›ºå®šçš„å»¶è¿Ÿæ—¶é—´ï¼Œä»¥ä¾¿ä½ å¯ä»¥çœ‹åˆ°åŠ è½½çŠ¶æ€\\nfunction delayForDemo(promise) {\\n  return new Promise(resolve => {\\n    setTimeout(resolve, 2000);\\n  }).then(() => promise);\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/Loading.js\",\"children\":\"export default function Loading() {\\n  return <p><i>Loading...</i></p>;\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"src/MarkdownPreview.js\",\"children\":\"import { Remarkable } from 'remarkable';\\n\\nconst md = new Remarkable();\\n\\nexport default function MarkdownPreview({ markdown }) {\\n  return (\\n    <div\\n      className=\\\"content\\\"\\n      dangerouslySetInnerHTML={{__html: md.render(markdown)}}\\n    />\\n  );\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-json\",\"meta\":\"package.json hidden\",\"children\":\"{\\n  \\\"dependencies\\\": {\\n    \\\"immer\\\": \\\"1.7.3\\\",\\n    \\\"react\\\": \\\"latest\\\",\\n    \\\"react-dom\\\": \\\"latest\\\",\\n    \\\"react-scripts\\\": \\\"latest\\\",\\n    \\\"remarkable\\\": \\\"2.0.1\\\"\\n  },\\n  \\\"scripts\\\": {\\n    \\\"start\\\": \\\"react-scripts start\\\",\\n    \\\"build\\\": \\\"react-scripts build\\\",\\n    \\\"test\\\": \\\"react-scripts test --env=jsdom\\\",\\n    \\\"eject\\\": \\\"react-scripts eject\\\"\\n  }\\n}\\n\"}]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-css\",\"children\":\"label {\\n  display: block;\\n}\\n\\ninput, textarea {\\n  margin-bottom: 10px;\\n}\\n\\nbody {\\n  min-height: 200px;\\n}\\n\"}]}]]}],[\"$r\",\"MaxWidth\",\"last\",{\"children\":[\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"è¿™ä¸ªç¤ºä¾‹ä»£ç äººä¸ºåœ°å»¶è¿Ÿäº†åŠ è½½ã€‚åœ¨ä½ ä¸‹æ¬¡å–æ¶ˆé€‰ä¸­å¹¶é‡æ–°é€‰ä¸­å¤é€‰æ¡†æ—¶ï¼Œ\",[\"$r\",\"code\",null,{\"children\":\"Preview\"}],\" å°†è¢«ç¼“å­˜ï¼Œå› æ­¤ä¸ä¼šå‡ºç°åŠ è½½çŠ¶æ€ã€‚è¦å†æ¬¡æŸ¥çœ‹åŠ è½½çŠ¶æ€ï¼Œè¯·åœ¨ç¤ºä¾‹ä¸­å•å‡»â€œResetâ€ã€‚\"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"/reference/react/Suspense\",\"children\":\"äº†è§£å¦‚ä½•ä½¿ç”¨ Suspense ç®¡ç†åŠ è½½çŠ¶æ€ã€‚\"}]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"troubleshooting\",\"children\":\"ç–‘éš¾è§£ç­” \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"my-lazy-components-state-gets-reset-unexpectedly\",\"children\":[\"æˆ‘çš„ \",[\"$r\",\"code\",null,{\"children\":\"lazy\"}],\" ç»„ä»¶çŠ¶æ€æ„å¤–é‡ç½® \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"ä¸è¦åœ¨å…¶ä»–ç»„ä»¶ \",[\"$r\",\"em\",null,{\"children\":\"å†…éƒ¨\"}],\" å£°æ˜ \",[\"$r\",\"code\",null,{\"children\":\"lazy\"}],\" ç»„ä»¶ï¼š\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{4-5}\",\"children\":\"import { lazy } from 'react';\\n\\nfunction Editor() {\\n  // ğŸ”´ Bad: è¿™å°†å¯¼è‡´åœ¨é‡æ–°æ¸²æŸ“æ—¶é‡ç½®æ‰€æœ‰çŠ¶æ€\\n  const MarkdownPreview = lazy(() => import('./MarkdownPreview.js'));\\n  // ...\\n}\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":\"ç›¸åï¼Œæ€»æ˜¯åœ¨æ¨¡å—çš„é¡¶å±‚å£°æ˜å®ƒä»¬ï¼š\"}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"meta\":\"{3-4}\",\"children\":\"import { lazy } from 'react';\\n\\n// âœ… Good: å°† lazy ç»„ä»¶å£°æ˜åœ¨ç»„ä»¶å¤–éƒ¨\\nconst MarkdownPreview = lazy(() => import('./MarkdownPreview.js'));\\n\\nfunction Editor() {\\n  // ...\\n}\\n\"}]}]]}]]","meta":{"title":"lazy","translators":["Davont"]}},"__N_SSG":true}