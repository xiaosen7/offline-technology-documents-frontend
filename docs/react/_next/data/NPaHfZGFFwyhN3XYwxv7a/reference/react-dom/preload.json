{"pageProps":{"toc":"[{\"url\":\"#\",\"text\":\"概览\",\"depth\":2},{\"url\":\"#reference\",\"depth\":2,\"text\":\"参考 \"},{\"url\":\"#preload\",\"depth\":3,\"text\":[[\"$r\",\"code\",null,{\"children\":\"preload(href, options)\"}],\" \"]},{\"url\":\"#usage\",\"depth\":2,\"text\":\"用法 \"},{\"url\":\"#preloading-when-rendering\",\"depth\":3,\"text\":\"渲染时进行预加载 \"},{\"url\":\"#preloading-in-an-event-handler\",\"depth\":3,\"text\":\"在事件处理程序中预加载 \"}]","content":"[[\"$r\",\"MaxWidth\",\"42\",{\"children\":[[\"$r\",\"Canary\",null,{\"children\":[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"preload\"}],\" 函数当前仅在 React Canary 与 experimental 渠道中可用，请在 \",[\"$r\",\"a\",null,{\"href\":\"/community/versioning-policy#all-release-channels\",\"children\":\"此处了解更多关于 React 发布渠道的信息\"}],\"。\"]}]}],\"\\n\",[\"$r\",\"Note\",null,{\"children\":[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"a\",null,{\"href\":\"/learn/start-a-new-react-project\",\"children\":\"基于 React 的框架\"}],\" 通常会内置资源处理方案，因此你可能不必手动调用此 API。请查阅框架文档以获取详细信息。\"]}]}],\"\\n\",[\"$r\",\"Intro\",null,{\"children\":[[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"preload\"}],\" 可以预获取期望使用的资源，比如样式表、字体或外部脚本。\"]}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"preload(\\\"https://example.com/font.woff2\\\", {as: \\\"font\\\"});\\n\"}]}]]}],\"\\n\",[\"$r\",\"InlineToc\",null,{}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"reference\",\"children\":\"参考 \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"preload\",\"children\":[[\"$r\",\"code\",null,{\"children\":\"preload(href, options)\"}],\" \"]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"调用 \",[\"$r\",\"code\",null,{\"children\":\"react-dom\"}],\" 中的 \",[\"$r\",\"code\",null,{\"children\":\"preload\"}],\" 函数以实现预加载资源。\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { preload } from 'react-dom';\\n\\nfunction AppRoot() {\\n  preload(\\\"https://example.com/font.woff2\\\", {as: \\\"font\\\"});\\n  // ……\\n}\\n\\n\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"$r\",\"a\",null,{\"href\":\"#usage\",\"children\":\"参见下方更多示例。\"}]}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"preload\"}],\" 函数向浏览器提供一个提示，告诉它应该开始下载给定的资源，这将会节省时间。\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"parameters\",\"children\":\"参数 \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"href\"}],\"：字符串，要下载的资源的 URL。\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"options\"}],\"：对象，可以包含以下属性：\",\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"as\"}],\"：必需的字符串，表示资源的类型，\",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/link#as\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"可能的值\"}],\" 包括 \",[\"$r\",\"code\",null,{\"children\":\"audio\"}],\"、\",[\"$r\",\"code\",null,{\"children\":\"document\"}],\"、\",[\"$r\",\"code\",null,{\"children\":\"embed\"}],\"、\",[\"$r\",\"code\",null,{\"children\":\"fetch\"}],\"、\",[\"$r\",\"code\",null,{\"children\":\"font\"}],\"、\",[\"$r\",\"code\",null,{\"children\":\"image\"}],\"、\",[\"$r\",\"code\",null,{\"children\":\"object\"}],\"、\",[\"$r\",\"code\",null,{\"children\":\"script\"}],\"、\",[\"$r\",\"code\",null,{\"children\":\"style\"}],\"、\",[\"$r\",\"code\",null,{\"children\":\"track\"}],\"、\",[\"$r\",\"code\",null,{\"children\":\"video\"}],\" 与 \",[\"$r\",\"code\",null,{\"children\":\"worker\"}],\"。\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"crossOrigin\"}],\"：字符串，表示要使用的 \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Attributes/crossorigin\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"CORS 策略\"}],\"，可能的值为 \",[\"$r\",\"code\",null,{\"children\":\"anonymous\"}],\" 与 \",[\"$r\",\"code\",null,{\"children\":\"use-credentials\"}],\"。当 \",[\"$r\",\"code\",null,{\"children\":\"as\"}],\" 设置为 \",[\"$r\",\"code\",null,{\"children\":\"\\\"fetch\\\"\"}],\" 时是必需的。\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"referrerPolicy\"}],\"：字符串，表示在获取时发送的 \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/link#referrerpolicy\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"referer 请求头\"}],\"，可能的值为 \",[\"$r\",\"code\",null,{\"children\":\"no-referrer-when-downgrade\"}],\"（默认值）、\",[\"$r\",\"code\",null,{\"children\":\"no-referrer\"}],\"、\",[\"$r\",\"code\",null,{\"children\":\"origin\"}],\"、\",[\"$r\",\"code\",null,{\"children\":\"origin-when-cross-origin\"}],\" 与 \",[\"$r\",\"code\",null,{\"children\":\"unsafe-url\"}],\"。\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"integrity\"}],\"：字符串，为资源的加密哈希，用于 \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/Security/Subresource_Integrity\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"验证其真实性\"}],\"。\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"type\"}],\"：字符串，表示资源的 MIME 类型。\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"nonce\"}],\"：字符串，表示使用严格内容安全策略时允许资源的 \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Global_attributes/nonce\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"加密随机数\"}],\"。\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"fetchPriority\"}],\"：字符串，为获取资源建议的相对优先级，可能的值为 \",[\"$r\",\"code\",null,{\"children\":\"auto\"}],\"（默认值）、\",[\"$r\",\"code\",null,{\"children\":\"high\"}],\" 与 \",[\"$r\",\"code\",null,{\"children\":\"low\"}],\"。\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"imageSrcSet\"}],\"：字符串，仅与 \",[\"$r\",\"code\",null,{\"children\":\"as: \\\"image\\\"\"}],\" 一起使用，用于指定 \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"图像的源集\"}],\"。\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"imageSizes\"}],\"：字符串，仅与 \",[\"$r\",\"code\",null,{\"children\":\"as: \\\"image\\\"\"}],\" 一起使用，用于指定 \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"图像的尺寸\"}],\"。\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"returns\",\"children\":\"返回值 \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[[\"$r\",\"code\",null,{\"children\":\"preload\"}],\" 不返回任何值。\"]}],\"\\n\",[\"$r\",\"h4\",null,{\"id\":\"caveats\",\"children\":\"注意 \"}],\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"对 \",[\"$r\",\"code\",null,{\"children\":\"preload\"}],\" 的多个等效调用与单个调用具有相同的效果。根据以下规则，对 \",[\"$r\",\"code\",null,{\"children\":\"preload\"}],\" 的调用被视为等效：\",\"\\n\",[\"$r\",\"ul\",null,{\"children\":[\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"如果两个调用具有相同的 \",[\"$r\",\"code\",null,{\"children\":\"href\"}],\"，则它们是等效的，除非：\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"如果 \",[\"$r\",\"code\",null,{\"children\":\"as\"}],\" 设置为 \",[\"$r\",\"code\",null,{\"children\":\"image\"}],\"，并且两个调用具有相同的 \",[\"$r\",\"code\",null,{\"children\":\"href\"}],\"、\",[\"$r\",\"code\",null,{\"children\":\"imageSrcSet\"}],\" 和 \",[\"$r\",\"code\",null,{\"children\":\"imageSizes\"}],\"，则它们是等效的。\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"在浏览器中，可以在任何情况下调用 \",[\"$r\",\"code\",null,{\"children\":\"preload\"}],\"：例如渲染组件时、Effect 中以及事件处理程序中等等。\"]}],\"\\n\",[\"$r\",\"li\",null,{\"children\":[\"在服务器端渲染或渲染服务器组件时，只有在渲染组件时调用 \",[\"$r\",\"code\",null,{\"children\":\"preload\"}],\" 或在源自渲染组件的异步上下文中调用时，\",[\"$r\",\"code\",null,{\"children\":\"preload\"}],\" 才会生效。其他任何调用都将被忽略。\"]}],\"\\n\"]}],\"\\n\",[\"$r\",\"hr\",null,{}],\"\\n\",[\"$r\",\"h2\",null,{\"id\":\"usage\",\"children\":\"用法 \"}],\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"preloading-when-rendering\",\"children\":\"渲染时进行预加载 \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"如果知道组件或其子组件将使用特定资源，那么在渲染组件时调用 \",[\"$r\",\"code\",null,{\"children\":\"preload\"}],\"。\"]}],\"\\n\"]}],[\"$r\",\"Recipes\",null,{\"titleText\":\"预加载的例子\",\"children\":[[\"$r\",\"h4\",null,{\"id\":\"preloading-an-external-script\",\"children\":\"预加载外部脚本 \"}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { preload } from 'react-dom';\\n\\nfunction AppRoot() {\\n  preload(\\\"https://example.com/script.js\\\", {as: \\\"script\\\"});\\n  return ...;\\n}\\n\"}]}],[\"$r\",\"p\",null,{\"children\":[\"如果希望浏览器立即开始执行脚本（而不仅仅是下载它），请使用 \",[\"$r\",\"a\",null,{\"href\":\"/reference/react-dom/preinit\",\"children\":[\"$r\",\"code\",null,{\"children\":\"preinit\"}]}],\"；如果想加载一个 ESM 模块，请使用 \",[\"$r\",\"a\",null,{\"href\":\"/reference/react-dom/preloadModule\",\"children\":[\"$r\",\"code\",null,{\"children\":\"preloadModule\"}]}],\"。\"]}],[\"$r\",\"Solution\",null,{}],[\"$r\",\"h4\",null,{\"id\":\"preloading-a-stylesheet\",\"children\":\"预加载样式表 \"}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { preload } from 'react-dom';\\n\\nfunction AppRoot() {\\n  preload(\\\"https://example.com/style.css\\\", {as: \\\"style\\\"});\\n  return ...;\\n}\\n\"}]}],[\"$r\",\"p\",null,{\"children\":[\"如果希望样式表立即被插入到文档中（这意味着浏览器将立即开始解析它而不仅仅是下载它），请使用 \",[\"$r\",\"a\",null,{\"href\":\"/reference/react-dom/preinit\",\"children\":[\"$r\",\"code\",null,{\"children\":\"preinit\"}]}],\"。\"]}],[\"$r\",\"Solution\",null,{}],[\"$r\",\"h4\",null,{\"id\":\"preloading-a-font\",\"children\":\"预加载字体 \"}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { preload } from 'react-dom';\\n\\nfunction AppRoot() {\\n  preload(\\\"https://example.com/style.css\\\", {as: \\\"style\\\"});\\n  preload(\\\"https://example.com/font.woff2\\\", {as: \\\"font\\\"});\\n  return ...;\\n}\\n\"}]}],[\"$r\",\"p\",null,{\"children\":\"如果预加载样式表，最好也预加载样式表引用的任何字体。这样，浏览器可以在下载和解析样式表之前开始下载字体。\"}],[\"$r\",\"Solution\",null,{}],[\"$r\",\"h4\",null,{\"id\":\"preloading-an-image\",\"children\":\"预加载图片 \"}],[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { preload } from 'react-dom';\\n\\nfunction AppRoot() {\\n  preload(\\\"/banner.png\\\", {\\n    as: \\\"image\\\",\\n    imageSrcSet: \\\"/banner512.png 512w, /banner1024.png 1024w\\\",\\n    imageSizes: \\\"(max-width: 512px) 512px, 1024px\\\",\\n  });\\n  return ...;\\n}\\n\"}]}],[\"$r\",\"p\",null,{\"children\":[\"当预加载图像时，\",[\"$r\",\"code\",null,{\"children\":\"imageSrcSet\"}],\" 和 \",[\"$r\",\"code\",null,{\"children\":\"imageSizes\"}],\" 选项可以帮助浏览器 \",[\"$r\",\"a\",null,{\"href\":\"https://developer.mozilla.org/zh-CN/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images\",\"target\":\"_blank\",\"rel\":\"nofollow noopener noreferrer\",\"children\":\"为屏幕尺寸获取正确大小的图像\"}],\"。\"]}],[\"$r\",\"Solution\",null,{}]]}],[\"$r\",\"MaxWidth\",\"last\",{\"children\":[\"\\n\",[\"$r\",\"h3\",null,{\"id\":\"preloading-in-an-event-handler\",\"children\":\"在事件处理程序中预加载 \"}],\"\\n\",[\"$r\",\"p\",null,{\"children\":[\"在转换到需要外部资源的页面或状态之前，于事件处理程序中调用 \",[\"$r\",\"code\",null,{\"children\":\"preload\"}],\"。这会比在渲染新页面或状态时调用它更早地启动该过程。\"]}],\"\\n\",[\"$r\",\"pre\",null,{\"children\":[\"$r\",\"code\",null,{\"className\":\"language-js\",\"children\":\"import { preload } from 'react-dom';\\n\\nfunction CallToAction() {\\n  const onClick = () => {\\n    preload(\\\"https://example.com/wizardStyles.css\\\", {as: \\\"style\\\"});\\n    startWizard();\\n  }\\n  return (\\n    <button onClick={onClick}>Start Wizard</button>\\n  );\\n}\\n\"}]}]]}]]","meta":{"title":"preload","canary":true}},"__N_SSG":true}